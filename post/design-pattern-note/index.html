<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Design Pattern 1. Creational Patterns 1.1.Factory Method å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ å…¶åœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œ å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚ Usage æ— æ³•é¢„çŸ¥å¯¹è±¡ç¡®åˆ‡ç±»åˆ«åŠå…¶ä¾'>
<title>Design Pattern Note</title>

<link rel='canonical' href='https://chasing1020.github.io/post/design-pattern-note/'>

<link rel="stylesheet" href="/scss/style.min.a3b649326d90b695e08fa0725ec8adf6ad76cb19fcc1b8379c0021a110a9104c.css"><meta property='og:title' content='Design Pattern Note'>
<meta property='og:description' content='Design Pattern 1. Creational Patterns 1.1.Factory Method å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ å…¶åœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œ å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚ Usage æ— æ³•é¢„çŸ¥å¯¹è±¡ç¡®åˆ‡ç±»åˆ«åŠå…¶ä¾'>
<meta property='og:url' content='https://chasing1020.github.io/post/design-pattern-note/'>
<meta property='og:site_name' content='Chasing&#39;s blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Design Pattern' /><meta property='article:published_time' content='2021-06-01T10:18:40&#43;08:00'/><meta property='article:modified_time' content='2021-06-01T10:18:40&#43;08:00'/><meta property='og:image' content='https://chasing1020.github.io/post/design-pattern-note/design-pattern.webp' />
<meta name="twitter:site" content="@Chasing1020">
    <meta name="twitter:creator" content="@Chasing1020"><meta name="twitter:title" content="Design Pattern Note">
<meta name="twitter:description" content="Design Pattern 1. Creational Patterns 1.1.Factory Method å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ å…¶åœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œ å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚ Usage æ— æ³•é¢„çŸ¥å¯¹è±¡ç¡®åˆ‡ç±»åˆ«åŠå…¶ä¾"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://chasing1020.github.io/post/design-pattern-note/design-pattern.webp' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu95eb581bc5d2486d92921983fc6c7583_36979_300x0_resize_q75_box.jpg" width="300"
                            height="299" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ–¥ï¸</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Chasing&#39;s blog</a></h1>
            <h2 class="site-description">Why there is a universe?</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/Chasing1020'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/Chasing1020'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://t.me/Chasing1020'
                        target="_blank"
                        title="Telegram"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-telegram" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:chasing1020@gmail.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <rect x="3" y="5" width="18" height="14" rx="2" />
  <polyline points="3 7 12 13 21 7" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='/index.xml'
                        target="_blank"
                        title="RSS"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Friends</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
      
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#design-pattern">Design Pattern</a>
      <ul>
        <li><a href="#1-creational-patterns">1. Creational Patterns</a>
          <ul>
            <li><a href="#11factory-method">1.1.Factory Method</a></li>
            <li><a href="#12abstract-factory">1.2.Abstract Factory</a></li>
            <li><a href="#13builder">1.3.Builder</a></li>
            <li><a href="#14prototype">1.4.Prototype</a></li>
            <li><a href="#15singleton">1.5.Singleton</a></li>
          </ul>
        </li>
        <li><a href="#2-structural-patterns">2. Structural Patterns</a>
          <ul>
            <li><a href="#21adapter">2.1.Adapter</a></li>
            <li><a href="#22bridge">2.2.Bridge</a></li>
            <li><a href="#23composite">2.3.Composite</a></li>
            <li><a href="#24decorator">2.4.Decorator</a></li>
            <li><a href="#25facade">2.5.Facade</a></li>
            <li><a href="#26flyweight">2.6.Flyweight</a></li>
            <li><a href="#27proxy">2.7.Proxy</a></li>
          </ul>
        </li>
        <li><a href="#3-behavioral-patterns">3. Behavioral Patterns</a>
          <ul>
            <li><a href="#31chain-of-responsibility">3.1.Chain of Responsibility</a></li>
            <li><a href="#32command">3.2.Command</a></li>
            <li><a href="#33iterator">3.3.Iterator</a></li>
            <li><a href="#34mediator">3.4.Mediator</a></li>
            <li><a href="#35snapshot">3.5.Snapshot</a></li>
            <li><a href="#36observer">3.6.Observer</a></li>
            <li><a href="#37state">3.7.State</a></li>
            <li><a href="#38strategy">3.8.Strategy</a></li>
            <li><a href="#39template-method">3.9.Template Method</a></li>
            <li><a href="#310visitor">3.10.Visitor</a></li>
            <li><a href="#311interpreter">3.11.Interpreter</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/design-pattern-note/">
                <img src="/post/design-pattern-note/design-pattern_hu600d2222db3dc8c760aa00c9a5118f14_148336_800x0_resize_q75_h2_box_2.webp"
                        srcset="/post/design-pattern-note/design-pattern_hu600d2222db3dc8c760aa00c9a5118f14_148336_800x0_resize_q75_h2_box_2.webp 800w, /post/design-pattern-note/design-pattern_hu600d2222db3dc8c760aa00c9a5118f14_148336_1600x0_resize_q75_h2_box_2.webp 1600w"
                        width="800" 
                        height="450" 
                        loading="lazy"
                        alt="Featured image of post Design Pattern Note" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/design-pattern-note/">Design Pattern Note</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 01, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    24 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="design-pattern">Design Pattern</h1>
<h2 id="1-creational-patterns">1. Creational Patterns</h2>
<h3 id="11factory-method">1.1.Factory Method</h3>
<p><strong>å·¥å‚æ–¹æ³•æ¨¡å¼</strong>æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ å…¶åœ¨çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œ å…è®¸å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹ã€‚</p>
<h4 id="usage">Usage</h4>
<ol>
<li>æ— æ³•é¢„çŸ¥å¯¹è±¡ç¡®åˆ‡ç±»åˆ«åŠå…¶ä¾èµ–å…³ç³»ã€‚ï¼ˆåªéœ€è¦å¼€å‘æ–°çš„åˆ›å»ºè€…å­ç±»ï¼Œ ç„¶åé‡å†™å…¶å·¥å‚æ–¹æ³•ï¼‰</li>
<li>å¸Œæœ›ç”¨æˆ·èƒ½æ‰©å±•è½¯ä»¶åº“æˆ–æ¡†æ¶çš„å†…éƒ¨ç»„ä»¶ã€‚</li>
<li>å¦‚æœå¸Œæœ›å¤ç”¨ç°æœ‰å¯¹è±¡æ¥èŠ‚çœç³»ç»Ÿèµ„æºï¼Œ è€Œä¸æ˜¯æ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºå¯¹è±¡ã€‚</li>
</ol>
<h4 id="advantages">Advantages</h4>
<ol>
<li>é¿å…åˆ›å»ºè€…å’Œå…·ä½“äº§å“ä¹‹é—´çš„ç´§å¯†è€¦åˆã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å°†äº§å“åˆ›å»ºä»£ç æ”¾åœ¨ç¨‹åºçš„å•ä¸€ä½ç½®ï¼Œ ä»è€Œä½¿å¾—ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ æ— éœ€æ›´æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç ï¼Œ å¯ä»¥åœ¨ç¨‹åºä¸­å¼•å…¥æ–°çš„äº§å“ç±»å‹ã€‚</li>
</ol>
<h4 id="disadvantages">Disadvantages</h4>
<ol>
<li>åº”ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼éœ€è¦å¼•å…¥è®¸å¤šæ–°çš„å­ç±»ï¼Œ ä»£ç å¯èƒ½ä¼šå› æ­¤å˜å¾—æ›´å¤æ‚ã€‚ æœ€å¥½çš„æƒ…å†µæ˜¯å°†è¯¥æ¨¡å¼å¼•å…¥åˆ›å»ºè€…ç±»çš„ç°æœ‰å±‚æ¬¡ç»“æ„ä¸­ã€‚</li>
</ol>
<h4 id="demo">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">NumberFormat</span> <span class="kd">extends</span> <span class="n">Format</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">NumberFormat</span> <span class="nf">getInstance</span><span class="o">(</span><span class="n">Locale</span> <span class="n">desiredLocale</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                           <span class="kt">int</span> <span class="n">choice</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">LocaleProviderAdapter</span> <span class="n">adapter</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">adapter</span> <span class="o">=</span> <span class="n">LocaleProviderAdapter</span><span class="o">.</span><span class="na">getAdapter</span><span class="o">(</span><span class="n">NumberFormatProvider</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                                   <span class="n">desiredLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">NumberFormat</span> <span class="n">numberFormat</span> <span class="o">=</span> <span class="n">getInstance</span><span class="o">(</span><span class="n">adapter</span><span class="o">,</span> <span class="n">desiredLocale</span><span class="o">,</span> <span class="n">choice</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">numberFormat</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">numberFormat</span> <span class="o">=</span> <span class="n">getInstance</span><span class="o">(</span><span class="n">LocaleProviderAdapter</span><span class="o">.</span><span class="na">forJRE</span><span class="o">(),</span>
</span></span><span class="line"><span class="cl">                                       <span class="n">desiredLocale</span><span class="o">,</span> <span class="n">choice</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">numberFormat</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">NumberFormat</span> <span class="nf">getInstance</span><span class="o">(</span><span class="n">LocaleProviderAdapter</span> <span class="n">adapter</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                            <span class="n">Locale</span> <span class="n">locale</span><span class="o">,</span> <span class="kt">int</span> <span class="n">choice</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">NumberFormatProvider</span> <span class="n">provider</span> <span class="o">=</span> <span class="n">adapter</span><span class="o">.</span><span class="na">getNumberFormatProvider</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">NumberFormat</span> <span class="n">numberFormat</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">switch</span> <span class="o">(</span><span class="n">choice</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="n">NUMBERSTYLE</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">numberFormat</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="na">getNumberInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="n">PERCENTSTYLE</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">numberFormat</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="na">getPercentInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="n">CURRENCYSTYLE</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">numberFormat</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="na">getCurrencyInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="n">INTEGERSTYLE</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">numberFormat</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="na">getIntegerInstance</span><span class="o">(</span><span class="n">locale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">numberFormat</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// Calendar ä¸‰ä¸ªå­ç±»ï¼Œéƒ½å¯ä»¥è°ƒç”¨getInstance() -&gt; createClendar
</span></span></span><span class="line"><span class="cl"><span class="c1">// BuddhistCalendar
</span></span></span><span class="line"><span class="cl"><span class="c1">// GregorianCalendar
</span></span></span><span class="line"><span class="cl"><span class="c1">// JapaneseImperialCalendar
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Calendar</span> <span class="nf">createCalendar</span><span class="o">(</span><span class="n">TimeZone</span> <span class="n">zone</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                           <span class="n">Locale</span> <span class="n">aLocale</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">CalendarProvider</span> <span class="n">provider</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">            <span class="n">LocaleProviderAdapter</span><span class="o">.</span><span class="na">getAdapter</span><span class="o">(</span><span class="n">CalendarProvider</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                                 <span class="o">.</span><span class="na">getCalendarProvider</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">provider</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">provider</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalArgumentException</span> <span class="n">iae</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// fall back to the default instantiation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Calendar</span> <span class="n">cal</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">aLocale</span><span class="o">.</span><span class="na">hasExtensions</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">String</span> <span class="n">caltype</span> <span class="o">=</span> <span class="n">aLocale</span><span class="o">.</span><span class="na">getUnicodeLocaleType</span><span class="o">(</span><span class="s">&#34;ca&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">caltype</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">switch</span> <span class="o">(</span><span class="n">caltype</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="s">&#34;buddhist&#34;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BuddhistCalendar</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="s">&#34;japanese&#34;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JapaneseImperialCalendar</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="s">&#34;gregory&#34;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">cal</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// If no known calendar type is explicitly specified,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// perform the traditional way to create a Calendar:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// create a BuddhistCalendar for th_TH locale,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// a JapaneseImperialCalendar for ja_JP_JP locale, or
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// a GregorianCalendar for any other locales.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// NOTE: The language, country and variant strings are interned.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="o">(</span><span class="n">aLocale</span><span class="o">.</span><span class="na">getLanguage</span><span class="o">()</span> <span class="o">==</span> <span class="s">&#34;th&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">aLocale</span><span class="o">.</span><span class="na">getCountry</span><span class="o">()</span> <span class="o">==</span> <span class="s">&#34;TH&#34;</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BuddhistCalendar</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">aLocale</span><span class="o">.</span><span class="na">getVariant</span><span class="o">()</span> <span class="o">==</span> <span class="s">&#34;JP&#34;</span> <span class="o">&amp;&amp;</span> <span class="n">aLocale</span><span class="o">.</span><span class="na">getLanguage</span><span class="o">()</span> <span class="o">==</span> <span class="s">&#34;ja&#34;</span>
</span></span><span class="line"><span class="cl">                       <span class="o">&amp;&amp;</span> <span class="n">aLocale</span><span class="o">.</span><span class="na">getCountry</span><span class="o">()</span> <span class="o">==</span> <span class="s">&#34;JP&#34;</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JapaneseImperialCalendar</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">cal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="n">zone</span><span class="o">,</span> <span class="n">aLocale</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">cal</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="12abstract-factory">1.2.Abstract Factory</h3>
<p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼</strong>æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³çš„å¯¹è±¡ï¼Œ è€Œæ— éœ€æŒ‡å®šå…¶å…·ä½“ç±»ã€‚</p>
<h4 id="usage-1">Usage</h4>
<ol>
<li>å¦‚æœä»£ç éœ€è¦ä¸å¤šä¸ªä¸åŒç³»åˆ—çš„ç›¸å…³äº§å“äº¤äº’ï¼Œ ä½†æ˜¯ç”±äºæ— æ³•æå‰è·å–ç›¸å…³ä¿¡æ¯ï¼Œ æˆ–è€…å‡ºäºå¯¹æœªæ¥æ‰©å±•æ€§çš„è€ƒè™‘ï¼Œ ä¸å¸Œæœ›ä»£ç åŸºäºäº§å“çš„å…·ä½“ç±»è¿›è¡Œæ„å»ºï¼Œ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚ã€‚</li>
<li>å¦‚æœæœ‰ä¸€ä¸ªåŸºäºä¸€ç»„æŠ½è±¡æ–¹æ³•çš„ç±»ï¼Œ ä¸”å…¶ä¸»è¦åŠŸèƒ½å› æ­¤å˜å¾—ä¸æ˜ç¡®ï¼Œ é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥è€ƒè™‘ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-1">Advantages</h4>
<ol>
<li>å¯ä»¥ç¡®ä¿åŒä¸€å·¥å‚ç”Ÿæˆçš„äº§å“ç›¸äº’åŒ¹é…ã€‚</li>
<li>å¯ä»¥é¿å…å®¢æˆ·ç«¯å’Œå…·ä½“äº§å“ä»£ç çš„è€¦åˆã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯ä»¥å°†äº§å“ç”Ÿæˆä»£ç æŠ½å–åˆ°åŒä¸€ä½ç½®ï¼Œ ä½¿å¾—ä»£ç æ˜“äºç»´æŠ¤ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ å‘åº”ç”¨ç¨‹åºä¸­å¼•å…¥æ–°äº§å“å˜ä½“æ—¶ï¼Œ æ— éœ€ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ã€‚</li>
</ol>
<h4 id="disadvantages-1">Disadvantages</h4>
<ol>
<li>ç”±äºé‡‡ç”¨è¯¥æ¨¡å¼éœ€è¦å‘åº”ç”¨ä¸­å¼•å…¥ä¼—å¤šæ¥å£å’Œç±»ï¼Œ ä»£ç å¯èƒ½ä¼šæ¯”ä¹‹å‰æ›´åŠ å¤æ‚ã€‚</li>
</ol>
<h4 id="demo-1">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// ä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡XMLæ–‡ä»¶ï¼Œè·å¾—ä¸€ä¸ªèƒ½ç”ŸæˆDOMå¯¹è±¡çš„è§£æå™¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">DocumentBuilderFactory</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//...   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">DocumentBuilderFactory</span> <span class="nf">newInstance</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">FactoryFinder</span><span class="o">.</span><span class="na">find</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                <span class="cm">/* The default property name according to the JAXP spec */</span>
</span></span><span class="line"><span class="cl">                <span class="n">DocumentBuilderFactory</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="c1">// &#34;javax.xml.parsers.DocumentBuilderFactory&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="cm">/* The fallback implementation class name */</span>
</span></span><span class="line"><span class="cl">                <span class="s">&#34;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DocumentBuilderFactoryImpl</span> <span class="kd">extends</span> <span class="n">DocumentBuilderFactory</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">DocumentBuilder</span> <span class="nf">newDocumentBuilder</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">ParserConfigurationException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/** Check that if a Schema has been specified that neither of the schema properties have been set. */</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">grammar</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">attributes</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">JAXPConstants</span><span class="o">.</span><span class="na">JAXP_SCHEMA_LANGUAGE</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">throw</span> <span class="k">new</span> <span class="n">ParserConfigurationException</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                        <span class="n">SAXMessageFormatter</span><span class="o">.</span><span class="na">formatMessage</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s">&#34;schema-already-specified&#34;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span><span class="n">JAXPConstants</span><span class="o">.</span><span class="na">JAXP_SCHEMA_LANGUAGE</span><span class="o">}));</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">attributes</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">JAXPConstants</span><span class="o">.</span><span class="na">JAXP_SCHEMA_SOURCE</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">throw</span> <span class="k">new</span> <span class="n">ParserConfigurationException</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                        <span class="n">SAXMessageFormatter</span><span class="o">.</span><span class="na">formatMessage</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                        <span class="s">&#34;schema-already-specified&#34;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]</span> <span class="o">{</span><span class="n">JAXPConstants</span><span class="o">.</span><span class="na">JAXP_SCHEMA_SOURCE</span><span class="o">}));</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">new</span> <span class="n">DocumentBuilderImpl</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">attributes</span><span class="o">,</span> <span class="n">features</span><span class="o">,</span> <span class="n">fSecureProcess</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SAXException</span> <span class="n">se</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Handles both SAXNotSupportedException, SAXNotRecognizedException
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">ParserConfigurationException</span><span class="o">(</span><span class="n">se</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="13builder">1.3.Builder</h3>
<p>æ„å»ºå™¨æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ ä½¿èƒ½å¤Ÿåˆ†æ­¥éª¤åˆ›å»ºå¤æ‚å¯¹è±¡ã€‚ è¯¥æ¨¡å¼å…è®¸ä½¿ç”¨ç›¸åŒçš„åˆ›å»ºä»£ç ç”Ÿæˆä¸åŒç±»å‹å’Œå½¢å¼çš„å¯¹è±¡ã€‚</p>
<h4 id="usage-2">Usage</h4>
<ol>
<li>ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼å¯é¿å… â€œé‡å æ„é€ å‡½æ•° ï¼ˆtelescopic constructorï¼‰â€ çš„å‡ºç°ã€‚</li>
<li>å½“å¸Œæœ›ä½¿ç”¨ä»£ç åˆ›å»ºä¸åŒå½¢å¼çš„äº§å“ ï¼ˆä¾‹å¦‚çŸ³å¤´æˆ–æœ¨å¤´æˆ¿å±‹ï¼‰ æ—¶ï¼Œ å¯ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼ã€‚</li>
<li>ä½¿ç”¨ç”Ÿæˆå™¨æ„é€ ç»„åˆæ ‘æˆ–å…¶ä»–å¤æ‚å¯¹è±¡ã€‚</li>
</ol>
<h4 id="advantages-2">Advantages</h4>
<ol>
<li>å¯ä»¥åˆ†æ­¥åˆ›å»ºå¯¹è±¡ï¼Œ æš‚ç¼“åˆ›å»ºæ­¥éª¤æˆ–é€’å½’è¿è¡Œåˆ›å»ºæ­¥éª¤ã€‚</li>
<li>ç”Ÿæˆä¸åŒå½¢å¼çš„äº§å“æ—¶ï¼Œ å¯ä»¥å¤ç”¨ç›¸åŒçš„åˆ¶é€ ä»£ç ã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯ä»¥å°†å¤æ‚æ„é€ ä»£ç ä»äº§å“çš„ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</li>
</ol>
<h4 id="disadvantages-2">Disadvantages</h4>
<ol>
<li>ç”±äºè¯¥æ¨¡å¼éœ€è¦æ–°å¢å¤šä¸ªç±»ï¼Œ å› æ­¤ä»£ç æ•´ä½“å¤æ‚ç¨‹åº¦ä¼šæœ‰æ‰€å¢åŠ ã€‚</li>
</ol>
<h4 id="demo-2">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">StringBuilder</span>
</span></span><span class="line"><span class="cl">    <span class="kd">extends</span> <span class="n">AbstractStringBuilder</span>
</span></span><span class="line"><span class="cl">    <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span><span class="o">,</span> <span class="n">CharSequence</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">StringBuilder</span> <span class="nf">append</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">append</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">obj</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">StringBuilder</span> <span class="nf">append</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="14prototype">1.4.Prototype</h3>
<p>åŸå‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ ä½¿èƒ½å¤Ÿå¤åˆ¶å·²æœ‰å¯¹è±¡ï¼Œ è€Œåˆæ— éœ€ä½¿ä»£ç ä¾èµ–å®ƒä»¬æ‰€å±çš„ç±»ã€‚</p>
<h4 id="usage-3">Usage</h4>
<ol>
<li>å¦‚æœéœ€è¦å¤åˆ¶ä¸€äº›å¯¹è±¡ï¼Œ åŒæ—¶åˆå¸Œæœ›ä»£ç ç‹¬ç«‹äºè¿™äº›å¯¹è±¡æ‰€å±çš„å…·ä½“ç±»ï¼Œ å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚</li>
<li>å¦‚æœå­ç±»çš„åŒºåˆ«ä»…åœ¨äºå…¶å¯¹è±¡çš„åˆå§‹åŒ–æ–¹å¼ï¼Œ é‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼æ¥å‡å°‘å­ç±»çš„æ•°é‡ã€‚ åˆ«äººåˆ›å»ºè¿™äº›å­ç±»çš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†åˆ›å»ºç‰¹å®šç±»å‹çš„å¯¹è±¡ã€‚</li>
</ol>
<h4 id="advantages-3">Advantages</h4>
<ol>
<li>å¯ä»¥å…‹éš†å¯¹è±¡ï¼Œ è€Œæ— éœ€ä¸å®ƒä»¬æ‰€å±çš„å…·ä½“ç±»ç›¸è€¦åˆã€‚</li>
<li>å¯ä»¥å…‹éš†é¢„ç”ŸæˆåŸå‹ï¼Œ é¿å…åå¤è¿è¡Œåˆå§‹åŒ–ä»£ç ã€‚</li>
<li>å¯ä»¥æ›´æ–¹ä¾¿åœ°ç”Ÿæˆå¤æ‚å¯¹è±¡ï¼Œåœ¨å†…å­˜ä¸­åˆ›å»ºæ€§èƒ½æ›´å¥½ã€‚</li>
<li>å¯ä»¥ç”¨ç»§æ‰¿ä»¥å¤–çš„æ–¹å¼æ¥å¤„ç†å¤æ‚å¯¹è±¡çš„ä¸åŒé…ç½®ã€‚</li>
</ol>
<h4 id="disadvantages-3">Disadvantages</h4>
<ol>
<li>å…‹éš†åŒ…å«å¾ªç¯å¼•ç”¨çš„å¤æ‚å¯¹è±¡å¯èƒ½ä¼šéå¸¸éº»çƒ¦ã€‚</li>
</ol>
<h4 id="demo-3">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Cloneable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Object</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">protected</span> <span class="kd">native</span> <span class="n">Object</span> <span class="nf">clone</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">CloneNotSupportedException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Prototype</span> <span class="kd">implements</span> <span class="n">Cloneable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Prototype</span> <span class="nf">clone</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Prototype</span> <span class="n">prototype</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">prototype</span> <span class="o">=</span> <span class="o">(</span><span class="n">Prototype</span><span class="o">)</span><span class="kd">super</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">CloneNotSupportedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">prototype</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">ConcretePrototype</span> <span class="kd">extends</span> <span class="n">Prototype</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;åŸå‹æ¨¡å¼å®ç°ç±»&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ConcretePrototype</span> <span class="n">cp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ConcretePrototype</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// è¿”å›æµ…æ‹·è´å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                  <span class="n">ConcretePrototype</span> <span class="n">clonecp</span> <span class="o">=</span> <span class="o">(</span><span class="n">ConcretePrototype</span><span class="o">)</span><span class="n">cp</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                  <span class="n">clonecp</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="15singleton">1.5.Singleton</h3>
<p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ è®©èƒ½å¤Ÿä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œ å¹¶æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€èŠ‚ç‚¹ã€‚</p>
<h4 id="usage-4">Usage</h4>
<ol>
<li>å¦‚æœç¨‹åºä¸­çš„æŸä¸ªç±»å¯¹äºæ‰€æœ‰å®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ªå¯ç”¨çš„å®ä¾‹ï¼Œ å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚</li>
<li>å¦‚æœéœ€è¦æ›´åŠ ä¸¥æ ¼åœ°æ§åˆ¶å…¨å±€å˜é‡ï¼Œ å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-4">Advantages</h4>
<ol>
<li>å¯ä»¥ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>è·å¾—äº†ä¸€ä¸ªæŒ‡å‘è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®èŠ‚ç‚¹ã€‚</li>
<li>ä»…åœ¨é¦–æ¬¡è¯·æ±‚å•ä¾‹å¯¹è±¡æ—¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ol>
<h4 id="disadvantages-4">Disadvantages</h4>
<ol>
<li>è¿åäº†_å•ä¸€èŒè´£åŸåˆ™_ã€‚ è¯¥æ¨¡å¼åŒæ—¶è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ã€‚</li>
<li>å•ä¾‹æ¨¡å¼å¯èƒ½æ©ç›–ä¸è‰¯è®¾è®¡ï¼Œ æ¯”å¦‚ç¨‹åºå„ç»„ä»¶ä¹‹é—´ç›¸äº’äº†è§£è¿‡å¤šç­‰ã€‚</li>
<li>è¯¥æ¨¡å¼åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œ é¿å…å¤šä¸ªçº¿ç¨‹å¤šæ¬¡åˆ›å»ºå•ä¾‹å¯¹è±¡ã€‚</li>
<li>å•ä¾‹çš„å®¢æˆ·ç«¯ä»£ç å•å…ƒæµ‹è¯•å¯èƒ½ä¼šæ¯”è¾ƒå›°éš¾ï¼Œ å› ä¸ºè®¸å¤šæµ‹è¯•æ¡†æ¶ä»¥åŸºäºç»§æ‰¿çš„æ–¹å¼åˆ›å»ºæ¨¡æ‹Ÿå¯¹è±¡ã€‚ ç”±äºå•ä¾‹ç±»çš„æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œ è€Œä¸”ç»å¤§éƒ¨åˆ†è¯­è¨€æ— æ³•é‡å†™é™æ€æ–¹æ³•ï¼Œ æ‰€ä»¥éœ€è¦æƒ³å‡ºä»”ç»†è€ƒè™‘æ¨¡æ‹Ÿå•ä¾‹çš„æ–¹æ³•ã€‚ è¦ä¹ˆå¹²è„†ä¸ç¼–å†™æµ‹è¯•ä»£ç ï¼Œ æˆ–è€…ä¸ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="n">value</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// The following code emulates slow initialization.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¤šçº¿ç¨‹å®‰å…¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="n">value</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Singleton</span> <span class="n">result</span> <span class="o">=</span> <span class="n">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="kd">synchronized</span><span class="o">(</span><span class="n">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ï¼ˆæ¨èï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//æ¨èå†™æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">(){</span>  
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">SingletonHolder</span><span class="o">.</span><span class="na">sInstance</span><span class="o">;</span>  <span class="c1">//é™æ€å†…éƒ¨ç±»å®ŒæˆåŠ è½½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}</span>  
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">SingletonHolder</span> <span class="o">{</span>  
</span></span><span class="line"><span class="cl">        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Singleton</span> <span class="n">sInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>  
</span></span><span class="line"><span class="cl">    <span class="o">}</span>  
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ¸å¿ƒåº“ç¤ºä¾‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Runtime</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Runtime</span> <span class="n">currentRuntime</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runtime</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Runtime</span> <span class="nf">getRuntime</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">currentRuntime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">System</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">registerNatives</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="n">SecurityManager</span> <span class="n">security</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">registerNatives</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/** Don&#39;t let anyone instantiate this class */</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="nf">System</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">SecurityManager</span> <span class="nf">getSecurityManager</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">security</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-GO" data-lang="GO"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;sync&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">lock</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">single</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">singleInstance</span> <span class="o">*</span><span class="nx">single</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">getInstance</span><span class="p">()</span> <span class="o">*</span><span class="nx">single</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">singleInstance</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">lock</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">defer</span> <span class="nx">lock</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">singleInstance</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Creting Single Instance Now&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nx">singleInstance</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">single</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Single Instance already created-1&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Single Instance already created-2&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">singleInstance</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="2-structural-patterns">2. Structural Patterns</h2>
<h3 id="21adapter">2.1.Adapter</h3>
<p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½ä½¿æ¥å£ä¸å…¼å®¹çš„å¯¹è±¡èƒ½å¤Ÿç›¸äº’åˆä½œã€‚</p>
<h4 id="usage-5">Usage</h4>
<ol>
<li>å½“å¸Œæœ›ä½¿ç”¨æŸä¸ªç±»ï¼Œ ä½†æ˜¯å…¶æ¥å£ä¸å…¶ä»–ä»£ç ä¸å…¼å®¹æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨é€‚é…å™¨ç±»ã€‚</li>
<li>å¦‚æœæ‚¨éœ€è¦å¤ç”¨è¿™æ ·ä¸€äº›ç±»ï¼Œ ä»–ä»¬å¤„äºåŒä¸€ä¸ªç»§æ‰¿ä½“ç³»ï¼Œ å¹¶ä¸”ä»–ä»¬åˆæœ‰äº†é¢å¤–çš„ä¸€äº›å…±åŒçš„æ–¹æ³•ï¼Œ ä½†æ˜¯è¿™äº›å…±åŒçš„æ–¹æ³•ä¸æ˜¯æ‰€æœ‰åœ¨è¿™ä¸€ç»§æ‰¿ä½“ç³»ä¸­çš„å­ç±»æ‰€å…·æœ‰çš„å…±æ€§ã€‚</li>
</ol>
<h4 id="advantages-5">Advantages</h4>
<ol>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚å¯ä»¥å°†æ¥å£æˆ–æ•°æ®è½¬æ¢ä»£ç ä»ç¨‹åºä¸»è¦ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ åªè¦å®¢æˆ·ç«¯ä»£ç é€šè¿‡å®¢æˆ·ç«¯æ¥å£ä¸é€‚é…å™¨è¿›è¡Œäº¤äº’ï¼Œ å°±èƒ½åœ¨ä¸ä¿®æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ·»åŠ æ–°ç±»å‹çš„é€‚é…å™¨ã€‚</li>
</ol>
<h4 id="disadvantages-5">Disadvantages</h4>
<ol>
<li>ä»£ç æ•´ä½“å¤æ‚åº¦å¢åŠ ï¼Œ å› ä¸ºéœ€è¦æ–°å¢ä¸€ç³»åˆ—æ¥å£å’Œç±»ã€‚ æœ‰æ—¶ç›´æ¥æ›´æ”¹æœåŠ¡ç±»ä½¿å…¶ä¸å…¶ä»–ä»£ç å…¼å®¹ä¼šæ›´ç®€å•ã€‚</li>
</ol>
<h4 id="demo-4">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//ArrayList å’Œ T[]æ˜¯ç»„åˆå…³ç³»ï¼Œæƒ³å°†T[]è½¬æ¢æˆlistçš„æ“ä½œï¼Œè¦æœ‰ä¸€ä¸ªé€‚é…å™¨æ¥è¿›è¡Œè½¬æ¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Arrays</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">AbstractList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">implements</span> <span class="n">RandomAccess</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&#34;unchecked&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span><span class="o">[]</span> <span class="nf">toArray</span><span class="o">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="o">(</span><span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">T</span><span class="o">[]&gt;)</span> <span class="n">a</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">a</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">size</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="n">size</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">a</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">a</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@SafeVarargs</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&#34;varargs&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">asList</span><span class="o">(</span><span class="n">T</span><span class="o">...</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">a</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>InputStreamReaderä¹Ÿä½œä¸ºé€‚é…å™¨ä½¿ç”¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// ç›®æ ‡ç±»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Reader</span> <span class="kd">implements</span> <span class="n">Readable</span><span class="o">,</span> <span class="n">Closeable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å­—ç¬¦æµ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">abstract</span> <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">char</span> <span class="n">cbuf</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">abstract</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// é€‚é…å™¨ç±»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InputStreamReader</span> <span class="kd">extends</span> <span class="n">Reader</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StreamDecoder</span> <span class="n">sd</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//é€šè¿‡StreamDecoderç±»é—´æ¥å¼•ç”¨è¢«é€‚é…çš„å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">sd</span> <span class="o">=</span> <span class="n">StreamDecoder</span><span class="o">.</span><span class="na">forInputStreamReader</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// The default encoding should always be available
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">throw</span> <span class="k">new</span> <span class="n">Error</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// è¢«é€‚é…çš„ç±»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">InputStream</span> <span class="kd">implements</span> <span class="n">Closeable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å­—èŠ‚æµ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[])</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">read</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">b</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="22bridge">2.2.Bridge</h3>
<p>æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å¯å°†ä¸€ä¸ªå¤§ç±»æˆ–ä¸€ç³»åˆ—ç´§å¯†ç›¸å…³çš„ç±»æ‹†åˆ†ä¸ºæŠ½è±¡å’Œå®ç°ä¸¤ä¸ªç‹¬ç«‹çš„å±‚æ¬¡ç»“æ„ï¼Œ ä»è€Œèƒ½åœ¨å¼€å‘æ—¶åˆ†åˆ«ä½¿ç”¨ã€‚</p>
<h4 id="usage-6">Usage</h4>
<ol>
<li>å¦‚æœæƒ³è¦æ‹†åˆ†æˆ–é‡ç»„ä¸€ä¸ªå…·æœ‰å¤šé‡åŠŸèƒ½çš„åºæ‚ç±» ï¼ˆä¾‹å¦‚èƒ½ä¸å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„ç±»ï¼‰ï¼Œ å¯ä»¥ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ã€‚</li>
<li>å¦‚æœå¸Œæœ›åœ¨å‡ ä¸ªç‹¬ç«‹ç»´åº¦ä¸Šæ‰©å±•ä¸€ä¸ªç±»ï¼Œ å¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
<li>å¦‚æœéœ€è¦åœ¨è¿è¡Œæ—¶åˆ‡æ¢ä¸åŒå®ç°æ–¹æ³•ï¼Œ å¯ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-6">Advantages</h4>
<ol>
<li>å¯ä»¥åˆ›å»ºä¸å¹³å°æ— å…³çš„ç±»å’Œç¨‹åºï¼Œå°†æŠ½è±¡ä¸å®ç°è§£è€¦ã€‚</li>
<li>å®¢æˆ·ç«¯ä»£ç ä»…ä¸é«˜å±‚æŠ½è±¡éƒ¨åˆ†è¿›è¡Œäº’åŠ¨ï¼Œ ä¸ä¼šæ¥è§¦åˆ°å¹³å°çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ å¯ä»¥æ–°å¢æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†ï¼Œ ä¸”å®ƒä»¬ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ æŠ½è±¡éƒ¨åˆ†ä¸“æ³¨äºå¤„ç†é«˜å±‚é€»è¾‘ï¼Œ å®ç°éƒ¨åˆ†å¤„ç†å¹³å°ç»†èŠ‚ã€‚</li>
</ol>
<h4 id="disadvantages-6">Disadvantages</h4>
<ol>
<li>å¯¹é«˜å†…èšçš„ç±»ä½¿ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šè®©ä»£ç æ›´åŠ å¤æ‚ã€‚</li>
</ol>
<h4 id="demo-5">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// JDBC
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Driver</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Connection</span> <span class="nf">connect</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Properties</span> <span class="n">info</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">boolean</span> <span class="nf">acceptsURL</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">DriverPropertyInfo</span><span class="o">[]</span> <span class="nf">getPropertyInfo</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Properties</span> <span class="n">info</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getMajorVersion</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getMinorVersion</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">boolean</span> <span class="nf">jdbcCompliant</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Logger</span> <span class="nf">getParentLogger</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">SQLFeatureNotSupportedException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Driver</span> <span class="kd">extends</span> <span class="n">NonRegisteringDriver</span> <span class="kd">implements</span> <span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">Driver</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Driver</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">DriverManager</span><span class="o">.</span><span class="na">registerDriver</span><span class="o">(</span><span class="k">new</span> <span class="n">Driver</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SQLException</span> <span class="n">var1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;Can&#39;t register driver!&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ¡¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DriverManager</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Connection</span> <span class="nf">getConnection</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">user</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Properties</span> <span class="n">info</span> <span class="o">=</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Properties</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">info</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">password</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">info</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;password&#34;</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">(</span><span class="n">getConnection</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">info</span><span class="o">,</span> <span class="n">Reflection</span><span class="o">.</span><span class="na">getCallerClass</span><span class="o">()));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="23composite">2.3.Composite</h3>
<p>ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å¯ä»¥ä½¿ç”¨å®ƒå°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶ç»“æ„ï¼Œ å¹¶ä¸”èƒ½åƒä½¿ç”¨ç‹¬ç«‹å¯¹è±¡ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h4 id="usage-7">Usage</h4>
<ol>
<li>å¦‚æœéœ€è¦å®ç°æ ‘çŠ¶å¯¹è±¡ç»“æ„ï¼Œ å¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚</li>
<li>å¦‚æœå¸Œæœ›å®¢æˆ·ç«¯ä»£ç ä»¥ç›¸åŒæ–¹å¼å¤„ç†ç®€å•å’Œå¤æ‚å…ƒç´ ï¼Œ å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-7">Advantages</h4>
<ol>
<li>å¯ä»¥åˆ©ç”¨å¤šæ€å’Œé€’å½’æœºåˆ¶æ›´æ–¹ä¾¿åœ°ä½¿ç”¨å¤æ‚æ ‘ç»“æ„ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ æ— éœ€æ›´æ”¹ç°æœ‰ä»£ç ï¼Œ å°±å¯ä»¥åœ¨åº”ç”¨ä¸­æ·»åŠ æ–°å…ƒç´ ï¼Œ ä½¿å…¶æˆä¸ºå¯¹è±¡æ ‘çš„ä¸€éƒ¨åˆ†ã€‚</li>
</ol>
<h4 id="disadvantages-7">Disadvantages</h4>
<ol>
<li>å¯¹äºåŠŸèƒ½å·®å¼‚è¾ƒå¤§çš„ç±»ï¼Œ æä¾›å…¬å…±æ¥å£æˆ–è®¸ä¼šæœ‰å›°éš¾ã€‚ åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œ éœ€è¦è¿‡åº¦ä¸€èˆ¬åŒ–ç»„ä»¶æ¥å£ï¼Œ ä½¿å…¶å˜å¾—ä»¤äººéš¾ä»¥ç†è§£ã€‚</li>
</ol>
<h4 id="demo-6">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">dept</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">int</span> <span class="n">salary</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">subordinates</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">//æ„é€ å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span><span class="n">String</span> <span class="n">dept</span><span class="o">,</span> <span class="kt">int</span> <span class="n">sal</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">dept</span> <span class="o">=</span> <span class="n">dept</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">salary</span> <span class="o">=</span> <span class="n">sal</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">subordinates</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Employee</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">subordinates</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">(</span><span class="n">Employee</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">subordinates</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">getSubordinates</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="n">subordinates</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">(</span><span class="s">&#34;Employee :[ Name : &#34;</span><span class="o">+</span> <span class="n">name</span> 
</span></span><span class="line"><span class="cl">        <span class="o">+</span><span class="s">&#34;, dept : &#34;</span><span class="o">+</span> <span class="n">dept</span> <span class="o">+</span> <span class="s">&#34;, salary :&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">+</span> <span class="n">salary</span><span class="o">+</span><span class="s">&#34; ]&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>   
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¸¸ç”¨äºå‰ç«¯è¡¨ç¤ºä¸å›¾å½¢æ‰“äº¤é“çš„ç”¨æˆ·ç•Œé¢ç»„ä»¶æˆ–ä»£ç çš„å±‚æ¬¡ç»“æ„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Container</span> <span class="kd">extends</span> <span class="n">Component</span> <span class="o">{</span>   
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Component</span> <span class="nf">add</span><span class="o">(</span><span class="n">Component</span> <span class="n">comp</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">addImpl</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">comp</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">addImpl</span><span class="o">(</span><span class="n">Component</span> <span class="n">comp</span><span class="o">,</span> <span class="n">Object</span> <span class="n">constraints</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">getTreeLock</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">GraphicsConfiguration</span> <span class="n">thisGC</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getGraphicsConfiguration</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">&gt;</span> <span class="n">component</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">||</span> <span class="o">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
</span></span><span class="line"><span class="cl">                          <span class="s">&#34;illegal component position&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkAddToSelf</span><span class="o">(</span><span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkNotAWindow</span><span class="o">(</span><span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/* Reparent the component and tidy up the tree&#39;s state. */</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">comp</span><span class="o">.</span><span class="na">parent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">comp</span><span class="o">.</span><span class="na">parent</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">&gt;</span> <span class="n">component</span><span class="o">.</span><span class="na">size</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;illegal component position&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">thisGC</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">comp</span><span class="o">.</span><span class="na">checkGD</span><span class="o">(</span><span class="n">thisGC</span><span class="o">.</span><span class="na">getDevice</span><span class="o">().</span><span class="na">getIDstring</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//index == -1 means add to the end.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">component</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">component</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">comp</span><span class="o">.</span><span class="na">parent</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">comp</span><span class="o">.</span><span class="na">setGraphicsConfiguration</span><span class="o">(</span><span class="n">thisGC</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">adjustListeningChildren</span><span class="o">(</span><span class="n">AWTEvent</span><span class="o">.</span><span class="na">HIERARCHY_EVENT_MASK</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">comp</span><span class="o">.</span><span class="na">numListening</span><span class="o">(</span><span class="n">AWTEvent</span><span class="o">.</span><span class="na">HIERARCHY_EVENT_MASK</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">adjustListeningChildren</span><span class="o">(</span><span class="n">AWTEvent</span><span class="o">.</span><span class="na">HIERARCHY_BOUNDS_EVENT_MASK</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">comp</span><span class="o">.</span><span class="na">numListening</span><span class="o">(</span><span class="n">AWTEvent</span><span class="o">.</span><span class="na">HIERARCHY_BOUNDS_EVENT_MASK</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">            <span class="n">adjustDescendants</span><span class="o">(</span><span class="n">comp</span><span class="o">.</span><span class="na">countHierarchyMembers</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">invalidateIfValid</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">peer</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">comp</span><span class="o">.</span><span class="na">addNotify</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/* Notify the layout manager of the added component. */</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">layoutMgr</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">layoutMgr</span> <span class="k">instanceof</span> <span class="n">LayoutManager2</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="o">((</span><span class="n">LayoutManager2</span><span class="o">)</span><span class="n">layoutMgr</span><span class="o">).</span><span class="na">addLayoutComponent</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="n">constraints</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">constraints</span> <span class="k">instanceof</span> <span class="n">String</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">layoutMgr</span><span class="o">.</span><span class="na">addLayoutComponent</span><span class="o">((</span><span class="n">String</span><span class="o">)</span><span class="n">constraints</span><span class="o">,</span> <span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">containerListener</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">||</span>
</span></span><span class="line"><span class="cl">                <span class="o">(</span><span class="n">eventMask</span> <span class="o">&amp;</span> <span class="n">AWTEvent</span><span class="o">.</span><span class="na">CONTAINER_EVENT_MASK</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">||</span>
</span></span><span class="line"><span class="cl">                <span class="n">Toolkit</span><span class="o">.</span><span class="na">enabledOnToolkit</span><span class="o">(</span><span class="n">AWTEvent</span><span class="o">.</span><span class="na">CONTAINER_EVENT_MASK</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">ContainerEvent</span> <span class="n">e</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ContainerEvent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">ContainerEvent</span><span class="o">.</span><span class="na">COMPONENT_ADDED</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="n">comp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">dispatchEvent</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">comp</span><span class="o">.</span><span class="na">createHierarchyEvents</span><span class="o">(</span><span class="n">HierarchyEvent</span><span class="o">.</span><span class="na">HIERARCHY_CHANGED</span><span class="o">,</span> <span class="n">comp</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                       <span class="k">this</span><span class="o">,</span> <span class="n">HierarchyEvent</span><span class="o">.</span><span class="na">PARENT_CHANGED</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                       <span class="n">Toolkit</span><span class="o">.</span><span class="na">enabledOnToolkit</span><span class="o">(</span><span class="n">AWTEvent</span><span class="o">.</span><span class="na">HIERARCHY_EVENT_MASK</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(</span><span class="n">peer</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">layoutMgr</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">isVisible</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">updateCursorImmediately</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ··å…¥ (mixin) æä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ Vue ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸€ä¸ªæ··å…¥å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">myMixin</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">created</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">hello</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hello from mixin!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ··å…¥å¯¹è±¡çš„ç»„ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">Component</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">myMixin</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">component</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Component</span><span class="p">()</span> <span class="c1">// =&gt; &#34;hello from mixin!&#34;
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="24decorator">2.4.Decorator</h3>
<p><strong>è£…é¥°æ¨¡å¼</strong>æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å…è®¸é€šè¿‡å°†å¯¹è±¡æ”¾å…¥åŒ…å«è¡Œä¸ºçš„ç‰¹æ®Šå°è£…å¯¹è±¡ä¸­æ¥ä¸ºåŸå¯¹è±¡ç»‘å®šæ–°çš„è¡Œä¸ºã€‚</p>
<h4 id="usage-8">Usage</h4>
<ol>
<li>å¦‚æœå¸Œæœ›åœ¨æ— éœ€ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹å³å¯ä½¿ç”¨å¯¹è±¡ï¼Œ ä¸”å¸Œæœ›åœ¨è¿è¡Œæ—¶ä¸ºå¯¹è±¡æ–°å¢é¢å¤–çš„è¡Œä¸ºï¼Œ å¯ä»¥ä½¿ç”¨è£…é¥°æ¨¡å¼ã€‚</li>
<li>å¦‚æœç”¨ç»§æ‰¿æ¥æ‰©å±•å¯¹è±¡è¡Œä¸ºçš„æ–¹æ¡ˆéš¾ä»¥å®ç°æˆ–è€…æ ¹æœ¬ä¸å¯è¡Œï¼Œ å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-8">Advantages</h4>
<ol>
<li>æ— éœ€åˆ›å»ºæ–°å­ç±»å³å¯æ‰©å±•å¯¹è±¡çš„è¡Œä¸ºã€‚</li>
<li>å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤å¯¹è±¡çš„åŠŸèƒ½ã€‚</li>
<li>å¯ä»¥ç”¨å¤šä¸ªè£…é¥°å°è£…å¯¹è±¡æ¥ç»„åˆå‡ ç§è¡Œä¸ºã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯ä»¥å°†å®ç°äº†è®¸å¤šä¸åŒè¡Œä¸ºçš„ä¸€ä¸ªå¤§ç±»æ‹†åˆ†ä¸ºå¤šä¸ªè¾ƒå°çš„ç±»ã€‚</li>
</ol>
<h4 id="disadvantages-8">Disadvantages</h4>
<ol>
<li>åœ¨å°è£…å™¨æ ˆä¸­åˆ é™¤ç‰¹å®šå°è£…å™¨æ¯”è¾ƒå›°éš¾ã€‚</li>
<li>å®ç°è¡Œä¸ºä¸å—è£…é¥°æ ˆé¡ºåºå½±å“çš„è£…é¥°æ¯”è¾ƒå›°éš¾ã€‚</li>
<li>å„å±‚çš„åˆå§‹åŒ–é…ç½®ä»£ç çœ‹ä¸Šå»å¯èƒ½ä¼šå¾ˆç³Ÿç³•ã€‚</li>
</ol>
<h4 id="demo-7">Demo</h4>
<p>java.io.InputStreamã€ OutputStreamã€ Reader å’Œ Writer çš„æ‰€æœ‰ä»£ç éƒ½æœ‰ä»¥è‡ªèº«ç±»å‹çš„å¯¹è±¡ä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°ã€‚
ä¸¤è€…éƒ½ç»§æ‰¿äº†ReaderæŠ½è±¡çˆ¶ç±»ï¼Œéƒ½æœ‰è‡ªå·±çš„readæ–¹æ³•ï¼Œè€Œåœ¨InputStreamReaderä¸­å¼•ç”¨äº†ä¸€ä¸ªStreamDecoderå®ä¾‹å¯¹è±¡ï¼Œè™½ç„¶åœ¨InputStreamReaderä¸­å¹¶æœªå¯¹StreamDecoderçš„readæ–¹æ³•æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œä½†å®ƒå¼•ç”¨StreamDecoderä½¿ç”¨äº†å…³é”®å­—final ï¼Œè®©StreamDecoderä¸å¯å˜ï¼Œä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´å®ƒæ‰©å±•çš„åŠŸèƒ½å°±æ˜¯è®©InputStreamReaderè¯»å–è¾“å…¥æµæ—¶ï¼Œç¼–ç æ ¼å¼ä¸å˜ï¼ŒInputStreamReaderä½œä¸ºä¸€ä¸ªè£…é¥°å™¨è§’è‰²ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// è£…é¥°å™¨å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InputStreamReader</span> <span class="kd">extends</span> <span class="n">Reader</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StreamDecoder</span> <span class="n">sd</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">sd</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StreamDecoder</span> <span class="kd">extends</span> <span class="n">Reader</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">InputStream</span> <span class="n">in</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">read0</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">read0</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Object</span> <span class="n">var1</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">lock</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">synchronized</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">lock</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">haveLeftoverChar</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="o">.</span><span class="na">haveLeftoverChar</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">leftoverChar</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">char</span><span class="o">[]</span> <span class="n">var2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="mi">2</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">var3</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">var2</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">switch</span><span class="o">(</span><span class="n">var3</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="o">-</span><span class="mi">1</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">assert</span> <span class="kc">false</span> <span class="o">:</span> <span class="n">var3</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">leftoverChar</span> <span class="o">=</span> <span class="n">var2</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">haveLeftoverChar</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">var2</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="25facade">2.5.Facade</h3>
<p>å¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ èƒ½ä¸ºç¨‹åºåº“ã€ æ¡†æ¶æˆ–å…¶ä»–å¤æ‚ç±»æä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ã€‚</p>
<h4 id="usage-9">Usage</h4>
<ol>
<li>å¦‚æœéœ€è¦ä¸€ä¸ªæŒ‡å‘å¤æ‚å­ç³»ç»Ÿçš„ç›´æ¥æ¥å£ï¼Œ ä¸”è¯¥æ¥å£çš„åŠŸèƒ½æœ‰é™ï¼Œ åˆ™å¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼ã€‚</li>
<li>å¦‚æœéœ€è¦å°†å­ç³»ç»Ÿç»„ç»‡ä¸ºå¤šå±‚ç»“æ„ï¼Œ å¯ä»¥ä½¿ç”¨å¤–è§‚ã€‚</li>
</ol>
<h4 id="advantages-9">Advantages</h4>
<ol>
<li>å¯ä»¥è®©è‡ªå·±çš„ä»£ç ç‹¬ç«‹äºå¤æ‚å­ç³»ç»Ÿã€‚</li>
</ol>
<h4 id="disadvantages-9">Disadvantages</h4>
<ol>
<li>å¤–è§‚å¯èƒ½æˆä¸ºä¸ç¨‹åºä¸­æ‰€æœ‰ç±»éƒ½è€¦åˆçš„ä¸Šå¸å¯¹è±¡ã€‚</li>
</ol>
<h4 id="demo-8">Demo</h4>
<p>javax.faces.context.FacesContext åœ¨åº•å±‚ä½¿ç”¨äº† LifeCycleã€ViewHandler å’Œ NavigationHandler è¿™å‡ ä¸ªç±»ã€‚ï¼ˆä½†ç»å¤§å¤šæ•°å®¢æˆ·ç«¯ä¸çŸ¥é“ï¼‰
javax.faces.context.ExternalContext åœ¨å†…éƒ¨ä½¿ç”¨äº† ServletContextã€HttpSessionã€ HttpServletRequestã€ HttpServletResponse å’Œå…¶ä»–ä¸€äº›ç±»ã€‚</p>
<p>å¾®æœåŠ¡ä¸­ï¼ŒAPIç½‘å…³çš„è®¾è®¡ä¹Ÿæ˜¯é—¨é¢æ¨¡å¼</p>
<h3 id="26flyweight">2.6.Flyweight</h3>
<p>äº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å®ƒæ‘’å¼ƒäº†åœ¨æ¯ä¸ªå¯¹è±¡ä¸­ä¿å­˜æ‰€æœ‰æ•°æ®çš„æ–¹å¼ï¼Œ é€šè¿‡å…±äº«å¤šä¸ªå¯¹è±¡æ‰€å…±æœ‰çš„ç›¸åŒçŠ¶æ€ï¼Œ è®©èƒ½åœ¨æœ‰é™çš„å†…å­˜å®¹é‡ä¸­è½½å…¥æ›´å¤šå¯¹è±¡ã€‚</p>
<h4 id="usage-10">Usage</h4>
<ol>
<li>ä»…åœ¨ç¨‹åºå¿…é¡»æ”¯æŒå¤§é‡å¯¹è±¡ä¸”æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å®¹é‡æ—¶ä½¿ç”¨äº«å…ƒæ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-10">Advantages</h4>
<ol>
<li>å¦‚æœç¨‹åºä¸­æœ‰å¾ˆå¤šç›¸ä¼¼å¯¹è±¡ï¼Œ é‚£ä¹ˆå°†å¯ä»¥èŠ‚çœå¤§é‡å†…å­˜ã€‚</li>
</ol>
<h4 id="disadvantages-10">Disadvantages</h4>
<ol>
<li>å¯èƒ½éœ€è¦ç‰ºç‰²æ‰§è¡Œé€Ÿåº¦æ¥æ¢å–å†…å­˜ï¼Œ å› ä¸ºä»–äººæ¯æ¬¡è°ƒç”¨äº«å…ƒæ–¹æ³•æ—¶éƒ½éœ€è¦é‡æ–°è®¡ç®—éƒ¨åˆ†æƒ…æ™¯æ•°æ®ã€‚</li>
<li>ä»£ç ä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚ å›¢é˜Ÿä¸­çš„æ–°æˆå‘˜æ€»æ˜¯ä¼šé—®ï¼š  â€œä¸ºä»€ä¹ˆè¦åƒè¿™æ ·æ‹†åˆ†ä¸€ä¸ªå®ä½“çš„çŠ¶æ€ï¼Ÿâ€ã€‚</li>
</ol>
<h4 id="demo-9">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TreeFactory</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">TreeType</span><span class="o">&gt;</span> <span class="n">treeTypes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="n">TreeType</span> <span class="nf">getTreeType</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Color</span> <span class="n">color</span><span class="o">,</span> <span class="n">String</span> <span class="n">otherTreeData</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">TreeType</span> <span class="n">result</span> <span class="o">=</span> <span class="n">treeTypes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeType</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">color</span><span class="o">,</span> <span class="n">otherTreeData</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">treeTypes</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Forest</span> <span class="kd">extends</span> <span class="n">JFrame</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Tree</span><span class="o">&gt;</span> <span class="n">trees</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">plantTree</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Color</span> <span class="n">color</span><span class="o">,</span> <span class="n">String</span> <span class="n">otherTreeData</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">TreeType</span> <span class="n">type</span> <span class="o">=</span> <span class="n">TreeFactory</span><span class="o">.</span><span class="na">getTreeType</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">color</span><span class="o">,</span> <span class="n">otherTreeData</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Tree</span> <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tree</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">trees</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tree</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="n">Graphics</span> <span class="n">graphics</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">Tree</span> <span class="n">tree</span> <span class="o">:</span> <span class="n">trees</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">tree</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="n">graphics</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Integerä¸­ä¹Ÿä½¿ç”¨äº†äº«å…ƒæ¨¡å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//åœ¨-128ï½127ä½¿ç”¨éå¸¸é¢‘ç¹ï¼Œè®¾ç½®IntegerCacheæ¥åŒ…è£…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Integer</span> <span class="kd">extends</span> <span class="n">Number</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="kd">static</span> <span class="n">Integer</span> <span class="nf">valueOf</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">IntegerCache</span><span class="o">.</span><span class="na">low</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">IntegerCache</span><span class="o">.</span><span class="na">high</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">IntegerCache</span><span class="o">.</span><span class="na">cache</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="o">(-</span><span class="n">IntegerCache</span><span class="o">.</span><span class="na">low</span><span class="o">)];</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Integer</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="27proxy">2.7.Proxy</h3>
<p><strong>ä»£ç†æ¨¡å¼</strong>æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ è®©èƒ½å¤Ÿæä¾›å¯¹è±¡çš„æ›¿ä»£å“æˆ–å…¶å ä½ç¬¦ã€‚ ä»£ç†æ§åˆ¶ç€å¯¹äºåŸå¯¹è±¡çš„è®¿é—®ï¼Œ å¹¶å…è®¸åœ¨å°†è¯·æ±‚æäº¤ç»™å¯¹è±¡å‰åè¿›è¡Œä¸€äº›å¤„ç†ã€‚</p>
<h4 id="usage-11">Usage</h4>
<ol>
<li>å»¶è¿Ÿåˆå§‹åŒ– ï¼ˆè™šæ‹Ÿä»£ç†ï¼‰ã€‚ å¦‚æœæœ‰ä¸€ä¸ªå¶å°”ä½¿ç”¨çš„é‡é‡çº§æœåŠ¡å¯¹è±¡ï¼Œ ä¸€ç›´ä¿æŒè¯¥å¯¹è±¡è¿è¡Œä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºæ—¶ï¼Œ å¯ä½¿ç”¨ä»£ç†æ¨¡å¼ã€‚</li>
<li>è®¿é—®æ§åˆ¶ ï¼ˆä¿æŠ¤ä»£ç†ï¼‰ã€‚ å¦‚æœåªå¸Œæœ›ç‰¹å®šå®¢æˆ·ç«¯ä½¿ç”¨æœåŠ¡å¯¹è±¡ï¼Œ è¿™é‡Œçš„å¯¹è±¡å¯ä»¥æ˜¯æ“ä½œç³»ç»Ÿä¸­éå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œ è€Œå®¢æˆ·ç«¯åˆ™æ˜¯å„ç§å·²å¯åŠ¨çš„ç¨‹åº ï¼ˆåŒ…æ‹¬æ¶æ„ç¨‹åºï¼‰ï¼Œ æ­¤æ—¶å¯ä½¿ç”¨ä»£ç†æ¨¡å¼ã€‚</li>
<li>æœ¬åœ°æ‰§è¡Œè¿œç¨‹æœåŠ¡ ï¼ˆè¿œç¨‹ä»£ç†ï¼‰ã€‚ é€‚ç”¨äºæœåŠ¡å¯¹è±¡ä½äºè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æƒ…å½¢ã€‚</li>
<li>è®°å½•æ—¥å¿—è¯·æ±‚ ï¼ˆæ—¥å¿—è®°å½•ä»£ç†ï¼‰ã€‚ é€‚ç”¨äºå½“éœ€è¦ä¿å­˜å¯¹äºæœåŠ¡å¯¹è±¡çš„è¯·æ±‚å†å²è®°å½•æ—¶ã€‚ ä»£ç†å¯ä»¥åœ¨å‘æœåŠ¡ä¼ é€’è¯·æ±‚å‰è¿›è¡Œè®°å½•</li>
<li>æ™ºèƒ½å¼•ç”¨ã€‚ å¯åœ¨æ²¡æœ‰å®¢æˆ·ç«¯ä½¿ç”¨æŸä¸ªé‡é‡çº§å¯¹è±¡æ—¶ç«‹å³é”€æ¯è¯¥å¯¹è±¡ã€‚</li>
</ol>
<h4 id="advantages-11">Advantages</h4>
<ol>
<li>å¯ä»¥åœ¨å®¢æˆ·ç«¯æ¯«æ— å¯Ÿè§‰çš„æƒ…å†µä¸‹æ§åˆ¶æœåŠ¡å¯¹è±¡ã€‚</li>
<li>å¦‚æœå®¢æˆ·ç«¯å¯¹æœåŠ¡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œ å¯ä»¥å¯¹ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†ã€‚</li>
<li>å³ä½¿æœåŠ¡å¯¹è±¡è¿˜æœªå‡†å¤‡å¥½æˆ–ä¸å­˜åœ¨ï¼Œ ä»£ç†ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ å¯ä»¥åœ¨ä¸å¯¹æœåŠ¡æˆ–å®¢æˆ·ç«¯åšå‡ºä¿®æ”¹çš„æƒ…å†µä¸‹åˆ›å»ºæ–°ä»£ç†ã€‚</li>
</ol>
<h4 id="disadvantages-11">Disadvantages</h4>
<ol>
<li>ä»£ç å¯èƒ½ä¼šå˜å¾—å¤æ‚ï¼Œ å› ä¸ºéœ€è¦æ–°å»ºè®¸å¤šç±»ã€‚</li>
<li>æœåŠ¡å“åº”å¯èƒ½ä¼šå»¶è¿Ÿã€‚</li>
</ol>
<h4 id="demo-10">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//javax.ejb.EJB 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceProxy</span> <span class="kd">extends</span> <span class="n">UserService</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">User</span> <span class="nf">find</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">UserService</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">getAnAvailableInstanceFromPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">User</span> <span class="n">result</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">releaseInstanceToPool</span><span class="o">(</span><span class="n">instance</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">save</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">UserService</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">getAnAvailableInstanceFromPool</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Long</span> <span class="n">result</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">releaseInstanceToPool</span><span class="o">(</span><span class="n">instance</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨MVCæ¨¡å¼ä¸­ï¼Œä¹Ÿå¤§é‡ä½¿ç”¨ä»£ç†æ¨¡å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">SomeServiceImpl</span> <span class="kd">implements</span> <span class="n">SomeService</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@AutoWired</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">SomeService</span> <span class="n">someService</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doSome</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">someService</span><span class="o">.</span><span class="na">doSome</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-behavioral-patterns">3. Behavioral Patterns</h2>
<h3 id="31chain-of-responsibility">3.1.Chain of Responsibility</h3>
<p>è´£ä»»é“¾æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸å°†è¯·æ±‚æ²¿ç€å¤„ç†è€…é“¾è¿›è¡Œå‘é€ã€‚ æ”¶åˆ°è¯·æ±‚åï¼Œ æ¯ä¸ªå¤„ç†è€…å‡å¯å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œ æˆ–å°†å…¶ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸ªå¤„ç†è€…ã€‚</p>
<h4 id="usage-12">Usage</h4>
<ol>
<li>å½“ç¨‹åºéœ€è¦ä½¿ç”¨ä¸åŒæ–¹å¼å¤„ç†ä¸åŒç§ç±»è¯·æ±‚ï¼Œ è€Œä¸”è¯·æ±‚ç±»å‹å’Œé¡ºåºé¢„å…ˆæœªçŸ¥æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼ã€‚</li>
<li>å½“å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ªå¤„ç†è€…æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
<li>å¦‚æœæ‰€éœ€å¤„ç†è€…åŠå…¶é¡ºåºå¿…é¡»åœ¨è¿è¡Œæ—¶è¿›è¡Œæ”¹å˜ï¼Œ å¯ä»¥ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-12">Advantages</h4>
<ol>
<li>å¯ä»¥æ§åˆ¶è¯·æ±‚å¤„ç†çš„é¡ºåºã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯å¯¹å‘èµ·æ“ä½œå’Œæ‰§è¡Œæ“ä½œçš„ç±»è¿›è¡Œè§£è€¦ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ å¯ä»¥åœ¨ä¸æ›´æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ–°å¢å¤„ç†è€…ã€‚</li>
</ol>
<h4 id="disadvantages-12">Disadvantages</h4>
<ol>
<li>éƒ¨åˆ†è¯·æ±‚å¯èƒ½æœªè¢«å¤„ç†ã€‚</li>
</ol>
<h4 id="demo-11">Demo</h4>
<p>ä¸ºç³»ç»Ÿorç»„ä»¶è®°å½•æ—¥å¿—æ¶ˆæ¯ã€‚å¦‚ä½•ä½“ç°äº†èŒè´£é“¾æ¨¡å¼ï¼šæ¯ä¸ªè®°å½•å™¨éƒ½è·Ÿè¸ªâ€œçˆ¶â€è®°å½•å™¨ï¼Œæ‰€è°“â€çˆ¶â€è®°å½•å™¨ï¼Œå°±æ˜¯Loggerå‘½åç©ºé—´ä¸­æœ€è¿‘çš„ç°æœ‰ç¥–å…ˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Logger</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="n">LogRecord</span> <span class="n">record</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(!</span><span class="n">isLoggable</span><span class="o">(</span><span class="n">record</span><span class="o">.</span><span class="na">getLevel</span><span class="o">()))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">Filter</span> <span class="n">theFilter</span> <span class="o">=</span> <span class="n">filter</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">theFilter</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">theFilter</span><span class="o">.</span><span class="na">isLoggable</span><span class="o">(</span><span class="n">record</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Post the LogRecord to all our Handlers, and then to
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// our parents&#39; handlers, all the way up the tree.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="o">(</span><span class="n">logger</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="n">Handler</span><span class="o">[]</span> <span class="n">loggerHandlers</span> <span class="o">=</span> <span class="n">isSystemLogger</span>
</span></span><span class="line"><span class="cl">                <span class="o">?</span> <span class="n">logger</span><span class="o">.</span><span class="na">accessCheckedHandlers</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">                <span class="o">:</span> <span class="n">logger</span><span class="o">.</span><span class="na">getHandlers</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// è´£ä»»é“¾æ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="c1">//æ¯ä¸ªæ—¥å¿—è®°å½•éƒ½ä¼ é€’ç»™åˆ†é…ç»™ç»™å®šè®°å½•å™¨çš„æ¯ä¸ªHandlerï¼Œå¦‚æœuseParentHandlersæ˜¯trueï¼Œåˆ™å°†ç›¸åŒçš„ç®—æ³•ä¸€ç›´åº”ç”¨äºçˆ¶çº§ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">for</span> <span class="o">(</span><span class="n">Handler</span> <span class="n">handler</span> <span class="o">:</span> <span class="n">loggerHandlers</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">handler</span><span class="o">.</span><span class="na">publish</span><span class="o">(</span><span class="n">record</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">useParentHdls</span> <span class="o">=</span> <span class="n">isSystemLogger</span>
</span></span><span class="line"><span class="cl">                <span class="o">?</span> <span class="n">logger</span><span class="o">.</span><span class="na">useParentHandlers</span>
</span></span><span class="line"><span class="cl">                <span class="o">:</span> <span class="n">logger</span><span class="o">.</span><span class="na">getUseParentHandlers</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(!</span><span class="n">useParentHdls</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">logger</span> <span class="o">=</span> <span class="n">isSystemLogger</span> <span class="o">?</span> <span class="n">logger</span><span class="o">.</span><span class="na">parent</span> <span class="o">:</span> <span class="n">logger</span><span class="o">.</span><span class="na">getParent</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ javax.servlet.Filter#doFilter() ä¹Ÿæœ‰ä½¿ç”¨</p>
<h3 id="32command">3.2.Command</h3>
<p><strong>å‘½ä»¤æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å®ƒå¯å°†è¯·æ±‚è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«ä¸è¯·æ±‚ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯çš„ç‹¬ç«‹å¯¹è±¡ã€‚ è¯¥è½¬æ¢è®©èƒ½æ ¹æ®ä¸åŒçš„è¯·æ±‚å°†æ–¹æ³•å‚æ•°åŒ–ã€ å»¶è¿Ÿè¯·æ±‚æ‰§è¡Œæˆ–å°†å…¶æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œ ä¸”èƒ½å®ç°å¯æ’¤é”€æ“ä½œã€‚</p>
<h4 id="usage-13">Usage</h4>
<ol>
<li>å¦‚æœéœ€è¦é€šè¿‡æ“ä½œæ¥å‚æ•°åŒ–å¯¹è±¡ï¼Œ å¯ä½¿ç”¨å‘½ä»¤æ¨¡å¼ã€‚</li>
<li>å¦‚æœæƒ³è¦å°†æ“ä½œæ”¾å…¥é˜Ÿåˆ—ä¸­ã€ æ“ä½œçš„æ‰§è¡Œæˆ–è€…è¿œç¨‹æ‰§è¡Œæ“ä½œï¼Œ å¯ä½¿ç”¨å‘½ä»¤æ¨¡å¼ã€‚</li>
<li>å¦‚æœæƒ³è¦å®ç°æ“ä½œå›æ»šåŠŸèƒ½ï¼Œ å¯ä½¿ç”¨å‘½ä»¤æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-13">Advantages</h4>
<ol>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯ä»¥è§£è€¦è§¦å‘å’Œæ‰§è¡Œæ“ä½œçš„ç±»ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ å¯ä»¥åœ¨ä¸ä¿®æ”¹å·²æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­åˆ›å»ºæ–°çš„å‘½ä»¤ã€‚</li>
<li>å¯ä»¥å®ç°æ’¤é”€å’Œæ¢å¤åŠŸèƒ½ã€‚</li>
<li>å¯ä»¥å®ç°æ“ä½œçš„å»¶è¿Ÿæ‰§è¡Œã€‚</li>
<li>å¯ä»¥å°†ä¸€ç»„ç®€å•å‘½ä»¤ç»„åˆæˆä¸€ä¸ªå¤æ‚å‘½ä»¤ã€‚</li>
</ol>
<h4 id="disadvantages-13">Disadvantages</h4>
<ol>
<li>ä»£ç å¯èƒ½ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œ å› ä¸ºåœ¨å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´å¢åŠ äº†ä¸€ä¸ªå…¨æ–°çš„å±‚æ¬¡ã€‚</li>
</ol>
<h4 id="demo-12">Demo</h4>
<p>Runnableæ‹…å½“å‘½ä»¤çš„è§’è‰²ï¼ŒThreadå……å½“çš„æ˜¯è°ƒç”¨è€…ï¼Œstartæ–¹æ³•å°±æ˜¯å…¶æ‰§è¡Œæ–¹æ³•ã€‚</p>
<p>é€šè¿‡å®ç°Runableæ¥å£çš„ç±»ï¼Œå°†è¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€æ“ä½œã€‚å…è®¸æ¥å—è¯·æ±‚çš„ä¸€æ–¹å†³å®šæ˜¯å¦è¦å¦å†³è¯·æ±‚ï¼Œæœ€é‡è¦ä¸€ç‚¹å°±æ˜¯ï¼šå‘½ä»¤æ¨¡å¼æŠŠè¯·æ±‚ä¸€ä¸ªæ“ä½œçš„å¯¹è±¡å’Œæ€ä¹ˆæ‰§è¡Œä¸€ä¸ªæ“ä½œçš„å¯¹è±¡è§£è€¦ã€‚è¿™å°±æ˜¯Excutoræ¡†æ¶æ‰§è¡Œå®ç°Runableæ¥å£ä»»åŠ¡ç±»çš„ä½“ç°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.lang</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">Thread poolsï¼ˆçº¿ç¨‹æ± ï¼‰ é€šå¸¸ä¸€ä¸ªå…¸å‹çš„çº¿ç¨‹æ± å®ç°ç±»å¯èƒ½æœ‰ä¸€ä¸ªåä¸ºaddTask()çš„publicæ–¹æ³•ï¼Œç”¨æ¥æ·»åŠ ä¸€é¡¹å·¥ä½œä»»åŠ¡åˆ°ä»»åŠ¡ é˜Ÿåˆ—ä¸­ã€‚è¯¥ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡å¯ä»¥ç”¨commandå¯¹è±¡æ¥å°è£…ï¼Œé€šå¸¸è¿™äº›commandå¯¹è±¡ä¼šå®ç°ä¸€ä¸ªé€šç”¨çš„æ¥å£æ¯”å¦‚java.lang.Runnableã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="nd">@FunctionalInterface</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Runnable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33iterator">3.3.Iterator</h3>
<p><strong>è¿­ä»£å™¨æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ è®©èƒ½åœ¨ä¸æš´éœ²é›†åˆåº•å±‚è¡¨ç°å½¢å¼ ï¼ˆåˆ—è¡¨ã€ æ ˆå’Œæ ‘ç­‰ï¼‰ çš„æƒ…å†µä¸‹éå†é›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ ã€‚</p>
<h4 id="usage-14">Usage</h4>
<ol>
<li>å½“é›†åˆèƒŒåä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œ ä¸”å¸Œæœ›å¯¹å®¢æˆ·ç«¯éšè—å…¶å¤æ‚æ€§æ—¶ ï¼ˆå‡ºäºä½¿ç”¨ä¾¿åˆ©æ€§æˆ–å®‰å…¨æ€§çš„è€ƒè™‘ï¼‰ï¼Œ å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼ã€‚</li>
<li>ä½¿ç”¨è¯¥æ¨¡å¼å¯ä»¥å‡å°‘ç¨‹åºä¸­é‡å¤çš„éå†ä»£ç ã€‚</li>
<li>å¦‚æœå¸Œæœ›ä»£ç èƒ½å¤Ÿéå†ä¸åŒçš„ç”šè‡³æ˜¯æ— æ³•é¢„çŸ¥çš„æ•°æ®ç»“æ„ï¼Œ å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-14">Advantages</h4>
<ol>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ é€šè¿‡å°†ä½“ç§¯åºå¤§çš„éå†ç®—æ³•ä»£ç æŠ½å–ä¸ºç‹¬ç«‹çš„ç±»ï¼Œ å¯å¯¹å®¢æˆ·ç«¯ä»£ç å’Œé›†åˆè¿›è¡Œæ•´ç†ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ å¯å®ç°æ–°å‹çš„é›†åˆå’Œè¿­ä»£å™¨å¹¶å°†å…¶ä¼ é€’ç»™ç°æœ‰ä»£ç ï¼Œ æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</li>
<li>å¯ä»¥å¹¶è¡Œéå†åŒä¸€é›†åˆï¼Œ å› ä¸ºæ¯ä¸ªè¿­ä»£å™¨å¯¹è±¡éƒ½åŒ…å«å…¶è‡ªèº«çš„éå†çŠ¶æ€ã€‚</li>
<li>ç›¸ä¼¼çš„ï¼Œ å¯ä»¥æš‚åœéå†å¹¶åœ¨éœ€è¦æ—¶ç»§ç»­ã€‚</li>
</ol>
<h4 id="disadvantages-14">Disadvantages</h4>
<ol>
<li>å¦‚æœçš„ç¨‹åºåªä¸ç®€å•çš„é›†åˆè¿›è¡Œäº¤äº’ï¼Œ åº”ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šçŸ«æ‰è¿‡æ­£ã€‚</li>
<li>å¯¹äºæŸäº›ç‰¹æ®Šé›†åˆï¼Œ ä½¿ç”¨è¿­ä»£å™¨å¯èƒ½æ¯”ç›´æ¥éå†çš„æ•ˆç‡ä½ã€‚</li>
</ol>
<h4 id="demo-13">Demo</h4>
<p>è®¸å¤šæ¡†æ¶å’Œç¨‹åºåº“éƒ½ä¼šä½¿ç”¨å®ƒæ¥æä¾›éå†å…¶é›†åˆçš„æ ‡å‡†æ–¹å¼ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.util</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.function.Consumer</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Iterator</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">E</span> <span class="nf">next</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">     <span class="k">default</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">throw</span> <span class="k">new</span> <span class="n">UnsupportedOperationException</span><span class="o">(</span><span class="s">&#34;remove&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span> <span class="kt">void</span> <span class="nf">forEachRemaining</span><span class="o">(</span><span class="n">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">action</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">action</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="o">(</span><span class="n">hasNext</span><span class="o">())</span>
</span></span><span class="line"><span class="cl">            <span class="n">action</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">next</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.util</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">boolean</span> <span class="nf">hasMoreElements</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">E</span> <span class="nf">nextElement</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34mediator">3.4.Mediator</h3>
<p><strong>ä¸­ä»‹è€…æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ èƒ½è®©å‡å°‘å¯¹è±¡ä¹‹é—´æ··ä¹±æ— åºçš„ä¾èµ–å…³ç³»ã€‚ è¯¥æ¨¡å¼ä¼šé™åˆ¶å¯¹è±¡ä¹‹é—´çš„ç›´æ¥äº¤äº’ï¼Œ è¿«ä½¿å®ƒä»¬é€šè¿‡ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡è¿›è¡Œåˆä½œã€‚</p>
<h4 id="usage-15">Usage</h4>
<ol>
<li>å½“ä¸€äº›å¯¹è±¡å’Œå…¶ä»–å¯¹è±¡ç´§å¯†è€¦åˆä»¥è‡´éš¾ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹æ—¶ï¼Œ å¯ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ã€‚</li>
<li>å½“ç»„ä»¶å› è¿‡äºä¾èµ–å…¶ä»–ç»„ä»¶è€Œæ— æ³•åœ¨ä¸åŒåº”ç”¨ä¸­å¤ç”¨æ—¶ï¼Œ å¯ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ã€‚</li>
<li>å¦‚æœä¸ºäº†èƒ½åœ¨ä¸åŒæƒ…æ™¯ä¸‹å¤ç”¨ä¸€äº›åŸºæœ¬è¡Œä¸ºï¼Œ å¯¼è‡´éœ€è¦è¢«è¿«åˆ›å»ºå¤§é‡ç»„ä»¶å­ç±»æ—¶ï¼Œ å¯ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-15">Advantages</h4>
<ol>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯ä»¥å°†å¤šä¸ªç»„ä»¶é—´çš„äº¤æµæŠ½å–åˆ°åŒä¸€ä½ç½®ï¼Œ ä½¿å…¶æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ æ— éœ€ä¿®æ”¹å®é™…ç»„ä»¶å°±èƒ½å¢åŠ æ–°çš„ä¸­ä»‹è€…ã€‚</li>
<li>å¯ä»¥å‡è½»åº”ç”¨ä¸­å¤šä¸ªç»„ä»¶é—´çš„è€¦åˆæƒ…å†µã€‚</li>
<li>å¯ä»¥æ›´æ–¹ä¾¿åœ°å¤ç”¨å„ä¸ªç»„ä»¶ã€‚</li>
</ol>
<h4 id="disadvantages-15">Disadvantages</h4>
<ol>
<li>ä¸€æ®µæ—¶é—´åï¼Œ ä¸­ä»‹è€…å¯èƒ½ä¼šæ¼”åŒ–æˆä¸ºä¸Šå¸å¯¹è±¡ã€‚</li>
</ol>
<h4 id="demo-14">Demo</h4>
<p>MVCä¸­çš„Controllerå°±æ˜¯ä¸­ä»‹è€…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.util</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Timer</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">schedule</span><span class="o">(</span><span class="n">TimerTask</span> <span class="n">task</span><span class="o">,</span> <span class="kt">long</span> <span class="n">delay</span><span class="o">,</span> <span class="kt">long</span> <span class="n">period</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">delay</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Negative delay.&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">period</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Non-positive period.&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">sched</span><span class="o">(</span><span class="n">task</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()+</span><span class="n">delay</span><span class="o">,</span> <span class="o">-</span><span class="n">period</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//ä»¥åŠå…¶ä»–scheduleæ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»¥åŠJUCä¸­çš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.util.concurrent</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Executor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">execute</span><span class="o">(</span><span class="n">Runnable</span> <span class="n">command</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸åå°„çš„invoke</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.lang.reflect</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Method</span> <span class="kd">extends</span> <span class="n">Executable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@CallerSensitive</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">invoke</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">,</span> <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">IllegalArgumentException</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">InvocationTargetException</span>
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(!</span><span class="n">override</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="o">(!</span><span class="n">Reflection</span><span class="o">.</span><span class="na">quickCheckMemberAccess</span><span class="o">(</span><span class="n">clazz</span><span class="o">,</span> <span class="n">modifiers</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">caller</span> <span class="o">=</span> <span class="n">Reflection</span><span class="o">.</span><span class="na">getCallerClass</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="n">checkAccess</span><span class="o">(</span><span class="n">caller</span><span class="o">,</span> <span class="n">clazz</span><span class="o">,</span> <span class="n">obj</span><span class="o">,</span> <span class="n">modifiers</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">MethodAccessor</span> <span class="n">ma</span> <span class="o">=</span> <span class="n">methodAccessor</span><span class="o">;</span>             <span class="c1">// read volatile
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">ma</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">ma</span> <span class="o">=</span> <span class="n">acquireMethodAccessor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ma</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">obj</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">package sun.reflect;
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">@Retention(RetentionPolicy.RUNTIME)
</span></span></span><span class="line"><span class="cl"><span class="cm">@Target({METHOD})
</span></span></span><span class="line"><span class="cl"><span class="cm">public @interface CallerSensitive {
</span></span></span><span class="line"><span class="cl"><span class="cm">}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="35snapshot">3.5.Snapshot</h3>
<p><strong>å¤‡å¿˜å½•æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸åœ¨ä¸æš´éœ²å¯¹è±¡å®ç°ç»†èŠ‚çš„æƒ…å†µä¸‹ä¿å­˜å’Œæ¢å¤å¯¹è±¡ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
<h4 id="usage-16">Usage</h4>
<ol>
<li>å½“éœ€è¦åˆ›å»ºå¯¹è±¡çŠ¶æ€å¿«ç…§æ¥æ¢å¤å…¶ä¹‹å‰çš„çŠ¶æ€æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼ã€‚</li>
<li>å½“ç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜å˜é‡ã€ è·å–å™¨æˆ–è®¾ç½®å™¨å°†å¯¼è‡´å°è£…è¢«çªç ´æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-16">Advantages</h4>
<ol>
<li>å¯ä»¥åœ¨ä¸ç ´åå¯¹è±¡å°è£…æƒ…å†µçš„å‰æä¸‹åˆ›å»ºå¯¹è±¡çŠ¶æ€å¿«ç…§ã€‚</li>
<li>å¯ä»¥é€šè¿‡è®©è´Ÿè´£äººç»´æŠ¤åŸå‘å™¨çŠ¶æ€å†å²è®°å½•æ¥ç®€åŒ–åŸå‘å™¨ä»£ç ã€‚</li>
</ol>
<h4 id="disadvantages-16">Disadvantages</h4>
<ol>
<li>å¦‚æœå®¢æˆ·ç«¯è¿‡äºé¢‘ç¹åœ°åˆ›å»ºå¤‡å¿˜å½•ï¼Œ ç¨‹åºå°†æ¶ˆè€—å¤§é‡å†…å­˜ã€‚</li>
<li>è´Ÿè´£äººå¿…é¡»å®Œæ•´è·Ÿè¸ªåŸå‘å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œ è¿™æ ·æ‰èƒ½é”€æ¯å¼ƒç”¨çš„å¤‡å¿˜å½•ã€‚</li>
<li>ç»å¤§éƒ¨åˆ†åŠ¨æ€ç¼–ç¨‹è¯­è¨€ ï¼ˆä¾‹å¦‚ PHPã€ Python å’Œ JavaScriptï¼‰ ä¸èƒ½ç¡®ä¿å¤‡å¿˜å½•ä¸­çš„çŠ¶æ€ä¸è¢«ä¿®æ”¹ã€‚</li>
</ol>
<h4 id="demo-15">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.io</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Serializable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="36observer">3.6.Observer</h3>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸å®šä¹‰ä¸€ç§è®¢é˜…æœºåˆ¶ï¼Œ å¯åœ¨å¯¹è±¡äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥å¤šä¸ª â€œè§‚å¯Ÿâ€ è¯¥å¯¹è±¡çš„å…¶ä»–å¯¹è±¡ã€‚</p>
<h4 id="usage-17">Usage</h4>
<ol>
<li>
<p>å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€çš„æ”¹å˜éœ€è¦æ”¹å˜å…¶ä»–å¯¹è±¡ï¼Œ æˆ–å®é™…å¯¹è±¡æ˜¯äº‹å…ˆæœªçŸ¥çš„æˆ–åŠ¨æ€å˜åŒ–çš„æ—¶ï¼Œ å¯ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
</li>
<li>
<p>å½“åº”ç”¨ä¸­çš„ä¸€äº›å¯¹è±¡å¿…é¡»è§‚å¯Ÿå…¶ä»–å¯¹è±¡æ—¶ï¼Œ å¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚ ä½†ä»…èƒ½åœ¨æœ‰é™æ—¶é—´å†…æˆ–ç‰¹å®šæƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
</li>
</ol>
<h4 id="advantages-17">Advantages</h4>
<ol>
<li>å¼€é—­åŸåˆ™ã€‚ æ— éœ€ä¿®æ”¹å‘å¸ƒè€…ä»£ç å°±èƒ½å¼•å…¥æ–°çš„è®¢é˜…è€…ç±» ï¼ˆå¦‚æœæ˜¯å‘å¸ƒè€…æ¥å£åˆ™å¯è½»æ¾å¼•å…¥å‘å¸ƒè€…ç±»ï¼‰ã€‚</li>
<li>å¯ä»¥åœ¨è¿è¡Œæ—¶å»ºç«‹å¯¹è±¡ä¹‹é—´çš„è”ç³»ã€‚</li>
</ol>
<h4 id="disadvantages-17">Disadvantages</h4>
<ol>
<li>è®¢é˜…è€…çš„é€šçŸ¥é¡ºåºæ˜¯éšæœºçš„ã€‚</li>
</ol>
<h4 id="demo-16">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.util</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">EventListener</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å¹¿æ³›åº”ç”¨äºSwingç»„ä»¶
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨servletä¸­javax.servlet.http.HttpSessionBindingListenerå’Œjavax.servlet.http.HttpSessionAttributeListenerå‡ºç°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// å®‰å“å¼€å‘ä¸­çš„buttonè§‚å¯Ÿè€…æ³¨å†Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">button</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//æ³¨å†Œè§‚å¯Ÿè€…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">button</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//è§‚å¯Ÿè€…å®ç°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">arg0</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="s">&#34;test&#34;</span><span class="o">,</span> <span class="s">&#34;Click button &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="37state">3.7.State</h3>
<p><strong>çŠ¶æ€æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ è®©èƒ½åœ¨ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å˜åŒ–æ—¶æ”¹å˜å…¶è¡Œä¸ºï¼Œ ä½¿å…¶çœ‹ä¸Šå»å°±åƒæ”¹å˜äº†è‡ªèº«æ‰€
å±çš„ç±»ä¸€æ ·ã€‚ï¼ˆæœ‰é™çŠ¶æ€æœºï¼‰</p>
<h4 id="usage-18">Usage</h4>
<ol>
<li>å¦‚æœå¯¹è±¡éœ€è¦æ ¹æ®è‡ªèº«å½“å‰çŠ¶æ€è¿›è¡Œä¸åŒè¡Œä¸ºï¼Œ åŒæ—¶çŠ¶æ€çš„æ•°é‡éå¸¸å¤šä¸”ä¸çŠ¶æ€ç›¸å…³çš„ä»£ç ä¼šé¢‘ç¹å˜æ›´çš„è¯ï¼Œ å¯ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚</li>
<li>å¦‚æœæŸä¸ªç±»éœ€è¦æ ¹æ®æˆå‘˜å˜é‡çš„å½“å‰å€¼æ”¹å˜è‡ªèº«è¡Œä¸ºï¼Œ ä»è€Œéœ€è¦ä½¿ç”¨å¤§é‡çš„æ¡ä»¶è¯­å¥æ—¶ï¼Œ å¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
<li>å½“ç›¸ä¼¼çŠ¶æ€å’ŒåŸºäºæ¡ä»¶çš„çŠ¶æ€æœºè½¬æ¢ä¸­å­˜åœ¨è®¸å¤šé‡å¤ä»£ç æ—¶ï¼Œ å¯ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-18">Advantages</h4>
<ol>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å°†ä¸ç‰¹å®šçŠ¶æ€ç›¸å…³çš„ä»£ç æ”¾åœ¨å•ç‹¬çš„ç±»ä¸­ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ æ— éœ€ä¿®æ”¹å·²æœ‰çŠ¶æ€ç±»å’Œä¸Šä¸‹æ–‡å°±èƒ½å¼•å…¥æ–°çŠ¶æ€ã€‚</li>
<li>é€šè¿‡æ¶ˆé™¤è‡ƒè‚¿çš„çŠ¶æ€æœºæ¡ä»¶è¯­å¥ç®€åŒ–ä¸Šä¸‹æ–‡ä»£ç ã€‚</li>
</ol>
<h4 id="disadvantages-18">Disadvantages</h4>
<ol>
<li>å¦‚æœçŠ¶æ€æœºåªæœ‰å¾ˆå°‘çš„å‡ ä¸ªçŠ¶æ€ï¼Œ æˆ–è€…å¾ˆå°‘å‘ç”Ÿæ”¹å˜ï¼Œ é‚£ä¹ˆåº”ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šæ˜¾å¾—å°é¢˜å¤§ä½œã€‚</li>
</ol>
<h4 id="demo-17">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">javax</span><span class="o">.</span><span class="na">faces</span><span class="o">.</span><span class="na">lifecycle</span><span class="o">.</span><span class="na">LifeCycle</span><span class="err">#</span><span class="n">execute</span><span class="o">()</span>    
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®¡ç®—æœºç½‘ç»œä¸­çš„rdtæ¨¡å‹</p>
<p>åŒ…æ‹¬<a class="link" href="https://pkg.go.dev/github.com/askervin/goresctrl"  target="_blank" rel="noopener"
    >github.com/askervin/goresctrl</a></p>
<h3 id="38strategy">3.8.Strategy</h3>
<p><strong>ç­–ç•¥æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½è®©å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œ å¹¶å°†æ¯ç§ç®—æ³•åˆ†åˆ«æ”¾å…¥ç‹¬ç«‹çš„ç±»ä¸­ï¼Œ ä»¥ä½¿ç®—æ³•çš„å¯¹è±¡èƒ½å¤Ÿç›¸äº’æ›¿æ¢ã€‚</p>
<h4 id="usage-19">Usage</h4>
<ol>
<li>å½“æƒ³ä½¿ç”¨å¯¹è±¡ä¸­å„ç§ä¸åŒçš„ç®—æ³•å˜ä½“ï¼Œ å¹¶å¸Œæœ›èƒ½åœ¨è¿è¡Œæ—¶åˆ‡æ¢ç®—æ³•æ—¶ï¼Œ å¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€‚</li>
<li>å½“æœ‰è®¸å¤šä»…åœ¨æ‰§è¡ŒæŸäº›è¡Œä¸ºæ—¶ç•¥æœ‰ä¸åŒçš„ç›¸ä¼¼ç±»æ—¶ï¼Œ å¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€‚</li>
<li>å¦‚æœç®—æ³•åœ¨ä¸Šä¸‹æ–‡çš„é€»è¾‘ä¸­ä¸æ˜¯ç‰¹åˆ«é‡è¦ï¼Œ ä½¿ç”¨è¯¥æ¨¡å¼èƒ½å°†ç±»çš„ä¸šåŠ¡é€»è¾‘ä¸å…¶ç®—æ³•å®ç°ç»†èŠ‚éš”ç¦»å¼€æ¥ã€‚</li>
<li>å½“ç±»ä¸­ä½¿ç”¨äº†å¤æ‚æ¡ä»¶è¿ç®—ç¬¦ä»¥åœ¨åŒä¸€ç®—æ³•çš„ä¸åŒå˜ä½“ä¸­åˆ‡æ¢æ—¶ï¼Œ å¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
</ol>
<h4 id="advantages-19">Advantages</h4>
<ol>
<li>å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ‡æ¢å¯¹è±¡å†…çš„ç®—æ³•ã€‚</li>
<li>å¯ä»¥å°†ç®—æ³•çš„å®ç°å’Œä½¿ç”¨ç®—æ³•çš„ä»£ç éš”ç¦»å¼€æ¥ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ç»„åˆæ¥ä»£æ›¿ç»§æ‰¿ã€‚</li>
<li>å¼€é—­åŸåˆ™ã€‚ æ— éœ€å¯¹ä¸Šä¸‹æ–‡è¿›è¡Œä¿®æ”¹å°±èƒ½å¤Ÿå¼•å…¥æ–°çš„ç­–ç•¥ã€‚</li>
</ol>
<h4 id="disadvantages-19">Disadvantages</h4>
<ol>
<li>å¦‚æœçš„ç®—æ³•æå°‘å‘ç”Ÿæ”¹å˜ï¼Œ é‚£ä¹ˆæ²¡æœ‰ä»»ä½•ç†ç”±å¼•å…¥æ–°çš„ç±»å’Œæ¥å£ã€‚ ä½¿ç”¨è¯¥æ¨¡å¼åªä¼šè®©ç¨‹åºè¿‡äºå¤æ‚ã€‚</li>
<li>å®¢æˆ·ç«¯å¿…é¡»çŸ¥æ™“ç­–ç•¥é—´çš„ä¸åŒâ€”â€”å®ƒéœ€è¦é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚</li>
<li>è®¸å¤šç°ä»£ç¼–ç¨‹è¯­è¨€æ”¯æŒå‡½æ•°ç±»å‹åŠŸèƒ½ï¼Œ å…è®¸åœ¨ä¸€ç»„åŒ¿åå‡½æ•°ä¸­å®ç°ä¸åŒç‰ˆæœ¬çš„ç®—æ³•ã€‚ è¿™æ ·ï¼Œ ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ–¹å¼å°±å’Œä½¿ç”¨ç­–ç•¥å¯¹è±¡æ—¶å®Œå…¨ç›¸åŒï¼Œ æ— éœ€å€ŸåŠ©é¢å¤–çš„ç±»å’Œæ¥å£æ¥ä¿æŒä»£ç ç®€æ´ã€‚</li>
</ol>
<h4 id="demo-18">Demo</h4>
<p>Lambdaæ–¹æ³•å°±æ˜¯ä»£æ›¿ç­–ç•¥æ¨¡å¼çš„ç®€å•å®ç°
javax.servlet.http.HttpServletï¼š  service()æ–¹æ³•ï¼Œ è¿˜æœ‰æ‰€æœ‰æ¥å— Http.Servlet.Requestå’Œ Http.Servlet.Responseå¯¹è±¡ä½œä¸ºå‚æ•°çš„ doXXX()æ–¹æ³•ã€‚
ä»¥åŠjavax.servlet.Filter#doFilter()</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@FunctionalInterface</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">T</span> <span class="n">o1</span><span class="o">,</span> <span class="n">T</span> <span class="n">o2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Collections</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">list</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="39template-method">3.9.Template Method</h3>
<p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å®ƒåœ¨è¶…ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶ï¼Œ å…è®¸å­ç±»åœ¨ä¸ä¿®æ”¹ç»“æ„çš„æƒ…å†µä¸‹é‡å†™ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚</p>
<h4 id="usage-20">Usage</h4>
<ol>
<li>
<p>å½“åªå¸Œæœ›å®¢æˆ·ç«¯æ‰©å±•æŸä¸ªç‰¹å®šç®—æ³•æ­¥éª¤ï¼Œ è€Œä¸æ˜¯æ•´ä¸ªç®—æ³•æˆ–å…¶ç»“æ„æ—¶ï¼Œ å¯ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚</p>
</li>
<li>
<p>å½“å¤šä¸ªç±»çš„ç®—æ³•é™¤ä¸€äº›ç»†å¾®ä¸åŒä¹‹å¤–å‡ ä¹å®Œå…¨ä¸€æ ·æ—¶ï¼Œ å¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚ ä½†å…¶åæœå°±æ˜¯ï¼Œ åªè¦ç®—æ³•å‘ç”Ÿå˜åŒ–ï¼Œ å°±å¯èƒ½éœ€è¦ä¿®æ”¹æ‰€æœ‰çš„ç±»ã€‚</p>
</li>
</ol>
<h4 id="advantages-20">Advantages</h4>
<ol>
<li>å¯ä»…å…è®¸å®¢æˆ·ç«¯é‡å†™ä¸€ä¸ªå¤§å‹ç®—æ³•ä¸­çš„ç‰¹å®šéƒ¨åˆ†ï¼Œ ä½¿å¾—ç®—æ³•å…¶ä»–éƒ¨åˆ†ä¿®æ”¹å¯¹å…¶æ‰€é€ æˆçš„å½±å“å‡å°ã€‚</li>
<li>å¯å°†é‡å¤ä»£ç æå–åˆ°ä¸€ä¸ªè¶…ç±»ä¸­ã€‚</li>
</ol>
<h4 id="disadvantages-20">Disadvantages</h4>
<ol>
<li>éƒ¨åˆ†å®¢æˆ·ç«¯å¯èƒ½ä¼šå—åˆ°ç®—æ³•æ¡†æ¶çš„é™åˆ¶ã€‚</li>
<li>é€šè¿‡å­ç±»æŠ‘åˆ¶é»˜è®¤æ­¥éª¤å®ç°å¯èƒ½ä¼šå¯¼è‡´è¿åé‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</li>
<li>æ¨¡æ¿æ–¹æ³•ä¸­çš„æ­¥éª¤è¶Šå¤šï¼Œ å…¶ç»´æŠ¤å·¥ä½œå°±å¯èƒ½ä¼šè¶Šå›°éš¾ã€‚</li>
</ol>
<h4 id="demo-19">Demo</h4>
<p>java.io.InputStreamã€ java.io.OutputStreamã€ java.io.Reader å’Œ java.io.Writer çš„æ‰€æœ‰éæŠ½è±¡æ–¹æ³•ã€‚
java.util.AbstractListã€ java.util.AbstractSet å’Œ java.util.AbstractMap çš„æ‰€æœ‰éæŠ½è±¡æ–¹æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">AbstractCollection</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">add</span><span class="o">(</span><span class="n">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">add</span><span class="o">(</span><span class="n">size</span><span class="o">(),</span> <span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addAll</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">rangeCheckForAdd</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">boolean</span> <span class="n">modified</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="o">(</span><span class="n">E</span> <span class="n">e</span> <span class="o">:</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">add</span><span class="o">(</span><span class="n">index</span><span class="o">++,</span> <span class="n">e</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">modified</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modified</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">indexOf</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ListIterator</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">listIterator</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">(</span><span class="n">o</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">()==</span><span class="kc">null</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">it</span><span class="o">.</span><span class="na">previousIndex</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">(</span><span class="n">o</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">()))</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">it</span><span class="o">.</span><span class="na">previousIndex</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//  ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="310visitor">3.10.Visitor</h3>
<p><strong>è®¿é—®è€…æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½å°†ç®—æ³•ä¸å…¶æ‰€ä½œç”¨çš„å¯¹è±¡éš”ç¦»å¼€æ¥ã€‚</p>
<h4 id="usage-21">Usage</h4>
<ol>
<li>å¦‚æœéœ€è¦å¯¹ä¸€ä¸ªå¤æ‚å¯¹è±¡ç»“æ„ ï¼ˆä¾‹å¦‚å¯¹è±¡æ ‘ï¼‰ ä¸­çš„æ‰€æœ‰å…ƒç´ æ‰§è¡ŒæŸäº›æ“ä½œï¼Œ å¯ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚</li>
<li>å¯ä½¿ç”¨è®¿é—®è€…æ¨¡å¼æ¥æ¸…ç†è¾…åŠ©è¡Œä¸ºçš„ä¸šåŠ¡é€»è¾‘ã€‚</li>
<li>å½“æŸä¸ªè¡Œä¸ºä»…åœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­çš„ä¸€äº›ç±»ä¸­æœ‰æ„ä¹‰ï¼Œ è€Œåœ¨å…¶ä»–ç±»ä¸­æ²¡æœ‰æ„ä¹‰æ—¶ï¼Œ å¯ä½¿ç”¨è¯¥æ¨¡å¼ã€‚</li>
</ol>
<h4 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h4>
<ol>
<li>å¼€é—­åŸåˆ™ã€‚ å¯ä»¥å¼•å…¥åœ¨ä¸åŒç±»å¯¹è±¡ä¸Šæ‰§è¡Œçš„æ–°è¡Œä¸ºï¼Œ ä¸”æ— éœ€å¯¹è¿™äº›ç±»åšå‡ºä¿®æ”¹ã€‚</li>
<li>å•ä¸€èŒè´£åŸåˆ™ã€‚ å¯å°†åŒä¸€è¡Œä¸ºçš„ä¸åŒç‰ˆæœ¬ç§»åˆ°åŒä¸€ä¸ªç±»ä¸­ã€‚</li>
<li>è®¿é—®è€…å¯¹è±¡å¯ä»¥åœ¨ä¸å„ç§å¯¹è±¡äº¤äº’æ—¶æ”¶é›†ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚ å½“æƒ³è¦éå†ä¸€äº›å¤æ‚çš„å¯¹è±¡ç»“æ„ ï¼ˆä¾‹å¦‚å¯¹è±¡æ ‘ï¼‰ï¼Œ å¹¶åœ¨ç»“æ„ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šåº”ç”¨è®¿é—®è€…æ—¶ï¼Œ è¿™äº›ä¿¡æ¯å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</li>
</ol>
<h4 id="disadvantages-21">Disadvantages</h4>
<ol>
<li>æ¯æ¬¡åœ¨å…ƒç´ å±‚æ¬¡ç»“æ„ä¸­æ·»åŠ æˆ–ç§»é™¤ä¸€ä¸ªç±»æ—¶ï¼Œ éƒ½è¦æ›´æ–°æ‰€æœ‰çš„è®¿é—®è€…ã€‚</li>
<li>åœ¨è®¿é—®è€…åŒæŸä¸ªå…ƒç´ è¿›è¡Œäº¤äº’æ—¶ï¼Œ å®ƒä»¬å¯èƒ½æ²¡æœ‰è®¿é—®å…ƒç´ ç§æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•çš„å¿…è¦æƒé™ã€‚</li>
</ol>
<h4 id="demo-20">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">java.nio.file</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.nio.file.attribute.BasicFileAttributes</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">FileVisitor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FileVisitResult</span> <span class="nf">preVisitDirectory</span><span class="o">(</span><span class="n">T</span> <span class="n">dir</span><span class="o">,</span> <span class="n">BasicFileAttributes</span> <span class="n">attrs</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FileVisitResult</span> <span class="nf">visitFile</span><span class="o">(</span><span class="n">T</span> <span class="n">file</span><span class="o">,</span> <span class="n">BasicFileAttributes</span> <span class="n">attrs</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FileVisitResult</span> <span class="nf">visitFileFailed</span><span class="o">(</span><span class="n">T</span> <span class="n">file</span><span class="o">,</span> <span class="n">IOException</span> <span class="n">exc</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FileVisitResult</span> <span class="nf">postVisitDirectory</span><span class="o">(</span><span class="n">T</span> <span class="n">dir</span><span class="o">,</span> <span class="n">IOException</span> <span class="n">exc</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="311interpreter">3.11.Interpreter</h3>
<p>è§£é‡Šå™¨æ¨¡å¼ç”¨äºå¯¹äºä¸€äº›å›ºå®šæ–‡æ³•æ„å»ºä¸€ä¸ªè§£é‡Šå¥å­çš„è§£é‡Šå™¨ã€‚</p>
<h4 id="usage-22">Usage</h4>
<p>å¦‚æœä¸€ç§ç‰¹å®šç±»å‹çš„é—®é¢˜å‘ç”Ÿçš„é¢‘ç‡è¶³å¤Ÿé«˜ï¼Œé‚£ä¹ˆå¯èƒ½å°±å€¼å¾—å°†è¯¥é—®é¢˜çš„å„ä¸ªå®ä¾‹è¡¨è¿°ä¸ºä¸€ä¸ªç®€å•è¯­è¨€ä¸­çš„å¥å­ã€‚è¿™æ ·å°±å¯ä»¥æ„å»ºä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨é€šè¿‡è§£é‡Šè¿™äº›å¥å­æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p>
<h4 id="advantages-21">Advantages</h4>
<ol>
<li>
<p>å¯æ‰©å±•æ€§æ¯”è¾ƒå¥½ï¼Œçµæ´»ã€‚</p>
</li>
<li>
<p>å¢åŠ äº†æ–°çš„è§£é‡Šè¡¨è¾¾å¼çš„æ–¹å¼ã€‚</p>
</li>
<li>
<p>æ˜“äºå®ç°ç®€å•æ–‡æ³•ã€‚</p>
</li>
</ol>
<h4 id="disadvantages-22">Disadvantages</h4>
<ol>
<li>å¯åˆ©ç”¨åœºæ™¯æ¯”è¾ƒå°‘ã€‚</li>
<li>å¯¹äºå¤æ‚çš„æ–‡æ³•æ¯”è¾ƒéš¾ç»´æŠ¤ã€‚</li>
<li>è§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€ã€‚</li>
</ol>
<h4 id="demo-21">Demo</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Format</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">,</span> <span class="n">Cloneable</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="nf">format</span> <span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">format</span><span class="o">(</span><span class="n">obj</span><span class="o">,</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">(),</span> <span class="k">new</span> <span class="n">FieldPosition</span><span class="o">(</span><span class="mi">0</span><span class="o">)).</span><span class="na">toString</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/design-pattern/">Design Pattern</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span><a class="link" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ml"  target="_blank" rel="noopener"
    >Licensed under CC BY-NC-SA 4.0</a></span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/post/tinysql-implementation/">
        
        
            <div class="article-image">
                <img src="/post/tinysql-implementation/talent-plan.33dc3f0b37bb83dcd906eff5abe55703_hub37bed894517c8c0c46efedb5ba1232d_43996_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post TinySQL Implementation"
                        
                        data-hash="md5-M9w/Cze7g9zZBu/1q&#43;VXAw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">TinySQL Implementation</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/amend-hugo-theme-even/">
        
        
            <div class="article-image">
                <img src="/post/amend-hugo-theme-even/even.4f6389121e44efa6027f8bad46d9b2d8_hu7239b18983faa84c364ba0614e368fc1_33946_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Amend Hugo Theme Even"
                        
                        data-hash="md5-T2OJEh5E76YCf4utRtmy2A==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Amend Hugo Theme Even</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/about-computer-science/">
        
        
            <div class="article-image">
                <img src="/post/about-computer-science/force.b6e88110a0b67218a7eb8b2eb0832df5_hu2f7a4f0d3aab2fb44bd6811e98148674_312962_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post About Computer Science"
                        
                        data-hash="md5-tuiBEKC2chin64susIMt9Q==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">About Computer Science</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/compilers/">
        
        
            <div class="article-image">
                <img src="/post/compilers/Compilers.721e3e2c562aaf9810a16b67966bddd7_hu8c64e4fc292413cef039e3f7a5ec8a84_74016_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Compilers"
                        
                        data-hash="md5-ch4&#43;LFYqr5gQoWtnlmvd1w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Compilers</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/software-engineering/">
        
        
            <div class="article-image">
                <img src="/post/software-engineering/software-engineering.d9bfa54db195d8c3d921972d913baf79_huc3bea844a9f5997f5ab40a733b4abf51_95434_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Software Engineering"
                        
                        data-hash="md5-2b&#43;lTbGV2MPZIZctkTuveQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Software Engineering</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="Chasing1020/Chasing1020.github.io"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2019 - 
        
        2023 Chasing&#39;s blog
    </section>
    
    <section class="powerby">
        
            I just want a peaceful life without troubles <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CDYPFNXQDZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CDYPFNXQDZ');
</script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>


    </body>
</html>

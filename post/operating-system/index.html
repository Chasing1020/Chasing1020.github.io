<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='1. Overview ‰ªÄ‰πàÊòØÊìç‰ΩúÁ≥ªÁªüÔºü Á°¨‰ª∂ËßíÂ∫¶Ôºö ÁÆ°ÁêÜÁ°¨‰ª∂ÔºöÂ∞ÜÂ§çÊùÇÁöÑÔºåÂÖ∑Â§á‰∏çÂêåÂäüËÉΩÁöÑÁ°¨‰ª∂ËµÑÊ∫êÁ∫≥ÂÖ•Áªü‰∏ÄÁÆ°ÁêÜ„ÄÇ ÂØπÁ°¨‰ª∂ËøõË°åÊäΩË±°ÔºöÊäΩË±°Êàê‰∏ç‰æùËµñÂÖ∑‰ΩìÁ°¨‰ª∂ÁâπÊÄßÁöÑËµÑÊ∫ê„ÄÇ Â∞ÜÊúâÈôê'>
<meta name="keywords" content="Operating System"><title>Operating System</title>

<link rel='canonical' href='https://chasing1020.github.io/post/operating-system/'>

<link rel="stylesheet" href="/scss/style.min.71b2e8ba9ba59cca46e85c7a30a11e2d9830093a9f59f439743d2d8153e5460c.css"><meta property='og:title' content='Operating System'>
<meta property='og:description' content='1. Overview ‰ªÄ‰πàÊòØÊìç‰ΩúÁ≥ªÁªüÔºü Á°¨‰ª∂ËßíÂ∫¶Ôºö ÁÆ°ÁêÜÁ°¨‰ª∂ÔºöÂ∞ÜÂ§çÊùÇÁöÑÔºåÂÖ∑Â§á‰∏çÂêåÂäüËÉΩÁöÑÁ°¨‰ª∂ËµÑÊ∫êÁ∫≥ÂÖ•Áªü‰∏ÄÁÆ°ÁêÜ„ÄÇ ÂØπÁ°¨‰ª∂ËøõË°åÊäΩË±°ÔºöÊäΩË±°Êàê‰∏ç‰æùËµñÂÖ∑‰ΩìÁ°¨‰ª∂ÁâπÊÄßÁöÑËµÑÊ∫ê„ÄÇ Â∞ÜÊúâÈôê'>
<meta property='og:url' content='https://chasing1020.github.io/post/operating-system/'>
<meta property='og:site_name' content='Chasing&#39;s blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Operating System' /><meta property='article:published_time' content='2021-11-12T19:33:04&#43;08:00'/><meta property='article:modified_time' content='2021-11-12T19:33:04&#43;08:00'/><meta property='og:image' content='https://chasing1020.github.io/post/operating-system/unix.webp' />
<meta name="twitter:site" content="@Chasing1020">
    <meta name="twitter:creator" content="@Chasing1020"><meta name="twitter:title" content="Operating System">
<meta name="twitter:description" content="1. Overview ‰ªÄ‰πàÊòØÊìç‰ΩúÁ≥ªÁªüÔºü Á°¨‰ª∂ËßíÂ∫¶Ôºö ÁÆ°ÁêÜÁ°¨‰ª∂ÔºöÂ∞ÜÂ§çÊùÇÁöÑÔºåÂÖ∑Â§á‰∏çÂêåÂäüËÉΩÁöÑÁ°¨‰ª∂ËµÑÊ∫êÁ∫≥ÂÖ•Áªü‰∏ÄÁÆ°ÁêÜ„ÄÇ ÂØπÁ°¨‰ª∂ËøõË°åÊäΩË±°ÔºöÊäΩË±°Êàê‰∏ç‰æùËµñÂÖ∑‰ΩìÁ°¨‰ª∂ÁâπÊÄßÁöÑËµÑÊ∫ê„ÄÇ Â∞ÜÊúâÈôê"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://chasing1020.github.io/post/operating-system/unix.webp' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu95eb581bc5d2486d92921983fc6c7583_36979_300x0_resize_q75_box.jpg" width="300"
                            height="299" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üñ•Ô∏è</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Chasing&#39;s blog</a></h1>
            <h2 class="site-description">
                <a href="https://www.youtube.com/watch?v=_ILsdcs__ME" target="_blank">
                    Why there is a universe?
                </a>
            </h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/Chasing1020'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/Chasing1020'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://t.me/Chasing1020'
                        target="_blank"
                        title="Telegram"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-telegram" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:chasing1020@gmail.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <rect x="3" y="5" width="18" height="14" rx="2" />
  <polyline points="3 7 12 13 21 7" />
</svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='/index.xml'
                        target="_blank"
                        title="RSS"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Friends</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
      
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#1-overview">1. Overview</a></li>
    <li><a href="#2-hardware-infrastructure">2. Hardware Infrastructure</a></li>
    <li><a href="#3-operating-system-architecture">3. Operating System Architecture</a></li>
    <li><a href="#4-memory-management">4. Memory Management</a>
      <ul>
        <li><a href="#41-paging">4.1. Paging</a></li>
        <li><a href="#42-strategy">4.2. Strategy</a></li>
        <li><a href="#43-virtual-memory">4.3. Virtual Memory</a></li>
      </ul>
    </li>
    <li><a href="#5-process-and-thread">5. Process and Thread</a>
      <ul>
        <li><a href="#51-process">5.1. Process</a></li>
        <li><a href="#52-thread">5.2. Thread</a></li>
      </ul>
    </li>
    <li><a href="#6-operating-system-scheduling">6. Operating System Scheduling</a></li>
    <li><a href="#7-inter-process-communication">7. Inter-Process Communication</a></li>
    <li><a href="#8-synchronization-primitives">8. Synchronization Primitives</a></li>
    <li><a href="#9-file-system">9. File System</a></li>
    <li><a href="#10-device-management">10. Device Management</a></li>
    <li><a href="#11-system-virtualization">11. System Virtualization</a></li>
    <li><a href="#12-multi-core-processor">12. Multi-core processor</a></li>
    <li><a href="#-docker">*. Docker</a>
      <ul>
        <li><a href="#1-namespace">*.1. namespace</a></li>
        <li><a href="#2-cgroups">*.2. cgroups</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/operating-system/">
                <img src="/post/operating-system/unix_hufdf70b6f514bae07260de36dd194916b_17388_800x0_resize_q75_h2_box_2.webp"
                        srcset="/post/operating-system/unix_hufdf70b6f514bae07260de36dd194916b_17388_800x0_resize_q75_h2_box_2.webp 800w, /post/operating-system/unix_hufdf70b6f514bae07260de36dd194916b_17388_1600x0_resize_q75_h2_box_2.webp 1600w"
                        width="800" 
                        height="337" 
                        loading="lazy"
                        alt="Featured image of post Operating System" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/operating-system/">Operating System</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Nov 12, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    28 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="1-overview">1. Overview</h1>
<p>‰ªÄ‰πàÊòØÊìç‰ΩúÁ≥ªÁªüÔºü</p>
<p>Á°¨‰ª∂ËßíÂ∫¶Ôºö</p>
<ul>
<li>
<ol>
<li>ÁÆ°ÁêÜÁ°¨‰ª∂ÔºöÂ∞ÜÂ§çÊùÇÁöÑÔºåÂÖ∑Â§á‰∏çÂêåÂäüËÉΩÁöÑÁ°¨‰ª∂ËµÑÊ∫êÁ∫≥ÂÖ•Áªü‰∏ÄÁÆ°ÁêÜ„ÄÇ</li>
</ol>
</li>
<li>
<ol start="2">
<li>ÂØπÁ°¨‰ª∂ËøõË°åÊäΩË±°ÔºöÊäΩË±°Êàê‰∏ç‰æùËµñÂÖ∑‰ΩìÁ°¨‰ª∂ÁâπÊÄßÁöÑËµÑÊ∫ê„ÄÇ</li>
</ol>
<p>Â∞ÜÊúâÈôêÁöÑÔºåÁ¶ªÊï£ÁöÑËµÑÊ∫êÈ´òÊïàÂú∞ÊäΩË±°ÊàêÊó†ÈôêÁöÑ„ÄÅËøûÁª≠ÁöÑËµÑÊ∫êÔºåÂπ∂Êèê‰∫§Êé•Âè£Áªô‰∏äÂ±ÇÁ≥ªÁªüË∞ÉÁî®„ÄÇ</p>
</li>
</ul>
<p>Â∫îÁî®ËßíÂ∫¶Ôºö</p>
<ul>
<li>
<ol>
<li>ÊúçÂä°‰∫éÂ∫îÁî®ÔºöÊèê‰æõ‰∏çÂêåÂ±ÇÊ¨°Ôºå‰∏çÂêåÂäüËÉΩÁöÑÊé•Âè£‰ª•Êª°Ë∂≥Â∫îÁî®ÈúÄÊ±Ç</li>
</ol>
</li>
<li>
<ol start="2">
<li>ÁÆ°ÁêÜÂ∫îÁî®ÔºöË¥üË¥£Â∫îÁî®ÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÔºåÂåÖÊã¨Âä†ËΩΩÔºåÂêØÂä®ÔºåÂàáÊç¢ÔºåË∞ÉÂ∫¶Á≠â„ÄÇ</li>
</ol>
</li>
</ul>
<h1 id="2-hardware-infrastructure">2. Hardware Infrastructure</h1>
<p>ÂÜØËØ∫‰æùÊõºÊû∂ÊûÑÔºö‰∏≠Â§ÆÂ§ÑÁêÜÂçïÂÖÉÔºåÂ≠òÂÇ®Âô®ÔºåËæìÂÖ•ËæìÂá∫„ÄÇ</p>
<p>ÁºìÂ≠òÁªìÊûÑÔºöCPUÁºìÂ≠òÊòØÁî±Ëã•Âπ≤‰∏™ÁºìÂ≠òË°åÂÜ≥ÂÆöÁöÑÔºåÊØè‰∏™ÁºìÂ≠òË°åÂåÖÊã¨‰∏Ä‰∏™ÊúâÊïà‰ΩçÔºàvalid bitÔºâÔºå‰∏Ä‰∏™Ê†áËÆ∞Âú∞ÂùÄÔºàtag addressÔºâ„ÄÇÁâ©ÁêÜÂú∞ÂùÄÂú®ÈÄªËæë‰∏äÂàÜ‰∏∫‰∏âÊÆµ„ÄÇTag„ÄÅIndex(Set)„ÄÅWay„ÄÇÁâ©ÁêÜÂú∞ÂùÄËÉΩË°®Á§∫Index(Set)ÁöÑÊúÄÂ§ßÊï∞ÁõÆ‰∏∫ÁªÑÔºåÊîØÊåÅTagÊúÄÂ§ßÁöÑÊï∞ÁõÆ‰∏∫Ë∑ØÔºàWayÔºâ„ÄÇ</p>
<p>Áâ©ÁêÜÂú∞ÂùÄÁªìÊûÑÔºöTagÔºàÁâ©ÁêÜÂú∞ÂùÄÔºâ+ SetÔºàÁªÑÂè∑Ôºâ+ OffSetÔºàÁªÑÂÜÖÂÅèÁßªÔºâ</p>
<p>Áõ¥Êé•Êò†Â∞ÑÔºöÂÜÖÂ≠ò‰∏éCPUÁöÑCacheLineÁõ∏ÂØπ‰ΩçÁΩÆÂõ∫ÂÆöÔºåÂØºËá¥Ê∑òÊ±∞Êç¢Âá∫È¢ëÁπÅ„ÄÇ</p>
<p>ÂÖ®Áõ∏ËÅîÊò†Â∞ÑÔºöÁÅµÊ¥ªÔºåÁîµË∑ØËÆæËÆ°Âõ∞ÈöæÔºåÂè™ÈÄÇÂêàÂ∞èÂÆπÈáèCache„ÄÇ</p>
<p>ÁªÑÁõ∏ËÅîÊò†Â∞ÑÔºöCPUÂíå‰∏ªÂ≠òÈÉΩÂàÜÁªÑÔºåÂêåÁªÑÁöÑÁºìÂ≠òË°åÊï∞ÈáèÁß∞‰∏∫Ë∑ØÔºåÁªÑÂÜÖÈááÁî®Áõ¥Êé•Êò†Â∞ÑÔºåÁªÑÈó¥ÈááÁî®ÂÖ®Áõ∏ËÅîÊò†Â∞Ñ„ÄÇ</p>
<p>CPUËÆøÈóÆËÆæÂ§áÁöÑÊñπÂºèÔºöÂÜÖÂ≠òÊò†Â∞ÑËæìÂÖ•ËæìÂá∫ÔºàMemory-Mapped I/OÔºâÔºåÂ∞ÜIOËÆæÂ§áÂíåÁâ©ÁêÜÂÜÖÂ≠òÊîæÂà∞Âêå‰∏Ä‰∏™Â≠òÂÇ®Á©∫Èó¥„ÄÇ</p>
<p>Â¶ÇÊûúCPUÈÄöËøá‰∏çÊñ≠ËΩÆËØ¢ÔºåÊü•ÁúãMMIOÊòØÂê¶ÊúâËæìÂÖ•ÊïàÁéá‰ºöÂæà‰ΩéÔºåÊâÄ‰ª•Êõ¥È´òÊïàÁöÑÂÅöÊ≥ïÊòØÂà©Áî®‰∏≠Êñ≠Ôºå‰∏ªÂä®ÈÄöÁü•CPU„ÄÇ</p>
<h1 id="3-operating-system-architecture">3. Operating System Architecture</h1>
<p>ËÆæËÆ°‰∏äÔºåÁ≠ñÁï•ÔºàPolicyÔºå‚ÄúË¶ÅÂÅö‰ªÄ‰πà‚ÄùÔºâÂíåÊú∫Âà∂ÔºàMechanismÔºå‚ÄúÊÄé‰πàÂÅö‚ÄùÔºâÈöîÁ¶ª„ÄÇ</p>
<p>ÂÜÖÊ†∏Êû∂ÊûÑ</p>
<ol>
<li>
<p>ÁÆÄË¶ÅÁªìÊûÑÔºö‰ª•DOSÂÖ∏ÂûãÔºåÊ≤°ÊúâÁé∞‰ª£ÊÑè‰πâÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÂçïÂÖÉÔºàMemory Management UnitÔºåMMUÔºâ</p>
</li>
<li>
<p>ÂÆèÂÜÖÊ†∏Êû∂ÊûÑÔºàMonolithic KernelÔºâÔºöÂèàÁß∞ÂçïÂÜÖÊ†∏ÔºåÁé∞‰ª£UnixÔºåLinuxÔºåWindowsÈÉΩÈááÁî®ÂÆèÂÜÖÊ†∏„ÄÇ</p>
<ul>
<li>Ê®°ÂùóÂåñÔºàmodularityÔºâÔºö‰ΩøÁî®ÂèØÂä†ËΩΩÂÜÖÊ†∏Ê®°ÂùóÔºàLoadable Kernel ModuleÔºâÊú∫Âà∂Ôºå‰ΩøÂÜÖÊ†∏‰∏éÂÖ∂‰ªñÊ®°ÂùóÔºàÂ¶ÇÈ©±Âä®ÔºâËß£ËÄ¶„ÄÇ</li>
<li>ÊäΩË±°ÔºàabstractionÔºâÔºöÈááÁî®‚ÄúEverything is a file‚ÄùÊÄùÊÉ≥Ôºå‰∏∫‰∏äÂ±ÇÂ∫îÁî®Êèê‰æõÁªü‰∏ÄÊé•Âè£ÔºåÈôç‰ΩéÂ§çÊùÇÊÄßÔºåÂ¢ûÂº∫Áª¥Êä§ÊÄß„ÄÇ</li>
<li>ÂàÜÂ±ÇÔºàlayeringÔºâÔºöDijkstraÊèêÂá∫ÁöÑ‚ÄúTHE‚ÄùÊìç‰ΩúÁ≥ªÁªüÔºåÂàÜ‰∏∫6Â±ÇÔºåÊõ¥Â•ΩÂú∞ÁªÑÁªáÂêÑÁßçÂäüËÉΩ„ÄÇ</li>
<li>Â±ÇÁ∫ßÔºàhierarchyÔºâÔºöÂ∫îÁî®‰∫éËµÑÊ∫êÁÆ°ÁêÜÔºåÂ¶ÇË∞ÉÂ∫¶ÁÆóÊ≥ï‰ºòÂÖàÁ∫ßÂàÜÁ±ªÔºåÊéßÂà∂ÁªÑÔºàcgroupÔºâÂàÜÁ±ª„ÄÇ</li>
</ul>
</li>
<li>
<p>ÂæÆÂÜÖÊ†∏Êû∂ÊûÑÔºö‰ª•Mach‰∏∫‰ª£Ë°®ÔºåÂ∞ÜÂçï‰∏™ÂäüËÉΩÊàñÊ®°Âùó‰ªéÂÜÖÊ†∏‰∏≠ÊãÜÂàÜÂá∫Êù•ÔºåÊèêÈ´òÂÆâÂÖ®ÊÄß„ÄÇÁî±‰∫éMachÂØπIPCËÆæËÆ°Ëøá‰∫éÈÄöÁî®Ôºå‰ª•Ëá≥‰∫éËá™Ë∫´ËµÑÊ∫êÂç†Áî®ËøáÂ§ßÔºåÊïàÁéáÂπ∂‰∏çÂèäÂêåÊúüÁöÑÂÆèÂÜÖÊ†∏„ÄÇ‰ΩÜÊòØÂæÆÂÜÖÊ†∏ÂÖ∑ÊúâÂºπÊÄßÊãìÂ±ïÁöÑËÉΩÂäõÔºåÁ°¨‰ª∂ÂºÇÊûÑÔºåÂπ∂‰∏îÂÖ∑ÊúâÂäüËÉΩÂÆâÂÖ®‰∏é‰ø°ÊÅØÂÆâÂÖ®ÔºåÂπ∂‰∏îË∞ÉÁî®ÂÖ∑ÊúâÁ°ÆÂÆöÁöÑÊó∂Âª∂„ÄÇ</p>
</li>
<li>
<p>Â§ñÊ†∏Êû∂ÊûÑÔºöÂ∫ìÊìç‰ΩúÁ≥ªÁªüLibOSÔºåÂèØ‰ª•ÊåâÁÖßÂ∫îÁî®È¢ÜÂüüÁöÑÁâπÁÇπ‰∏éÈúÄÊ±ÇÔºåÂÆâË£ÖÊúÄÈÄÇÂêàÁöÑLibOSÔºåÊúÄÂ∞èÂåñÈùûÂøÖË¶Å‰ª£Á†ÅÔºåÂ§ö‰∏™LibOS‰πãÈó¥ÁöÑÈöîÁ¶ªÂæàÂº∫ÔºåÂÖ∑ÊúâÂæàÂ•ΩÁöÑÂÆâÂÖ®ÊÄß„ÄÇËøòÊúâ‰∫ëËÆ°ÁÆóÁöÑÂÆπÂô®ÔºåÂü∫‰∫éUnikernelÂ∞ÜËôöÊãüÊú∫ÁõëÊéßÂô®‰Ωú‰∏∫ÊîØÊíëUnikernel/LibOSËøêË°åÁöÑÂÜÖÊ†∏„ÄÇ</p>
</li>
</ol>
<p>ÂÖ∂‰ªñÊ°ÜÊû∂ÁªìÊûÑÔºö‰ª•Android‰∏∫‰æãÔºåÂÖ∂ÂåÖÂê´Á°¨‰ª∂ÊäΩË±°Â±ÇÔºåAndroidÂ∫ìÔºåAndroidËøêË°åÁéØÂ¢ÉÔºåAndroidËøêË°åÊ°ÜÊû∂„ÄÇ</p>
<h1 id="4-memory-management">4. Memory Management</h1>
<p>Áé∞‰ª£Êìç‰ΩúÁ≥ªÁªüÈááÁî®ËôöÊãüÂÜÖÂ≠òÔºå‰ª•‰∏ã‰Ωú‰∏∫ËÆæËÆ°ÁõÆÊ†á</p>
<ul>
<li>È´òÊïàÊÄßÔºöËôöÊãüÂÜÖÂ≠òÊ≤°ÊúâÊòéÊòæÊÄßËÉΩÂºÄÈîÄ„ÄÇ</li>
<li>ÂÆâÂÖ®ÊÄßÔºö‰ΩøÂ∫îÁî®‰πãÈó¥ÁöÑÂÜÖÂ≠òÁõ∏‰∫íÈöîÁ¶ª„ÄÇ</li>
<li>ÈÄèÊòéÊÄßÔºöËôöÊãüÂÜÖÂ≠òÊäΩË±°ÂØπÁ®ãÂ∫èÂëòÈÄèÊòé„ÄÇ</li>
</ul>
<p>CPUÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÂçïÂÖÉÔºàMemory Management UnitÔºåMMUÔºâË¥üË¥£ËôöÊãüÂú∞ÂùÄÂà∞Áâ©ÁêÜÂú∞ÂùÄÁöÑËΩ¨Êç¢ÔºåÊ≠§Â§ñÔºåËøòÊúâÂú∞ÂùÄÊóÅË∑ØÁºìÂ≠òÔºàTranslation Lookaside BufferÔºåTLBÔºâ</p>
<p>ÂàÜÊÆµÊú∫Âà∂ÔºöÂ¶ÇÂ∞ÜÂ∫îÁî®ÂàÜÊàê‰ª£Á†ÅÊÆµÔºåÊï∞ÊçÆÊÆµ„ÄÇÊØè‰∏™ÊÆµË°®Ôºå‰Ωú‰∏∫ÊÆµÂÜÖÂú∞ÂùÄ‰∏éÊÆµÂÜÖÂÅèÁßªÊù•Á°ÆÂÆö‰ΩçÁΩÆ„ÄÇÂæàÂÆπÊòì‰∫ßÁîüÂ§ñÈÉ®Á¢éÁâá„ÄÇ</p>
<p>ÂàÜÈ°µÊú∫Âà∂ÔºöÁî®ËôöÊãüÈ°µÂè∑‰∏éÈ°µÂÜÖÂÅèÁßªÈáèÔºåÊåâÂõ∫ÂÆöÂ§ßÂ∞èÁÆ°ÁêÜÔºåÂáèÂ∞ëÂ§ñÈÉ®Á¢éÁâá„ÄÇ</p>
<blockquote>
<p>ËÆøÂ≠òÊ¨°Êï∞Ôºà‰∏ÄËà¨ËÆøÈóÆTLB‰∏çÁÆóËÆøÂ≠òÔºâ</p>
</blockquote>
<p><strong>È°µÂºèÂ≠òÂÇ®</strong>Ôºå2Ê¨°ÔºöÁ¨¨‰∏ÄÊ¨°„ÄÅËÆøÈóÆÂÜÖÂ≠ò‰∏≠ÁöÑÈ°µË°®ÔºåÂà©Áî®ÈÄªËæëÂú∞ÂùÄ‰∏≠ÁöÑÈ°µÂè∑Êü•ÊâæÂà∞È°µÂ∏ßÂè∑Ôºå‰∏éÈÄªËæëÂú∞ÂùÄ‰∏≠ÁöÑÈ°µÂÜÖÂÅèÁßªÊãºÊé•ÂΩ¢ÊàêÁâ©ÁêÜÂú∞ÂùÄÔºõÁ¨¨‰∫åÊ¨°ÔºöÂæóÂà∞Áâ©ÁêÜÂú∞ÂùÄÂêéÔºåÂÜç‰∏ÄÊ¨°ËÆøÈóÆÂÜÖÂ≠òÔºåÂ≠òÂèñÊåá‰ª§ÊàñËÄÖÊï∞ÊçÆ„ÄÇ</p>
<p><strong>ÊÆµÂºèÂ≠òÂÇ®</strong>Ôºå2Ê¨°ÔºàÂêå‰∏äÔºâ</p>
<p><strong>ÊÆµÈ°µÂºèÂ≠òÂÇ®</strong>Ôºå3Ê¨°Ôºö</p>
<p>Á¨¨‰∏ÄÊ¨°ÔºöËÆøÈóÆÂÜÖÂ≠ò‰∏≠ÁöÑÊÆµË°®Êü•Âà∞È°µË°®ÁöÑËµ∑ÂßãÂú∞ÂùÄ</p>
<p>Á¨¨‰∫åÊ¨°ÔºöËÆøÈóÆÂÜÖÂ≠ò‰∏≠ÁöÑÈ°µË°®ÊâæÂà∞È°µÂ∏ßÂè∑ÔºåÂΩ¢ÊàêÁâ©ÁêÜÂú∞ÂùÄ</p>
<p>Á¨¨‰∏âÊ¨°ÔºöÂæóÂà∞Áâ©ÁêÜÂú∞ÂùÄÂêéÔºåÂÜç‰∏ÄÊ¨°ËÆøÈóÆÂÜÖÂ≠òÔºåÂ≠òÂèñÊåá‰ª§ÊàñËÄÖÊï∞ÊçÆ</p>
<p><strong>Â§öÁ∫ßÈ°µË°®</strong>ÔºåËã•È°µË°®ÂàíÂàÜ‰∏∫NÁ∫ßÔºåÂàôÈúÄË¶ÅËÆøÈóÆÂÜÖÂ≠òN+1Ê¨°„ÄÇTLBÂëΩ‰∏≠ÔºåÂè™ÈúÄËÆøÈóÆ1Ê¨°ÂÜÖÂ≠òÂç≥ÂèØ„ÄÇ</p>
<h2 id="41-paging">4.1. Paging</h2>
<p>ÂÜÖÊ†∏ÊääÁâ©ÁêÜÈ°µ‰Ωú‰∏∫ÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÂü∫Êú¨Âçï‰Ωç„ÄÇÁâ©ÁêÜÈ°µÁöÑÂü∫Êú¨Êï∞ÊçÆÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">page</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span> <span class="c1">// È°µÊòØ‰∏çÊòØËÑèÁöÑÔºåÊòØÂê¶ÈîÅÂÆöÂú®ÂÜÖÂ≠ò‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">atomic_t</span>      <span class="n">_count</span><span class="p">;</span> <span class="c1">// È°µÁöÑÂºïÁî®ËÆ°Êï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">atomic_t</span>      <span class="n">_mapcount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">private</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">address_space</span> <span class="o">*</span><span class="n">mapping</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">pgoff_t</span>       <span class="n">index</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">list_head</span>     <span class="n">lru</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span>          <span class="o">*</span><span class="n">virtual</span><span class="p">;</span> <span class="c1">// È°µÁöÑËôöÊãüÂú∞ÂùÄ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>64‰ΩçÁ≥ªÁªü‰∏ãÁöÑ4Á∫ßÈ°µË°®ÔºöÊØè‰∏™È°µ4KBÔºåÊúÄ‰Ωé12‰Ωç($2^{12}$=4KB)Êù•Ë°®Á§∫È°µÂÜÖÂÅèÁßª„ÄÇÊØè‰∏™È°µË°®È°µ‰πüÂç†Áî®Áâ©ÁêÜÂÜÖÂ≠òÁöÑ‰∏Ä‰∏™Áâ©ÁêÜÈ°µ(4KB)ÔºåÊØè‰∏™È°µË°®È°π8Â≠óËäÇÔºåÊâÄ‰ª•‰∏Ä‰∏™È°µË°®È°µÂèØ‰ª•ÂØπÂ∫î512È°µË°®È°π(4KB/8B=512=$2^9$)„ÄÇÊâÄ‰ª•Ôºå48-63‰ΩçÂÖ®ÈÉ®ÁΩÆ‰∏∫0ÊàñËÄÖÊòØ1„ÄÇÂâ©‰∏ã36+12ÂàÜÂà´ÂØπÂ∫îÂõõÁ∫ßÈ°µË°®ÔºåÂíåÈ°µË°®ÂÜÖÂÅèÁßªÈáè„ÄÇ</p>
<p>32‰ΩçÁ≥ªÁªü‰∏ãÁöÑ2Á∫ßÈ°µË°®ÔºöÊØè‰∏™È°µ4KBÔºåÊúÄ‰Ωé12‰Ωç($2^{12}$=4KB)Êù•Ë°®Á§∫È°µÂÜÖÂÅèÁßª„ÄÇÊØè‰∏™È°µË°®È°µ‰πüÂç†Áî®Áâ©ÁêÜÂÜÖÂ≠òÁöÑ‰∏Ä‰∏™Áâ©ÁêÜÈ°µ(4KB)ÔºåÊØè‰∏™È°µË°®È°π4Â≠óËäÇÔºåÊâÄ‰ª•‰∏Ä‰∏™È°µË°®È°µÂèØ‰ª•ÂØπÂ∫î1024È°µË°®È°π(4KB/4B=1024=$2^{10}$)„ÄÇÊâÄ‰ª•Ôºå20+12ÂàÜÂà´ÂØπÂ∫î‰∫åÁ∫ßÈ°µË°®(2*10)ÔºåÂíåÈ°µË°®ÂÜÖÂÅèÁßªÈáè„ÄÇ</p>
<p>ÂØπ‰∫é32bitÊìç‰ΩúÁ≥ªÁªüÔºåÈÄöËøáÁâ©ÁêÜÂú∞ÂùÄÊâ©Â±ïÔºàPhysical Address ExtensionÔºåPAEÔºâÔºåCPUÊâßË°åÂçïÂÖÉÂèëÂá∫ÁöÑÂú∞ÂùÄÂ∞ÜË¢´MMUÊà™Ëé∑ÔºåËøõË°å‰∏ÄÊ¨°Âú∞ÂùÄËΩ¨Êç¢ÂêéÊâç‰º†ÁªôÂÜÖÂ≠ò„ÄÇËøôÊ†∑ÂÖÅËÆ∏32‰ΩçÁ≥ªÁªü‰∏ãÂ§ö‰∏™ËøõÁ®ãÁöÑ‰ΩøÁî®ÂÜÖÂ≠òÂä†Ëµ∑Êù•Ë∂ÖËøá4GB„ÄÇ</p>
<p>TLBÁ°¨‰ª∂‰∏ÄËà¨ÈááÁî®ÂàÜÂ±ÇÁªìÊûÑÔºåL1ÈÉ®ÂàÜÂàÜ‰∏∫Êåá‰ª§TLB‰∏éÊï∞ÊçÆTLBÔºåL2‰∏çÂå∫ÂàÜÊåá‰ª§‰∏éÊï∞ÊçÆÔºå‰Ωú‰∏∫CPUÂÜÖÈÉ®Á°¨‰ª∂„ÄÇ</p>
<p>Âú®ÂàáÊç¢Â∫îÁî®Âà∑Êñ∞Êó∂Ôºå‰∏∫ÊØè‰∏™TLBÊâì‰∏äÊ†áÁ≠æÔºàÂú®AArchÁß∞‰∏∫Address Space IDentifierÔºåASIDÔºõx86-64‰∏≠Áß∞‰∏∫Process Context IDentifierÔºâÔºåÊìç‰ΩúÁ≥ªÁªü‰∏∫ÊØè‰∏Ä‰∏™Â∫îÁî®ÂàÜÈÖç‰∏çÂêåÁöÑÊ†áÁ≠æÔºåËøô‰∏™Ê†áÁ≠æËÆ∞ÂΩïÂú®È°µË°®Âü∫ÂùÄÂØÑÂ≠òÂô®ÔºåËøôÊ†∑TLBÁöÑÁºìÂ≠òÈ°πÂ∞±Ë¢´Â∫îÁî®Âå∫ÂàÜÂºÄÔºåÂàáÊç¢Â∫îÁî®Êó∂‰∏çÁî®Ê∏ÖÁ©∫TLB„ÄÇ</p>
<p>Âú®ËôöÊãüÈ°µ‰ΩøÁî®ÂêéÔºå‰∏ç‰∏ÄÂÆö‰ºöÂú®È°µË°®‰∏≠„ÄÇÂΩìÁâ©ÁêÜÂÜÖÂ≠ò‰∏çÂ§üÁöÑÊó∂ÂÄôÔºåÂ∫îËØ•Â∞ÜÁâ©ÁêÜÈ°µÁöÑÂÜÖÂÆπÂÜôÂÖ•Âà∞Á£ÅÁõò‰∏≠ÔºåÂêåÊó∂ËÆ∞ÂΩïÁâ©ÁêÜÈ°µÁöÑ‰ΩçÁΩÆÔºåËøô‰∏™ÊµÅÁ®ãÁß∞‰πã‰∏∫Êç¢Âá∫„ÄÇ</p>
<p>ÂΩìËÆøÈóÆÊú™Êò†Â∞ÑÂà∞ÂÜÖÂ≠òÁöÑËôöÊãüÈ°µÊó∂ÔºåÂèëÁîüÁº∫È°µÂºÇÂ∏∏ÔºåÂ∞ÜÊâÄÊúâÁ£ÅÁõòÁöÑÊï∞ÊçÆÂä†Âà∞Áâ©ÁêÜÈ°µÔºåÂÜçÂ°´ÂÜôÁâ©ÁêÜÈ°µÁöÑÊò†Â∞ÑÔºåËøô‰∏™ÊµÅÁ®ãÁß∞‰∏∫Êç¢ÂÖ•„ÄÇ</p>
<p>È¢ÑÂèñÔºàPrefetchingÔºâÔºöÂΩìÊç¢ÂÖ•Êó∂ÔºåÁåúÊµãËøòÊúâÂì™‰∫õÈ°µ‰ºöË¢´ËÆøÈóÆÔºåÊèêÂâçÊç¢ÂÖ•ÂÜÖÂ≠òÔºåÂáèÂ∞ëÁº∫È°µÊ≠§Êï∞„ÄÇ</p>
<p>ÊåâÈúÄÂàÜÈÖçÔºàDemand PagingÔºâÔºöÂ∞ÜÂàÜÈÖçÁöÑËôöÊãüÈ°µÊ†áËÆ∞‰∏∫‚ÄúÂ∑≤ÁªèÂàÜÈÖçÔºå‰ΩÜÊòØÊ≤°ÊúâÊò†Â∞ÑÂà∞Áâ©ÁêÜÂÜÖÂ≠ò‚ÄùÁöÑÁä∂ÊÄÅÔºåÊúâÊïàÊèêÈ´òËµÑÊ∫êÂà©Áî®Áéá„ÄÇ</p>
<h2 id="42-strategy">4.2. Strategy</h2>
<p>MIN/OPTÔºàMinimumÔºåOptimalÔºâÔºö‰ºòÂÖàÈÄâÊã©Êú™Êù•‰∏ç‰ºöËÆøÈóÆÁöÑÈ°µÔºåÁêÜËÆ∫ÊúÄ‰ºòÔºåÂÆûË∑µÂõ∞Èöæ„ÄÇ</p>
<p>FIFOÔºàFirst-In First-OutÔºâÔºöÊó∂Èó¥ÂºÄÈîÄ‰ΩéÔºå‰ΩÜÊòØÂÆûÈôÖË°®Áé∞‰∏ç‰Ω≥ÔºåÂÖàÂêéÈ°∫Â∫èÂíå‰ΩøÁî®È¢ëÁπÅÂÖ≥Á≥ª‰∏éÂê¶‰∏çÂ§ß„ÄÇ</p>
<p>Second ChanceÔºöÁªôÈòüÂàóÊØè‰∏Ä‰∏™ËÆøÈóÆÂà∞ÁöÑËÆæÁΩÆÊ†áÂøó‰ΩçÔºåÊåâFIFOÁöÑ‚ÄúÈÄªËæë‚ÄùÔºåÊØèÊ¨°Â∞ÜÊç¢Âá∫Êó∂ÔºåÊ†áÂøóÊ∏ÖÈõ∂ÔºåÂπ∂ÁßªÂà∞ÈòüÂ∞æÔºõÂ¶ÇÊûúÊ≤°ÊúâÊ†áÂøóÔºå‰∏îÂú®ÈòüÂ§¥ÔºåÂàô‰ºöË¢´Êç¢Âá∫„ÄÇÂΩìÊâÄÊúâÊ†áÂøóÂ§±ÊïàÊó∂ÔºåÂº±Âåñ‰∏∫FIFO„ÄÇÊ≠§Â§ñÔºåËøòÊúâÂèØËÉΩÂèëÁîüÔºàBeladyÂºÇÂ∏∏Ôºâ</p>
<p>LRUÔºàLeast Recently UsedÔºâÔºöË¢´Êç¢Âá∫Êó∂Ôºå‰ºòÂÖàÈÄâÊã©ÊúÄ‰πÖÊú™Ë¢´ËÆøÈóÆÂà∞ÁöÑÔºåÈìæË°®Â∞æÊîæÊúÄÂ∏∏Áî®ÁöÑÔºåÈ¶ñÁ´ØÊîæÊúÄ‰∏çÂ∏∏Áî®ÁöÑÔºåÊØèÊ¨°Ê∑òÊ±∞È¶ñÁ´Ø„ÄÇ</p>
<p>MRUÔºàMost Recently UsedÔºâÔºöÁî®LRUÁõ∏ÂèçÁöÑÁ≠ñÁï•ÔºåÂü∫‰∫éÂÅáËÆæ‚ÄúÁ®ãÂ∫è‰∏ç‰ºöÂèçÂ§çËÆøÈóÆÁõ∏ÂêåÁöÑÂú∞ÂùÄ‚Äù„ÄÇ</p>
<p>Clock AlgorithmÔºöÁ±ª‰ºº‰∫éSecond ChanceÔºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÁßªÂä®ÈìæË°®‰∏≠ÁöÑÈ°µÂè∑ÔºåÊïàÁéáÊõ¥È´ò„ÄÇ</p>
<h2 id="43-virtual-memory">4.3. Virtual Memory</h2>
<p>COWÔºàCopy On WriteÔºâÔºöÁî®‰∫éÂä®ÊÄÅÈìæÊé•Â∫ìÔºåforkÁ≠â„ÄÇÁî®Âè™ËØªÁöÑÊñπÂºèÂÖ±‰∫´ÂÜÖÂ≠ò„ÄÇ‰∏ÄÊó¶ÂèëÁîüÂÜôÊìç‰ΩúÔºå‰∫ßÁîüÁº∫È°µÂºÇÂ∏∏ÔºåËß¶ÂèëCOWÊú∫Âà∂„ÄÇ</p>
<p>KSMÔºàKernel Same-page MergingÔºâÔºöÂü∫‰∫éCOWÔºåÂÆöÊúüÊâ´ÊèèÁõ∏ÂêåÁöÑÁâ©ÁêÜÈ°µÔºåËøõË°åÂêàÂπ∂ÔºåÂáèÂ∞ëÂÜÖÂ≠òÂç†Áî®„ÄÇ</p>
<p>zswapÔºöÂú®Êç¢Âá∫ÂÜÖÂ≠òÊó∂Ôºå‰ΩøÁî®ÂéãÁº©ÁÆóÊ≥ïÔºåÂ∞ÜÊï∞ÊçÆÂéãÁº©ÂêéÔºåÂ≠òÊîæËá≥ÁºìÂÜ≤Âå∫ÔºåËÄå‰∏çÁõ¥Êé•Â≠òÁ£ÅÁõòÔºåÂèØ‰ª•ÊúâÊïàÈÅøÂÖçÁ£ÅÁõòIO„ÄÇ</p>
<p>buddy systemÔºöÈúÄÊ±ÇmÈ°µÊó∂ÔºåÂàÜË£Ç($2^{n-1}&lt; m ‚â§ 2^n$)Ëá≥ÂêàÈÄÇÁöÑÁâ©ÁêÜÂùóÔºåÈáäÊîæÊó∂ÂêàÂπ∂Á©∫Èó≤ÂùóÔºåËøô‰∏§‰∏™Êìç‰ΩúÊòØÁ∫ßËÅîÁöÑÔºåÂáèÂ∞ëÂ§ñÈÉ®Á¢éÁâá„ÄÇ</p>
<p>SLABÔºö‰∏ÄËà¨‰∏∫SLUBÔºåSLOBÔºåSLABÁöÑÁªüÁß∞„ÄÇ‰∏∫È´òÊïàÂàÜÈÖçËæÉÂ∞èÁöÑÂÜÖÂ≠òÂùóÊèêÈ´òÈÄüÂ∫¶ÔºåSLABÂè™‰ºöÂàÜÈÖçÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÂÜÖÂ≠òÂùó($2^n$, $3‚â§ n &lt;12$)ÔºåÂÆûÈôÖËøò‰ºöÊúâÁâπÊÆäÂÄºÈÅøÂÖçÂÜÖÈÉ®Á¢éÁâáÔºåËøô‰∫õÂùóÁß∞‰∏∫slabÔºåÊØè‰∏™slab‰ºöË¢´ÂàÜÊàêÂ∞èÂùóÔºåÁî®ÈìæË°®ÈìæÊé•ÔºåÂÖ∂‰∏≠currentÊåáÂêëÂΩìÂâçÁöÑslabÔºåpartialÊåáÂêëÊâÄÊúâÁ©∫Èó≤ÁöÑslabÔºåÂàÜÈÖçÊó∂ÔºåÂÖàÂéªcurrentÂèñÔºåcurrentÁ©∫‰∫ÜÂÜçÂèñ‰∏Ä‰∏™partialÁöÑslab‰∫§Áªôcurrent„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåLinuxÈááÁî®slabÂàÜÈÖçÂô®ÂàÜÈÖçtask_structÁªìÊûÑÔºåËÉΩÂ§üÊõ¥Â•ΩÂÆûÁé∞ÂØπË±°Â§çÁî®ÂíåÁºìÂ≠òÁùÄËâ≤„ÄÇ</p>
<p>Implicit Free ListÔºöÊØè‰∏™ÂÜÖÂ≠òÂùóÁöÑÂ§¥ÈÉ®ÔºåÁî®ÈìæË°®Áª¥Êä§ÊòØÂê¶Á©∫Èó≤ÔºåÂùóÂ§ßÂ∞èÁöÑ‰ø°ÊÅØÔºåÂàÜÈÖçËØ∑Ê±ÇÊó∂Ôºå‰æùÊ¨°ÂêàÂπ∂„ÄÇ</p>
<p>Explicit Free ListÔºö‰ªÖ‰ªÖÊääÁ©∫Èó≤ÁöÑÈìæÊé•Ëµ∑Êù•ÔºåÊâÄ‰ª•ÊØè‰∏™Á©∫Èó≤ÂùóÂè™Áî®Áª¥Êä§‰∏§‰∏™ÊåáÈíàÂíåÂùóÂ§ßÂ∞èÔºåÂàÜÈÖçÈÄüÂ∫¶ÊØîÈöêÂºèÂø´„ÄÇ</p>
<p>Segregated Free ListÔºöÁª¥Êä§Â§öÊù°ÊòæÁ§∫ÈìæË°®ÔºåÊâæÂà∞ÂùóÂ§ßÂ∞èÊúÄÂêàÈÄÇÁöÑÁ©∫Èó≤ÂùóÔºåÊúâÁ©∫‰ΩôÂàôÊèíÂÖ•Á©∫Èó≤ÈìæË°®‰∏≠„ÄÇ</p>
<p>Cache coloringÔºö‰∏çÂêå‰ΩçÁΩÆÁöÑÁâ©ÁêÜÈ°µÊ†á‰∏ä‰∏çÂêåÈ¢úËâ≤ÔºåËøûÁª≠ÂàÜÈÖçÂÜÖÂ≠òÁâ©ÁêÜÈ°µÊó∂Ôºå‰ºòÂÖàÈÄâÊã©‰∏çÂêåÁâ©ÁêÜÈ°µÈ¢úËâ≤ÁöÑËøõË°åÂàÜÈÖç„ÄÇ</p>
<blockquote>
<p>Zero Copy</p>
</blockquote>
<p>‰º†ÁªüÁöÑÂÜÖÂ≠òËÆøÈóÆÊñπÂºèÔºåÂ¶Çread/writeÔºåÊØèÊ¨°Êìç‰ΩúÈÉΩÈúÄË¶ÅËøõË°åÂÜÖÊ†∏ÊÄÅ‰∏éÁî®Êà∑ÊÄÅ‰πãÈó¥ÁöÑÂàáÊç¢Ôºå<code>read()</code> ÊääÊï∞ÊçÆ‰ªéÂ≠òÂÇ®Âô® (Á£ÅÁõò„ÄÅÁΩëÂç°Á≠â) ËØªÂèñÂà∞Áî®Êà∑ÁºìÂÜ≤Âå∫Ôºå<code>write()</code> ÂàôÊòØÊääÊï∞ÊçÆ‰ªéÁî®Êà∑ÁºìÂÜ≤Âå∫ÂÜôÂá∫Âà∞Â≠òÂÇ®Âô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÖ∂‰∏≠void *bufÊåáÂêëÁöÑÂÜÖÂ≠òÁ©∫Èó¥Ë¶ÅÊ±ÇÂêàÊ≥ïÂà§Êñ≠Ôºå‰∏∫‰∫ÜÂÆâÂÖ®ËÄÉËôëÔºå
</span></span></span><span class="line"><span class="cl"><span class="c1">// ÂÜÖÊ†∏‰ºöÂèëËµ∑‰ªéÁî®Êà∑ÂÜÖÂ≠òÂà∞ÂÜÖÊ†∏ÂÜÖÂ≠òÁöÑÊã∑Ë¥ùÁöÑË∞ÉÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">ssize_t</span> <span class="nf">read</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">ssize_t</span> <span class="nf">write</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏ÄËà¨LinuxÈõ∂Êã∑Ë¥ùÊúâ‰∏âÁßçÂÆûÁé∞ÊñπÂºèÔºö1.ÂáèÂ∞ëÊã∑Ë¥ùÊ¨°Êï∞Ôºå2.ÁªïËøáÂÜÖÊ†∏Áõ¥Êé•IOÔºå3.COWÊäÄÊúØÔºàÂè™ËØªÂàô‰∏çÁî®Êã∑Ë¥ùÔºâ</p>
<p>ÊñπÊ≥ï‰∏ÄÔºöÈááÁî®mmap+writeÔºåÂèØ‰ª•ÂáèÂ∞ë‰∏ÄÊ¨°CPUÊã∑Ë¥ùÔºåËäÇÁúÅ50%ÂÜÖÂ≠òÔºåÈÄÇÁî®‰∫éÂ§ßÊñá‰ª∂‰º†ËæìÔºõÂ∞èÊñá‰ª∂ÂèçËÄå‰ºöÈÄ†ÊàêÊõ¥Â§öÁöÑÂÜÖÂ≠òÁ¢éÁâáÊµ™Ë¥π„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sys/mman.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// mmap creates a new mapping in the virtual address space of the calling process.
</span></span></span><span class="line"><span class="cl"><span class="c1">// The starting address for the new mapping is specified in addr.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="o">*</span><span class="nf">mmap</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">length</span><span class="p">,</span> <span class="kt">int</span> <span class="n">prot</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">off_t</span> <span class="n">offset</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊñπÊ≥ï‰∫åÔºöÈááÁî®LinuxÂÜÖÊ†∏ÁâàÊú¨2.1ÂºïÂÖ•ÁöÑsendfileÁ≥ªÁªüË∞ÉÁî®ÔºåÂõ†‰∏∫ËøôÁßçÊã∑Ë¥ùÂèëÁîüÂú®ÂÜÖÊ†∏ÊÄÅÔºåÁõ∏ÊØî‰∫éread/writeËäÇÁúÅ‰∫ÜÂ∞ÜÊï∞ÊçÆÊã∑Ë¥ùËá≥Áî®Êà∑ÊÄÅÁöÑÊó∂Èó¥„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sys/sendfile.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// sendfile copies data between one file descriptor and another.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">ssize_t</span> <span class="nf">sendfile</span><span class="p">(</span><span class="kt">int</span> <span class="n">out_fd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">in_fd</span><span class="p">,</span> <span class="kt">off_t</span> <span class="o">*</span><span class="n">offset</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊñπÊ≥ï‰∏âÔºöÈááÁî®Linux ÂÜÖÊ†∏ÁâàÊú¨2.6.17ÂºïÂÖ•ÁöÑspliceÁ≥ªÁªüË∞ÉÁî®ÔºåËß£ÂÜ≥‰∫ÜsendfileÂè™Âú®ÁΩëÁªúÂçèËÆÆ‰∏ìÁî®ÁöÑÂºäÁ´ØÔºåÂú®Êï∞ÊçÆ‰º†ËæìËøáÁ®ã‰∏≠Ôºå‰ªÖ‰º†ÈÄíÂÜÖÂ≠òÈ°µÁöÑÊåáÈíàËÄå‰∏çÊòØÁúüÂÆûÁöÑÊï∞ÊçÆ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#define _GNU_SOURCE </span><span class="cm">/* See feature_test_macros(7) */</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fcntl.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// splice moves data between two file descriptors 
</span></span></span><span class="line"><span class="cl"><span class="c1">// without copying between kernel address space and user address space.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">ssize_t</span> <span class="nf">splice</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd_in</span><span class="p">,</span> <span class="kt">loff_t</span> <span class="o">*</span><span class="n">off_in</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fd_out</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">               <span class="kt">loff_t</span> <span class="o">*</span><span class="n">off_out</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="5-process-and-thread">5. Process and Thread</h1>
<h2 id="51-process">5.1. Process</h2>
<p>ËøõÁ®ãÁöÑÁä∂ÊÄÅÔºöÊñ∞ÁîüÔºànewÔºâ„ÄÅÂ∞±Áª™ÔºàreadyÔºâ„ÄÅËøêË°åÔºàrunningÔºâ„ÄÅÈòªÂ°ûÔºàblockedÔºâ„ÄÅÁªàÊ≠¢ÔºàterminatedÔºâ„ÄÇÂú®ËøõÁ®ãÁªìÊûÑ‰Ωì‰∏≠ÁöÑstateÂüüÂÅö‰∫ÜÊ†áËÆ∞</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Ê†áËÆ∞</th>
<th>Áä∂ÊÄÅ</th>
</tr>
</thead>
<tbody>
<tr>
<td>TASK_RUNNING</td>
<td>Ê≠£Âú®ÊâßË°åÊàñËÄÖÊòØËøêË°åÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°å</td>
</tr>
<tr>
<td>TASK_INTERRUPTIBLE</td>
<td>ËøõÁ®ãÊ≠£Âú®ÈòªÂ°ûÔºåÁ≠âÂæÖÊüê‰∏Ä‰∫ã‰ª∂ÁöÑËææÊàê„ÄÇ</td>
</tr>
<tr>
<td>TASK_UNINTERRUPTIBLE</td>
<td>Êî∂Âà∞‰ø°Âè∑‰πü‰∏ç‰ºöË¢´Âî§ÈÜíÊàñËÄÖÂáÜÂ§áÊäïÂÖ•ËøêË°å„ÄÇ</td>
</tr>
<tr>
<td>__TASK_TRACED</td>
<td>Ë¢´ÂÖ∂‰ªñË∑üË∏™ÁöÑËøõÁ®ãÔºàÂ¶ÇptraceÔºâ</td>
</tr>
<tr>
<td>__TASK_STOPPED</td>
<td>ÂÅúÊ≠¢ÊâßË°åÔºåÊî∂Âà∞SIGSTOPÔºåSIGTSPÔºåSIGTTINÔºåSIGTTOU‰ø°Âè∑Âêé</td>
</tr>
</tbody>
</table></div>
<p>ËøõÁ®ãÁöÑÂÜÖÂ≠òÁ©∫Èó¥Â∏ÉÂ±ÄÔºöÔºàÂú®/proc/&lt;PID&gt;/mapsÊü•ÁúãÂ∏ÉÂ±ÄÔºâ</p>
<ul>
<li>
<p>ÂÜÖÊ†∏ÈÉ®ÂàÜÔºöÁ©∫Èó¥ÊúÄÈ°∂Á´ØÁöÑÈÉ®ÂàÜÔºåÂè™ÊúâËøõÂÖ•ÂÜÖÊ†∏ÊÄÅÊâçÂèØËßÅ„ÄÇ</p>
</li>
<li>
<p>Áî®Êà∑Ê†àÔºöËá™È°∂Âêë‰∏ãÔºå‰øùÂ≠òÂêÑÁßç‰∏¥Êó∂ÂèòÈáèÁöÑÂÄº„ÄÇ</p>
</li>
<li>
<p>‰ª£Á†ÅÂ∫ìÔºö‰øùÂ≠ò‰æùËµñÂÖ±‰∫´ÁöÑ‰ª£Á†ÅÂ∫ìÔºåÂ¶ÇlibcÁ≠âÔºåËøôÊÆµÊ†áËÆ∞‰∏∫Âè™ËØª„ÄÇ</p>
</li>
<li>
<p>Êï∞ÊçÆ‰∏é‰ª£Á†ÅÊÆµÔºöËá™Â∫ïÂêë‰∏äÔºåËøô‰∏™ÊÆµÁî®‰∫é‰øùÂ≠ò‰∫åËøõÂà∂Êñá‰ª∂ÔºåÂä†ËΩΩÊó∂‰ºöË¢´ËΩΩÂÖ•ËôöÊãüÁ©∫Èó¥‰∏≠„ÄÇ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#inclue&lt;unistd.h&gt;
</span></span></span><span class="line"><span class="cl"><span class="cp">#inclue&lt;sys/types.h&gt;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">pid_t</span> <span class="nf">fork</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#inclue&lt;unistd.h&gt;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">execve</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="k">const</span> <span class="n">argv</span><span class="p">[],</span> <span class="kt">char</span> <span class="o">*</span><span class="k">const</span> <span class="n">envp</span><span class="p">[]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>exevce‰ºöÊ†πÊçÆpathnameÁöÑË∑ØÂæÑÔºåÂ∞ÜÊï∞ÊçÆÊÆµÂíå‰ª£Á†ÅÊÆµÂä†ËΩΩÂà∞ÂΩìÂâçËøõÁ®ãÂú∞ÂùÄÁ©∫Èó¥‰∏≠ÔºåÂÜçÈáçÊñ∞ÂàùÂßãÂåñÂ†ÜÊ†àÂÜçÂ∞ÜPCÊåáÂêë‰ª£Á†ÅÊÆµÂÆö‰πâÁöÑÂÖ•Âè£</p>
<p>ËøõÁ®ãÁõëÊéßÔºöwait</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;sys/wait.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">pid_t</span> <span class="nf">waitpid</span><span class="p">(</span><span class="kt">pid_t</span> <span class="n">pid</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">wstatus</span><span class="p">,</span> <span class="kt">int</span> <span class="n">options</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;sys/wait.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;sys/types.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="nf">fork</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;Fork failed</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;ChildProcess: existing</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span>  <span class="n">status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nf">waitpid</span><span class="p">(</span><span class="n">rc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;Parent process: waitpid failed&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nf">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nf">WIFEXITED</span><span class="p">(</span><span class="n">status</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Parent process: my child has exited</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;Parent process: waitpid returns for unkonwn reasons&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÁà∂ËøõÁ®ãÊ≤°ÊúâwaitÊàñËÄÖÊ≤°ËøêË°åÂà∞Âà∞waitÔºåÂ≠êËøõÁ®ã‰∏≠Ê≠¢‰∫ÜÔºåÁà∂ËøõÁ®ãÊú™ËøõË°åÈÄÇÂΩìÂ§ÑÁêÜSIGCHLD‰ø°Âè∑ÔºåÂç†Áî®ÁöÑËµÑÊ∫ê‰πü‰∏ç‰ºöÈáäÊîæÔºåË¢´Áß∞‰∏∫ÂÉµÂ∞∏ËøõÁ®ã„ÄÇÂÜÖÊ†∏‰ºö‰∏∫ÂÉµÂ∞∏ËøõÁ®ã‰øùÁïôPid‰ª•ÂèäÁªàÊ≠¢Êó∂ÁöÑstatus„ÄÇÂ¶ÇÊûúÁà∂ËøõÁ®ãÈÄÄÂá∫‰∫ÜÔºåÈÇ£‰πàÂ≠êËøõÁ®ãÁöÑ‰ø°ÊÅØ‰πü‰∏ç‰ºöË¢´Áà∂ËøõÁ®ãÂç†Áî®ÔºåÊâÄÊúâÁöÑÂÉµÂ∞∏ËøõÁ®ãÈÉΩ‰ºöË¢´initÁî®waitÂõûÊî∂„ÄÇÔºàÂ¶ÇÊûúÁà∂ËøõÁ®ã‰∏çÈÄÄÂá∫Ôºå‰∏ÄÁõ¥Ê≠ªÂæ™ÁéØÔºåÈÇ£ÂÉµÂ∞∏ËøõÁ®ã‰ºöË∂äÊù•Ë∂äÂ§öÔºâ</p>
<p>ËøõÁ®ãÁªÑÔºàProcess GroupÔºâÔºöÈªòËÆ§Áà∂ËøõÁ®ãÂíåÂ≠êËøõÁ®ãÊòØ‰∏Ä‰∏™ËøõÁ®ãÁªÑÔºåÂ≠êËøõÁ®ãÂèØ‰ª•setpgid()ÂàõÂª∫Êñ∞ËøõÁ®ãÁªÑÊàñËÄÖÁßªÂÖ•Â∑≤ÊúâËøõÁ®ãÁªÑ„ÄÇÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•killpgÂèëÈÄÅ‰ø°Âè∑ÔºåÈÄöÁü•ËøõÁ®ãÁªÑÁöÑÊØè‰∏™ËøõÁ®ã„ÄÇ</p>
<p>‰ºöËØùÔºàSessionÔºâÔºöËøõÁ®ãÁªÑÁöÑÈõÜÂêàÔºåÊ†πÊçÆÊâßË°åÁä∂ÊÄÅÔºåÂàÜ‰∏∫ÂâçÂè∞ËøõÁ®ãÁªÑÔºàforeground thread groupÔºâÔºåÂíåÂêéÂè∞ËøõÁ®ãÁªÑÔºàbackground groupÔºâ„ÄÇÊéßÂà∂ÁªàÁ´ØÊòØ‰ºöËØù‰∏éÂ§ñÁïå‰∫§‰∫íÁöÑ‰∏Ä‰∏™ÂÖ•Âè£„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;sched.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">clone</span><span class="p">(</span><span class="kt">int</span> <span class="p">(</span><span class="n">fn</span><span class="o">*</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">),</span> <span class="kt">void</span> <span class="o">*</span><span class="n">stack</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="p">...);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>LinuxÊîØÊåÅÂØπcloneËøõË°åÊõ¥Á≤æÂØÜÁöÑÊéßÂà∂ÔºåÂÖÅËÆ∏ÊåáÂÆöËøõÁ®ãÊ†àÁöÑ‰ΩçÁΩÆ„ÄÅÁ¶ÅÊ≠¢Â§çÂà∂ÂÜÖÂ≠òÁ≠âÊìç‰Ωú„ÄÇÂåÖÊã¨ÈöîÁ¶ªnamespaceÁ≠â„ÄÇ</p>
<h2 id="52-thread">5.2. Thread</h2>
<p>LinuxÊìç‰ΩúÁ≥ªÁªüÊääÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩÂΩì‰ΩúËøõÁ®ãÊù•ÂÆûÁé∞ÔºåÂÜÖÊ†∏Âπ∂Ê≤°ÊúâÂáÜÂ§áÁâπÂà´ÁöÑË∞ÉÂ∫¶ÁÆóÊ≥ïÊàñËÄÖÂÆö‰πâÁâπÂà´ÁöÑÊï∞ÊçÆÁªìÊûÑÊù•Ë°®ÂæÅÁ∫øÁ®ã„ÄÇ‰ªÖ‰ªÖË¢´ËßÜ‰∏∫‰∏éÂÖ∂‰ªñËøõÁ®ãÂÅö‰∫ÜËµÑÊ∫êÂÖ±‰∫´ÁöÑËøõÁ®ã„ÄÇ</p>
<p>Á∫øÁ®ãÂàÜ‰∏∫Áî®Êà∑ÊÄÅÁ∫øÁ®ãÂíåÂÜÖÊ†∏ÊÄÅÁ∫øÁ®ãÔºå‰∏ÄËà¨Êù•ËØ¥ÔºåÊúâ‰∏âÁßçË∞ÉÂ∫¶Ê®°ÂûãÔºö</p>
<p>Áî®Êà∑ÂØπÂÜÖÊ†∏ÔºöÂ§öÂØπ‰∏ÄÔºå‰∏ÄÂØπ‰∏ÄÔºåÂ§öÂØπÂ§ö„ÄÇÊ≤°Êúâ‰∏ÄÂØπÂ§öÔºàÂç≥‰∏Ä‰∏™Áî®Êà∑Á∫øÁ®ãÂØπÂ∫îÂ§ö‰∏™ÂÜÖÊ†∏Á∫øÁ®ãÔºâ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;pthread.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">pthread_create</span><span class="p">(</span><span class="kt">pthread_t</span> <span class="o">*</span><span class="kr">thread</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                   <span class="k">const</span> <span class="kt">pthread_attr_t</span> <span class="o">*</span><span class="n">attr</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                   <span class="kt">void</span> <span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">start_routine</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                   <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">pthread_exit</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">retval</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">pthread_yield</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">pthread_join</span><span class="p">(</span><span class="kt">pthread_t</span> <span class="kr">thread</span><span class="p">,</span> <span class="kt">void</span> <span class="o">**</span><span class="n">retval</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Á∫øÁ®ãÂàõÂª∫ÂáΩÊï∞ÊúÄÂêéËøòÊòØ‰ºöË∞ÉÁî®cloneÔºåÂÖ∂‰∏≠clone_flag‰∏∫CLONE_THREAD„ÄÇ</p>
<p>Á∫øÁ®ãÈÄÄÂá∫ÂáΩÊï∞‰∏çÊòØÂøÖË¶ÅÁöÑÔºåÈÄÄÂá∫Êó∂Ëá™Âä®‰ºöÈÄÄÂá∫ÔºõyieldÁî®‰∫éËÆ©Âá∫Ôºå‰ºöÂèëËµ∑sched_yieldÁ≥ªÁªüË∞ÉÁî®„ÄÇ</p>
<p>ÂêàÂπ∂Êìç‰ΩúÂÖÅËÆ∏Á≠âÂæÖ‰∏Ä‰∏™Á∫øÁ®ãÁªìÊùüÔºåÂπ∂‰øùÁïôËøîÂõûÂÄº„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">sleep</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">seconds</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">pthread_cond_wait</span><span class="p">(</span><span class="kt">pthread_t</span> <span class="o">*</span><span class="kr">restrict</span> <span class="n">cond</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                     <span class="kt">pthread_mutex_t</span> <span class="o">*</span><span class="kr">restrict</span> <span class="n">mutex</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>sleep‰ºöËÆ©Á∫øÁ®ãÊåÇËµ∑Êï∞ÁßíÔºåÊàñËÄÖÊòØ‰ΩøÁî®cond_waitÂú®Êù°‰ª∂ÂèòÈáè‰∏∫ÂêåÊ≠•ÊñπÂºèÁ≠âÂæÖ„ÄÇ</p>
<h1 id="6-operating-system-scheduling">6. Operating System Scheduling</h1>
<p>Long-term SchedulingÔºöÂÜ≥ÂÆöÂΩìÂâçÁúüÊ≠£ÂèØ‰ª•Ë¢´Ë∞ÉÂ∫¶ÁöÑËøõÁ®ãÊï∞Èáè„ÄÇ</p>
<p>Short-term SchedulingÔºöË¥üË¥£ËøõÁ®ãÂú®Â∞±Áª™„ÄÅËøêË°å„ÄÅÈòªÂ°û‰∏â‰∏™Áä∂ÊÄÅ‰πãÈó¥ÁöÑËΩ¨Êç¢„ÄÇ</p>
<p>Midium-term SchedulingÔºöË¥üË¥£ÁÆ°ÁêÜÂÜÖÂ≠òÔºåÊç¢È°µÊú∫Âà∂Á≠â</p>
<p>ÁªèÂÖ∏Ë∞ÉÂ∫¶Á≠ñÁï•Ôºö</p>
<ul>
<li>
<p>FIFO/FCFSÔºàFirst In First Out / First Come First ServeÔºâÔºöÂú®ÈïøÁü≠‰ªªÂä°Ê∑∑ÂêàÁöÑÊÉÖÂÜµ‰∏ãÂØπÁü≠‰ªªÂä°‰∏çÂèãÂ•Ω„ÄÇ</p>
</li>
<li>
<p>SJFÔºàShortest Job FirstÔºâÔºöË°®Áé∞‰∏•Èáç‰æùËµñ‰∫é‰ªªÂä°Âà∞ËææÁöÑÊó∂Èó¥ÁÇπ„ÄÇ</p>
</li>
<li>
<p>STCFÔºàShortest Time-to-Completion FirstÔºâÔºöÁõ∏ÊØîFIFOÂíåSJFÔºåÂºïÂÖ•preemptiveÊú∫Âà∂Ôºå‰ΩÜÊòØÂèØËÉΩ‰ºöÂØºËá¥Èïø‰ªªÂä°È••È•ø„ÄÇ</p>
</li>
<li>
<p>RRÔºàRound RobinÔºâÔºöÂú®‰ªªÂä°ËøêË°åÊó∂Èó¥Áõ∏‰ººÁöÑÊÉÖÂÜµ‰∏ãÂë®ËΩ¨Êó∂Èó¥ÂæàÈ´ò„ÄÇ</p>
</li>
</ul>
<p>‰ºòÂÖàÁ∫ßË∞ÉÂ∫¶Á≠ñÁï•Ôºö</p>
<ul>
<li>
<p>MLQÔºàMulti-Level QueueÔºâÔºöÊåâÂ§ö‰∏™Á≠âÁ∫ßÊéíÂàóÔºå‰∏ã‰∏ÄÁ∫ßÈòüÂàó‰∏∫Á©∫ÂêéÔºåÂÜçË∞ÉÂ∫¶Êñ∞ÁöÑ‰ªªÂä°ÔºåÂú®ÊØèÁ∫ßÈòüÂàóÂèØ‰ª•‰ΩøÁî®‰∏çÂêåÁöÑË∞ÉÂ∫¶Á≠ñÁï•„ÄÇ‰ΩÜÊòØÂèØËÉΩÈÄ†Êàê‰Ωé‰ºòÂÖàÁ∫ßÈ••È•øÔºåÂêåÊó∂ÔºåÂú®ÂàáÊç¢‰ªªÂä°Êó∂ÔºåÂèëÁîüÈîÅÁ´û‰∫âÔºåÂèØËÉΩ‰ºö‰∫ßÁîü‰ºòÂÖàÁ∫ßÂèçËΩ¨„ÄÇËß£ÂÜ≥ÊñπÊ≥ïÔºöpriority inheritanceÔºåÂ∞ÜËá™Â∑±ÁöÑ‰ºòÂÖàÁ∫ß‰∫§Áªô‰ΩéÁöÑÔºåÁ≠âÂæÖÊîæÈîÅÂêéÁ´ãÂç≥ÊâßË°å„ÄÇ</p>
</li>
<li>
<p>MLFQÔºàMulti-Level Feedback QueueÔºâÔºöÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÈááÁî®RRÁ≠ñÁï•ÔºåÂêåÊó∂Áü≠‰ªªÂä°ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂ¶ÇÊûúÊüê‰∏Ä‰ªªÂä°Ë∂ÖËøáÈòüÂàóÂÖÅËÆ∏ËøêË°åÁöÑÊúÄÂ§ßÁöÑÊó∂Èó¥ÔºåÂàô‰ºòÂÖàÁ∫ßÈôç‰Ωé„ÄÇÂêåÊó∂ÔºåÂ∞Ü‰Ωé‰ºòÂÖàÁ∫ßÁöÑ‰ªªÂä°ÈááÁî®Êõ¥ÈïøÁöÑÊó∂Èó¥ÁâáÔºåÂÆöÊó∂Â∞ÜÊâÄÊúâ‰ªªÂä°ÁöÑ‰ºòÂÖàÁ∫ßÊèêËá≥ÊúÄÈ´ò„ÄÇÈááÁî®ËøôÁßçÂä®ÊÄÅÊèêÂçá‰∏éÈôç‰ΩéÔºàBoost and PenaltyÔºâË¢´Â∫îÁî®‰∫éÊó©ÊúüÁöÑLinux„ÄÇ</p>
</li>
</ul>
<p>ÂÖ¨Âπ≥ÂÖ±‰∫´Ë∞ÉÂ∫¶Á≠ñÁï•Ôºö</p>
<ul>
<li>
<p>Fair-share SchedulingÔºö‰ª•‰ªΩÈ¢ùÈáèÂåñCPUÊó∂Èó¥</p>
</li>
<li>
<p>Lottery SchedulingÔºö‰ª•ÊäΩÂΩ©Á•®Êï∞ÈáèÂÜ≥ÂÆöË¢´Ë∞ÉÂ∫¶ÁöÑÊ¶ÇÁéáÔºõ‰ªΩÈ¢ùÂ§ßÁöÑ‰ªªÂä°ÂèØ‰ª•ÂΩ©Á•®ËΩ¨ËÆ©Ôºàticket transferÔºâÁªôÂ∞èÁöÑ‰ªªÂä°ÔºõÂêåÊó∂ÂÖÅËÆ∏ÁªôËá™Â∑±ÁöÑÂ≠ê‰ªªÂä°‰∏çÂêåÁöÑÂΩ©Á•®Ë¥ßÂ∏ÅÔºàticket currencyÔºâÈÅøÂÖçÈ¢ëÁπÅ‰øÆÊîπÔºõ‰ªªÂä°ÂèØ‰ª•Ê†πÊçÆCPUÈúÄÊ±ÇÔºåÈÄöËøáÂΩ©Á•®ÈÄöËÉÄÔºàticket inflationÔºâÂÜ≥ÂÆöËá™Â∑±ÁöÑË∞ÉÂ∫¶‰ªΩÈ¢ù„ÄÇ</p>
</li>
<li>
<p>Stride SchedulingÔºöÂºïÂÖ•ËôöÊãüÊó∂Èó¥Ôºàvirtual runtimeÔºâ‰ª•Ê≠•ÂπÖÊù•ÂÜ≥ÂÆöË∞ÉÂ∫¶Ôºå‰ªªÂä°‰ªΩÈ¢ùÂÜ≥ÂÆöÊ≠•ÂπÖÁöÑÂÄíÊï∞„ÄÇ‰πüÂèØ‰ª•‰ΩøÁî®ÂÄüÁî®ËôöÊãüÊó∂Èó¥ÔºàBorrowed Virtual RuntimeÔºâÔºå‰øùËØÅÂÖ¨Âπ≥ÁöÑÂêåÊó∂ÊèêÂçáÂÆûÊó∂ÊÄß„ÄÇ</p>
</li>
</ul>
<p>Â§öÊ†∏Ë∞ÉÂ∫¶Á≠ñÁï•Ôºö</p>
<ul>
<li>Load SharingÔºö‰ªéÂÖ®Â±ÄÈòüÂàó‰∏≠Âèñ‰ªªÂä°„ÄÇÂêéÁª≠Ê∑ªÂä†‰∫ÜÔºàTwo-level SchedulingÔºâÁ≠ñÁï•ÔºåÂºïÂÖ•‰∫ÜÊú¨Âú∞ÈòüÂàó„ÄÇ</li>
<li>Energy Aware SchedulingÔºöÂØπÊØè‰∏™CPUÁöÑÂÆπÈáèÔºåÂäüÁéáÊùÉË°°ÔºåÂàíÂàÜÊÄßËÉΩÂüüÔºåÊâæÂà∞ÊúÄÂêàÈÄÇÁöÑÊ†∏Êù•ËøêË°å„ÄÇ</li>
</ul>
<p>Linux SchedulingÔºö</p>
<p>2.6.23ÂºÄÂßãÈááÁî®Complete Fair SchedulingÁ≠ñÁï•„ÄÇÂ∞ÜË∞ÉÂ∫¶Âô®ÂÆû‰ΩìÂ∞ÅË£ÖÊàêÂ¶Ç‰∏ãÊï∞ÊçÆÁªìÊûÑ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">sched_entity</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">load_weight</span> <span class="n">load</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">rb_node</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">list_head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">on_rq</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">u64</span>    <span class="n">exec_start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">u64</span>    <span class="n">sum_exec_time</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">u64</span>    <span class="n">vruntime</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>LinuxÊìç‰ΩúÁ≥ªÁªüÂ∞Üvruntime‰Ωú‰∏∫Á∫¢ÈªëÊ†ëÁöÑvalueÔºåÂú®ÈÄâÊã©‰∏ã‰∏Ä‰∏™ËøêË°åËøõÁ®ãÊó∂ÔºåÂè™ÈúÄË¶ÅÊâæÂà∞ÊúÄÂ∑¶Âè∂Â≠êÁªìÁÇπÁöÑÁºìÂ≠òÔºåÂç≥Âè™ÈúÄË¶ÅO(1)Â§çÊùÇÂ∫¶ÔºåËÄå‰∏çÊòØO(logn)„ÄÇ</p>
<h1 id="7-inter-process-communication">7. Inter-Process Communication</h1>
<p>ÁÆ°ÈÅìÔºö‰ª•FIFOÁöÑÂΩ¢ÂºèÁºìÂÜ≤Êï∞ÊçÆÔºåÊúâÂåøÂêçÁÆ°ÈÅìÔºàforkÂêéÂ≠êËøõÁ®ãÁªßÊâøÊñá‰ª∂ÊèèËø∞Á¨¶ÔºâÂíåÂëΩÂêçÁÆ°ÈÅìÔºàmkfifoÔºâ‰∏§ÁßçÂÆûÁé∞ÊñπÂºè„ÄÇ</p>
<p>Ê∂àÊÅØÈòüÂàóÔºöÂõõ‰∏™Âü∫Êú¨Êìç‰ΩúÔºömsggetÔºöËé∑ÂèñÂ∑≤ÊúâÁöÑÊ∂àÊÅØÈòüÂàóËøûÊé•ÊàñËÄÖÊñ∞ÂàõÂª∫‰∏Ä‰∏™ÔºåmsgsndÂæÄÊ∂àÊÅØÈòüÂàó‰∏äÂèëÊ∂àÊÅØÔºåmsgrcvÔºöÊé•Êî∂Ê∂àÊÅØÔºàÊî∂ÂèëËøáÁ®ãÂ¶ÇÊûúÊ∂àÊÅØÈòüÂàóÂ∑≤Êª°Êàñ‰∏∫Á©∫ÔºåÂàôÈòªÂ°ûÔºâÔºåmsgctl„ÄÇ</p>
<p>‰ø°Âè∑ÈáèÔºöPÔºàProbeerÔºåÂ∞ùËØïÔºâËÆ°Êï∞Âô®Âáè‰∏ÄÔºåÊìç‰ΩúÂ§±Ë¥•‰ºöËøõÂÖ•ÈòªÂ°ûÔºåVÔºàVerhoogÔºåÂ¢ûÂä†ÔºâËÆ°Êï∞Âô®Âä†‰∏ÄÔºåÂî§ÈÜíP„ÄÇ</p>
<p>ÂÖ±‰∫´ÂÜÖÂ≠òÔºö‰∏∫ÈúÄË¶ÅÈÄö‰ø°ÁöÑËøõÁ®ãÂª∫Á´ãÂÖ±‰∫´Âå∫ÂüüÔºå‰∏ÄÊó¶Âª∫Á´ãÊàêÂäüÔºåÂ∞±‰∏çÂÜçÈúÄË¶ÅÂÜÖÊ†∏ÂèÇ‰∏éËøõÁ®ãÈó¥ÈÄö‰ø°„ÄÇ</p>
<p>‰ø°Âè∑Ôºö‰ΩøÁî®killÊàñËÄÖÊòØtgkillÂêëËøõÁ®ãÊàñÁ∫øÁ®ãÂèëÈÄÅ‰ø°Âè∑ÔºåÂÖ∂‰∏≠1ÔΩû31‰∏∫Â∏∏ËßÑ‰ø°Âè∑Ôºå32ÔΩû64‰∏∫ÂÆûÊó∂‰ø°Âè∑„ÄÇÂ§ÑÁêÜÊó∂Êú∫ÈÄöÂ∏∏Âú®ÊâßË°åÂÆåÂºÇÂ∏∏„ÄÅ‰∏≠Êñ≠„ÄÅÁ≥ªÁªüË∞ÉÁî®ËøîÂõûÊó∂„ÄÇ</p>
<p>Â•óÊé•Â≠óÔºö‰ΩøÁî®ÁâπÂÆö‚ÄúÂú∞ÂùÄ‚ÄùÊù•ÊâæÂà∞Ë¶ÅË∞ÉÁî®ÁöÑÊúçÂä°Á´ØËøõÁ®ã„ÄÇ</p>
<h1 id="8-synchronization-primitives">8. Synchronization Primitives</h1>
<p>ÁöÆÁâπÊ£ÆÁÆóÊ≥ï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">turn</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nb">true</span> <span class="o">&amp;&amp;</span> <span class="n">turn</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nf">do_critical_section</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">turn</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">flag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">true</span> <span class="o">&amp;&amp;</span> <span class="n">turn</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nf">do_critical_section</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">flag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ë¶ÅÊ±ÇËÆøÂ≠òÊìç‰Ωú‰∏•Ê†ºÈ°∫Âà©ÊâßË°å„ÄÇ</p>
<p>ÂéüÂ≠êÊìç‰ΩúÔºöCASÔºàCompare And SwapÔºâÔºå‰ª•ÂèäFAAÔºàFetch-And-AddÔºâ„ÄÇ</p>
<p>IntelÂπ≥Âè∞ÈááÁî®ÂÜÖËÅîÊ±áÁºñÊù•‰øùËØÅÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÔºåÊØîËæÉexpectedÔºàËøôÈáå+aÂΩì‰ΩúÂØÑÂ≠òÂô®%eaxÔºâÂíåaddrÁöÑÂÄºÔºåÂ¶ÇÊûúÁõ∏Á≠âÂ∞±Â≠òÂÖ•Âú∞ÂùÄaddr‰∏≠„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">atomic_CAS</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected</span><span class="p">,</span> <span class="kt">int</span> <span class="n">new_value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&#34;lock empxchg %[new], %[ptr]&#34;</span>
</span></span><span class="line"><span class="cl">                 <span class="o">:</span><span class="s">&#34;+a&#34;</span><span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="p">[</span><span class="n">ptr</span><span class="p">]</span> <span class="s">&#34;+m&#34;</span><span class="p">(</span><span class="o">*</span><span class="n">addr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="o">:</span><span class="p">[</span><span class="n">new</span><span class="p">]</span> <span class="s">&#34;r&#34;</span><span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="o">:</span><span class="s">&#34;memory&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">expected</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ARMÂπ≥Âè∞ÈááÁî®Load-LinkÂíå/Store-ConditionalÁöÑÊåá‰ª§ÁªÑÂêàÔºåÈÄöËøáCPUÁõëËßÜÂô®Êù•ÂÆûÁé∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">atomic_CAS</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">expected</span><span class="p">,</span> <span class="kt">int</span> <span class="n">new_value</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">oldval</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">asm</span> <span class="k">volatile</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;1: ldxr    %w0, %2</span><span class="se">\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;   cmp     %w0, %3</span><span class="se">\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;   b.ne    %2f</span><span class="se">\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;   stxr    %w1, %w4, %2</span><span class="se">\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;2:&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="s">&#34;=&amp;r&#34;</span> <span class="p">(</span><span class="n">oldval</span><span class="p">),</span> <span class="s">&#34;=&amp;r&#34;</span> <span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="s">&#34;+Q&#34;</span> <span class="p">(</span><span class="o">*</span><span class="n">addr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="s">&#34;r&#34;</span> <span class="p">(</span><span class="n">expected</span><span class="p">),</span> <span class="s">&#34;r&#34;</span> <span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="s">&#34;memory&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">oldval</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëá™ÊóãÈîÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">lock_init</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">lock</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">lock</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">lock</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">lock</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="nf">atomic_CAS</span><span class="p">(</span><span class="n">lock</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">unlock</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">lock</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">lock</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âπ∂‰∏ç‰øùËØÅÊúâÈôêÁ≠âÂæÖÔºåÂç≥‰∏çÂÖ∑ÊúâÂÖ¨Âπ≥ÊÄßÔºå‰ºöÈô∑ÂÖ•Âæ™ÁéØÁ≠âÂæÖ„ÄÇ</p>
<p>ÊéíÂè∑ÈîÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">lock</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">volatile</span> <span class="kt">int</span> <span class="n">owner</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">volatile</span> <span class="kt">int</span> <span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">lock_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">lock</span> <span class="o">*</span><span class="n">lock</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">lock</span><span class="o">-&gt;</span><span class="n">owner</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">lock</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">lock</span><span class="p">(</span><span class="k">struct</span> <span class="n">lock</span> <span class="o">*</span><span class="n">lock</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">volatile</span> <span class="kt">int</span> <span class="n">my_ticket</span> <span class="o">=</span> <span class="nf">atomic_FAA</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">lock</span><span class="o">-&gt;</span><span class="n">owner</span> <span class="o">!=</span> <span class="n">my_ticket</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">unlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">lock</span> <span class="o">*</span><span class="n">lock</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">lock</span><span class="o">-&gt;</span><span class="n">owner</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êù°‰ª∂ÂèòÈáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">cond</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="kr">thread</span> <span class="o">*</span><span class="n">wait_list</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">cond_wait</span><span class="p">(</span><span class="k">struct</span> <span class="n">cond</span> <span class="o">*</span><span class="n">cond</span><span class="p">,</span> <span class="k">struct</span> <span class="n">lock</span> <span class="o">*</span><span class="n">mutex</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">list_append</span><span class="p">(</span><span class="n">cond</span><span class="o">-&gt;</span><span class="n">wait_list</span><span class="p">,</span> <span class="nf">thread_self</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="nf">atomic_block_unlock</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span> <span class="c1">// ÂéüÂ≠êÊåÇËµ∑Âπ∂ÈáäÊîæÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">lock</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span> <span class="c1">// ÈáçÊñ∞Ëé∑Âæó‰∫íÊñ•ÈîÅ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">cond_signal</span><span class="p">(</span><span class="k">struct</span> <span class="n">cond</span> <span class="o">*</span><span class="n">cond</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">list_empty</span><span class="p">(</span><span class="n">cond</span><span class="o">-&gt;</span><span class="n">wait_list</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">wakeup</span><span class="p">(</span><span class="nf">list_remove</span><span class="p">(</span><span class="n">cond</span><span class="o">-&gt;</span><span class="n">wait_list</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">cond_broadcast</span><span class="p">(</span><span class="k">struct</span> <span class="n">cond</span> <span class="o">*</span><span class="n">cond</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nf">list_empty</span><span class="p">(</span><span class="n">cond</span><span class="o">-&gt;</span><span class="n">wait_list</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">wakeup</span><span class="p">(</span><span class="nf">list_remove</span><span class="p">(</span><span class="n">cond</span><span class="o">-&gt;</span><span class="n">wait_list</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖÈóÆÈ¢òÔºåÈááÁî®Êù°‰ª∂ÂèòÈáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">empty_slot</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">filled_slot</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">cond</span> <span class="n">empty_cond</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">lock</span> <span class="n">empty_cnt_lock</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">cond</span> <span class="n">filled_cond</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">lock</span> <span class="n">filled_cnt_lock</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">producer</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">new_msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_msg</span> <span class="o">=</span> <span class="nf">produce_new</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="p">(</span><span class="n">empty_slot</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_cond</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">empty_cnt_lock</span><span class="p">);</span>            
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">empty_slot</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="nf">buffer_add_safe</span><span class="p">(</span><span class="n">new_msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">filled_slot</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nf">cond_signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_cond</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">consumer</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">cur_msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">filled_slot</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_cond</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">filled_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">filled_slot</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">cur_msg</span> <span class="o">=</span> <span class="nf">buffer_remove_safe</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">empty_slot</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nf">cond_signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_cond</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_cnt_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">comsume_msg</span><span class="p">(</span><span class="n">cur_msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ø°Âè∑Èáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">sem</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">wakeup</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="k">struct</span> <span class="n">lock</span> <span class="n">sem_lock</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">cond</span> <span class="n">sem_cond</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">wait</span><span class="p">(</span><span class="k">struct</span> <span class="n">sem</span> <span class="o">*</span><span class="n">S</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">do</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nf">cond_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_cond</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">while</span><span class="p">(</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">wakeup</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">S</span><span class="o">-&gt;</span><span class="n">wakeup</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">signal</span><span class="p">(</span><span class="k">struct</span> <span class="n">sem</span> <span class="o">*</span><span class="n">S</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">S</span><span class="o">-&gt;</span><span class="n">wakeup</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nf">cond_signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_cond</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="o">-&gt;</span><span class="n">sem_lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Áîü‰∫ßËÄÖÊ∂àË¥πËÄÖÈóÆÈ¢òÔºåÈááÁî®‰ø°Âè∑Èáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">sem_t</span> <span class="n">empty_slot</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">sem_t</span> <span class="n">empty_slot</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">producer</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">new_msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">new_msg</span> <span class="o">=</span> <span class="nf">produce_new</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nf">wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_slot</span><span class="p">);</span> <span class="c1">// P
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nf">buffer_add_safe</span><span class="p">(</span><span class="n">new_msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_slot</span><span class="p">);</span> <span class="c1">// V
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">consumer</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">cur_msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">filled_slot</span><span class="p">);</span> <span class="c1">// P
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">cur_msg</span> <span class="o">=</span> <span class="nf">buffer_remove_safe</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nf">signal</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty_slot</span><span class="p">);</span> <span class="c1">// V
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nf">consume_msg</span><span class="p">(</span><span class="n">cur_msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠ªÈîÅ‰∫ßÁîüÁöÑÂéüÂõ†Ôºö</p>
<ul>
<li>‰∫íÊñ•ËÆøÈóÆ„ÄÅÊåÅÊúâÂπ∂Á≠âÂæÖ„ÄÅËµÑÊ∫êÈùûÊä¢Âç†„ÄÅÂæ™ÁéØÁ≠âÂæÖ</li>
</ul>
<p>Èì∂Ë°åÂÆ∂ÁÆóÊ≥ïÔºöÂÅáËÆæÁ≥ªÁªüÊúâM‰∏™ËµÑÊ∫êÔºåN‰∏™Á∫øÁ®ã„ÄÇ</p>
<p>ÂÖ®Â±ÄÂèØÂà©Áî®ËµÑÊ∫êAvailable[M]ÔºåÊØè‰∏™Á∫øÁ®ãÊúÄÂ§ßÈúÄÊ±ÇMax[N][M]ÔºåÂ∑≤ÂàÜÈÖçËµÑÊ∫êAllocation[N][M]ÔºåËøòÈúÄË¶ÅÂàÜÈÖçÁöÑËµÑÊ∫êNeed[N][M]„ÄÇÂêåÊó∂Ôºå‰øùËØÅ‰æõÁªôÂÖ≥Á≥ªÂõ∫ÂÆö„ÄÇÁ∫øÁ®ãÁöÑÈúÄÊ±Ç‰∏çËÉΩË∂ÖËøáÊÄªÈáèÔºå‰ªªÊÑèÁ∫øÁ®ãÂàÜÈÖçÁöÑËµÑÊ∫êÂä†‰∏äËøòÈúÄË¶ÅÁöÑËµÑÊ∫êÂ∞èÈõ®ËØ•Á∫øÁ®ãÁöÑÊúÄÂ§ßÈúÄÊ±Ç„ÄÇÁ∫øÁ®ãËé∑ÂæóËµÑÊ∫êÂêéÔºåÊúâÈôêÊó∂Èó¥ËÉΩÂÆåÊàêÔºåÂπ∂‰∏îÊúÄÂêé‰ºöÈáäÊîæËøô‰∫õËµÑÊ∫ê„ÄÇ</p>
<p>‰ºòÂÖàÁ∫ßÂèçËΩ¨ÈÅøÂÖçÔºö‰ºòÂÖàÁ∫ßÁªßÊâøÂçèËÆÆÔºàPriority Inheritance protocolÔºâÔºöÈ´ò‰ºòÂÖàÁ∫ßÁ≠âÂæÖÈîÅÊó∂Ôºå‰ºö‰ΩøÊåÅÊúâËÄÖÁªßÊâøÂÖ∂‰ºòÂÖàÁ∫ßÔºåÈÅøÂÖç‰∏¥ÁïåÂå∫Ë¢´‰Ωé‰ºòÂÖàÁ∫ßÊâìÊñ≠„ÄÇ</p>
<h1 id="9-file-system">9. File System</h1>
<p>Index NodeÔºöËÆ∞ÂΩïÊñá‰ª∂Á¥¢ÂºïËäÇÁÇπÔºàÂç≥Â≠òÂÇ®ÂùóÔºå‰ΩøÁî®ls -iÊü•ÁúãÔºåstatÔºâÔºåinode‰øùÂ≠ò‰∏âÂùóÊåáÈíàÔºå‰∏ÄÁßçÁõ¥Êé•ÊåáÂêëÊï∞ÊçÆÂùóÔºå‰∏ÄÁßçÊòØÈó¥Êé•ÊåáÂêë‰∏Ä‰∏™‰∏ÄÁ∫ßÁ¥¢ÂºïÂùóÔºå‰∏ÄÁßçÊòØ‰∫åÁ∫ßÊåáÈíàÊåáÂêë‰∏ÄÁ∫ßÁ¥¢Âºï„ÄÇ</p>
<p>inode‰πü‰øùÂ≠òÁùÄÊñá‰ª∂Ê®°Âºè„ÄÅÈìæÊé•Êï∞„ÄÅÊã•ÊúâËÄÖÁî®Êà∑ÁªÑÔºåÂ§ßÂ∞è„ÄÅËÆøÈóÆÊó∂Èó¥Á≠â‰ø°ÊÅØ„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Symbol</th>
<th>File type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>Ordinary or regular files</td>
<td>Contain data of various content types such as text, script, image, videos, etc.</td>
</tr>
<tr>
<td>d</td>
<td>Directory files</td>
<td>Contain the name and address of other files.</td>
</tr>
<tr>
<td>b &amp; c</td>
<td>Block or character special files</td>
<td>Represent device files such as hard drives, monitors, etc.</td>
</tr>
<tr>
<td>l</td>
<td>Link files</td>
<td>Point or mirror other files</td>
</tr>
<tr>
<td>s</td>
<td>Socket files</td>
<td>Provide inter-process communication</td>
</tr>
<tr>
<td>p</td>
<td>Named pipe files</td>
<td>Allow processes to send data to other processes or receive data from other processes.</td>
</tr>
</tbody>
</table></div>
<p>ÁõÆÂΩïÂ§ßÂ∞èÂç≥ËÆ∞ÂΩïÁöÑÊñá‰ª∂Êï∞Èáè‰ª•ÂèäÊñá‰ª∂ÂêçÈïøÂ∫¶ÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p>ÊØè‰∏™inodeÂèØ‰ª•Ë¢´Â§ö‰∏™ÁõÆÂΩïÈ°πÊåáÂêëÔºåËØ•ÈìæÊé•Êï∞‰∏∫0Êó∂ÔºåinodeËµÑÊ∫êÂíåÊï∞ÊçÆÂèØ‰ª•Ë¢´ÈîÄÊØÅ„ÄÇ</p>
<p>Virtual File SystemÔºöÈÄöËøáÂü∫‰∫éinodeËÆæËÆ°‰∫Ü‰∏ÄÁ≥ªÂàóÊï∞ÊçÆÁªìÊûÑÔºåÂåÖÊã¨Ë∂ÖÁ∫ßÂø´ÔºåinodeÔºåÁõÆÂΩïÈ°πÁ≠âÔºåVFSÈöêËîΩ‰∫ÜÂÆûÁé∞ÁªÜËäÇ„ÄÇ</p>
<p>mountÔºöÊñá‰ª∂ËÆøÈóÆÂà∞ÊåÇËΩΩÁÇπÔºåÂ∞±‰ºöË∑≥ËΩ¨Âà∞ÊåÇËΩΩÁÇπÁöÑÊ†πÁõÆÂΩïËÆøÈóÆ„ÄÇ</p>
<p>Pseudo File SystemÔºàSynthetic file systemÔºâÔºöÂ∏∏ËßÅÁöÑ‰º™Êñá‰ª∂Á≥ªÁªüÂ¶Ç/procÔºå/sysÔºå/sys/kernel/configÁ≠â„ÄÇ</p>
<h1 id="10-device-management">10. Device Management</h1>
<p>Peripheral Component InterconnectÔºöPCIÊ†áÂáÜÔºåÊª°Ë∂≥Áî®‰∫éPCIÊèíÊßΩ‰∏éCPUÈ´òÊïàÈÄö‰ø°</p>
<p>Data Memory AccessÔºåDMAÔºöËÆæÂ§á‰∏éÂÜÖÂ≠ò‰πãÈó¥È´òÊïàÊï∞ÊçÆ‰º†ËæìÂΩ¢Âºè„ÄÇ‰∏ÄËà¨Êúâ‰∏â‰∏™ÊµÅÁ®ã</p>
<ul>
<li>Â§ÑÁêÜÂô®ÂêëDMAÂèëÈÄÅËá≥ÁºìÂÜ≤Âå∫ÁöÑ‰ΩçÁΩÆÂíåÈïøÂ∫¶Ôºå‰ª•ÂèäÊï∞ÊçÆÊñπÂêë„ÄÇ</li>
<li>DMAËé∑ÂæóÊÄªÁ∫øÊéßÂà∂ÊùÉÔºåÂèØ‰ª•Áõ¥Êé•ÂíåÂÜÖÂ≠ò‰∏éËÆæÂ§áËøõË°åÈÄö‰ø°„ÄÇ</li>
<li>DMAÊéßÂà∂Âô®Â∞ÜÊ†πÊçÆÂ§ÑÁêÜÂô®Ëé∑ÂæóÁöÑÂëΩ‰ª§ÔºåÂ∞ÜËÆæÂ§áÊï∞ÊçÆÊã∑Ë¥ùËá≥ÂÜÖÂ≠òÔºåËøôÊúüÈó¥Â§ÑÁêÜÂô®ÂèØ‰ª•ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°</li>
<li>ÂÆåÊàêÂêéÔºåDMAÊéßÂà∂Âô®ÂêëÂ§ÑÁêÜÂô®ÂèëÈÄÅ‰∏≠Êñ≠ÔºåÊ≠§Êó∂Â§ÑÁêÜÂô®ÈáçÊñ∞Ëé∑ÂæóÊÄªÁ∫øÁöÑÊéßÂà∂ÊùÉ„ÄÇ</li>
</ul>
<p>Generic Interrupt ControllerÔºöARM‰∏ãÁöÑÈÄöÁî®‰∏≠Êñ≠ÊéßÂà∂Âô®ÔºåË¥üË¥£ÂØπËÆæÂ§áÁöÑ‰∏≠Êñ≠‰ø°Âè∑Â§ÑÁêÜ„ÄÇÊØè‰∏™‰∏≠Êñ≠ÊúâÂõõÁßçÁä∂ÊÄÅÔºö</p>
<ul>
<li>InactiveÔºöÊó†ÊïàÔºåÊ≠§Êó∂‰∏≠Êñ≠Êú™Âà∞Êù•„ÄÇ</li>
<li>PendingÔºöÊúâÊïàÁä∂ÊÄÅÔºå‰∏≠Êñ≠Â∑≤ÂèëÁîüÔºåCPUÊú™ÂìçÂ∫î‰∏≠Êñ≠„ÄÇ</li>
<li>ActiveÔºöCPUÂ§Ñ‰∫éÂìçÂ∫îÂπ∂Â§ÑÁêÜ‰∏≠Êñ≠ÁöÑËøáÁ®ã‰∏≠„ÄÇ</li>
<li>Active &amp; PendingÔºöÂ§ÑÁêÜ‰∏≠Êñ≠Êó∂ÔºåÊúâÁõ∏ÂêåÁöÑ‰∏≠Êñ≠Âè∑ÂèëÁîü„ÄÇ</li>
</ul>
<p>LinuxÊìç‰ΩúÁ≥ªÁªü‰∏≠Ôºå‰∏≠Êñ≠ÂàÜ‰∏∫‰∏äÂçäÈÉ®Âíå‰∏ãÂçäÈÉ®„ÄÇ‰∏äÂçäÈÉ®Â§ÑÁêÜÊó∂ÔºåÂÖ≥Èó≠‰∏≠Êñ≠ÔºåÂÅö‰∏Ä‰∫õ‰∏•Ê†ºÊúâÊó∂ÈôêÁöÑÂ∑•‰ΩúÔºåÂ¶ÇÂ∫îÁ≠îÂπ∂‰∏îÂ§ç‰ΩçÁ°¨‰ª∂„ÄÇÂÆåÊàêÂêéÂêë‰∏≠Êñ≠ÊéßÂà∂Âô®Â£∞Êòé‰∏≠Êñ≠Â§ÑÁêÜÂô®Âπ∂ÂºÄ‰∏≠Êñ≠ÔºåËÆæÂ§áÈ©±Âä®ÈÄöËøá‰ª•‰∏ãÂáΩÊï∞Êù•Ê≥®ÂÜå/ÈáäÊîæÁõ∏Â∫îËÆæÂ§áÁ°¨‰∏≠Êñ≠„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">typedef</span> <span class="nf">irqreturn_t</span> <span class="p">(</span><span class="o">*</span><span class="kt">irq_headler_t</span><span class="p">)(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">request_irq</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="c1">// ‰∏çÂêåËÆæÂ§áÁöÑ‰∏≠Êñ≠Âè∑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                 <span class="kt">irq_handler_t</span> <span class="n">handler</span><span class="p">,</span> <span class="c1">// ÊåáÂêëËøô‰∏™‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÁöÑÊåáÈíà
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                 <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">,</span> <span class="c1">// Ê†áÂøóÊé©Á†ÅÔºåÂ¶ÇÂÖ≥‰∏≠Êñ≠Á≠â
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="c1">// ‰∏≠Êñ≠ËÆæÂ§áÂêçÁß∞ÁöÑÁöÑASCIIË°®Á§∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                 <span class="kt">void</span><span class="o">*</span> <span class="n">dev</span><span class="p">)</span> <span class="c1">// ÂÖ±‰∫´‰∏≠Êñ≠ÊÄªÁ∫øÔºåÊ†áÂøó‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫è
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">free_irq</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="c1">// Ê≥®ÈîÄ‰∏≠Êñ≠Â§ÑÁêÜÁ®ãÂ∫èÔºåÈáäÊîæ‰∏≠Êñ≠Á∫ø
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>              <span class="kt">void</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span> <span class="c1">// Â¶ÇÊûú‰∏≠Êñ≠ÊÄªÁ∫øÂÖ±‰∫´ÔºåÂàô‰ªÖÂà†Èô§devÂØπÂ∫îÁöÑÂ§ÑÁêÜÁ®ãÂ∫è
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËΩØ‰∏≠Êñ≠ÔºöÂ§ÑÁêÜÂáΩÊï∞Ë¶ÅÊ±ÇÊòØÂèØÈáçÂÖ•ÁöÑÔºåË¶ÅÊ±ÇËΩØ‰∏≠Êñ≠ÁöÑÊâßË°åËøáÁ®ã‰∏≠ÂèØ‰ª•Ë¢´Á°¨‰∏≠Êñ≠Êä¢Âç†„ÄÇÊâÄ‰ª•ÔºåËΩØ‰∏≠Êñ≠Êó∂Â∫îËØ•ÈÅøÂÖçÂÖ®Â±ÄÂèòÈáèÔºåÊàñËÄÖÂä†ÈîÅ‰øùÊä§ÂÖ≥ÈîÆÊï∞ÊçÆÁªìÊûÑ„ÄÇLinuxÂÖ±Êúâ10Áßç‰∏≠Êñ≠‰ø°Âè∑Ôºå‰ªéTASKLET_HIÂæÄ‰∏ãÂåÖÊã¨ÂÆöÊó∂Âô®ÔºåÁΩëÂç°Êî∂ÂèëÔºåÂùóËÆæÂ§á‰∏≠Êñ≠Á≠â„ÄÇÂÜÖÊ†∏‰ºöÈÄâÊã©ÊÅ∞ÂΩìÊó∂Êú∫Êù•Â§ÑÁêÜËΩØ‰∏≠Êñ≠ÔºàÂ§ßÂ§öÊï∞Êó∂Èó¥Âú®Á°¨‰∏≠Êñ≠ÂæóÂà∞Â§ÑÁêÜÂêéÔºåÈô§ÈùûCPUËøòÊåÅÊúâÊú™ÊâßË°åÁöÑËΩØ‰∏≠Êñ≠Ôºâ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">softirq_action</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">action</span><span class="p">)(</span><span class="k">struct</span> <span class="n">softirq_action</span> <span class="o">*</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ËΩØ‰∏≠Êñ≠Âú®ÁºñËØëÈò∂ÊÆµÈùôÊÄÅÂàÜÈÖçÔºåÊúÄÂ§öÂè™ËÉΩÊúâ32‰∏™
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="k">struct</span> <span class="n">softirq_action</span> <span class="n">softirq_vec</span><span class="p">[</span><span class="n">NR_SOFTIRQS</span><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöÂ∏∏Ê†áËÆ∞‰∫ÜËΩØ‰∏≠Êñ≠ÂêéÊâßË°åÁöÑÂú∫ÊôØÊúâÔºö1.‰ªéÁ°¨‰ª∂‰∏≠Êñ≠‰ª£Á†ÅËøîÂõûÊó∂Ôºõ2.Âú®ksoftirqdÂÜÖÊ†∏Á∫øÁ®ã‰∏≠Ôºõ3.Âú®ÈÇ£‰∫õÊòæÁ§∫Ê£ÄÊü•ÂíåÊâßË°åÂæÖÂ§ÑÁêÜÁöÑËΩØ‰∏≠Êñ≠‰ª£Á†Å‰∏≠ÔºåÂ¶ÇÁΩëÁªúÂ≠êÁ≥ªÁªü„ÄÇ</p>
<p>taskletÔºöËΩØ‰∏≠Êñ≠Âè™ËÉΩÁºñËØëÊó∂ÈùôÊÄÅÂàÜÈÖçÔºå‰∏∫‰∫ÜÂä®ÊÄÅÂàÜÈÖçËÆæËÆ°‰∫ÜtaskletÔºåÊØè‰∏™taskletÂè™ÊúâSCHEDÔºàÂ∑≤Ë¢´Ë∞ÉÂ∫¶Êú™ÊâßË°åÔºâÂíåRUNÔºàÊ≠£Âú®ÊâßË°åÔºâÔºåÂ∞ÜÊâÄÊúâtaskletÁî®ÈìæË°®‰∏≤Ëµ∑Êù•„ÄÇÊ≠§Â§ñtasklet‰∏çÂÖÅËÆ∏Â§öCPUÂπ∂ÂèëÊâßË°åÔºåÂêåÊó∂‰øùËØÅÂéüÂ≠êÊÄßÔºå‰∏çÂÖÅËÆ∏Ë¢´ÂÖ∂‰ªñ‰∏ãÂçäÈÉ®Êú∫Âà∂Êä¢Âç†ÔºåÊª°Ë∂≥ÂèØÈáçÂÖ•ÊÄß„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">tasklet_strcut</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span> <span class="c1">// ÈìæË°®‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™tasklet
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">state</span><span class="p">;</span> <span class="c1">// ‰∏â‰∏™Áä∂ÊÄÅÔºö0ÔºåÂáÜÂ§áËøêË°åÔºåÊ≠£Âú®ËøêË°åÔºà‰ªÖÈôêÂ§öÊ†∏‰Ωú‰∏∫‰ºòÂåñ‰ΩøÁî®Ôºâ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">atomic_t</span> <span class="n">count</span><span class="p">;</span>      <span class="c1">// ÂºïÁî®ËÆ°Êï∞Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span> <span class="c1">// taskletÂ§ÑÁêÜÂáΩÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data</span><span class="p">;</span>  <span class="c1">// ÁªôtaskletÂ§ÑÁêÜÁî®ÁöÑÂèÇÊï∞
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Work QueueÔºöÊääÈúÄË¶ÅÊé®ËøüÁöÑÂáΩÊï∞ÊîæÂú®‰∏ãÂçäÈÉ®ÔºåÁî®ÂÜÖÊ†∏Á∫øÁ®ãÊù•ÊâßË°å„ÄÇWork QueueÁî±È©±Âä®ÂºÄÂèëËÄÖËá™Â∑±ÂÆö‰πâÔºåÂπ∂‰∏îÁî±‰∫éÂÖ∂ÊòØ‰∏≤Ë°åÁöÑÔºåÂèØËÉΩ‰∫ßÁîüÈòªÂ°ûÔºå‰πü‰ºöÊµ™Ë¥πPIDËµÑÊ∫ê„ÄÇ</p>
<p>Concurrency Managed WorkQueueÔºöÂ∞ÜÂ∑•‰ΩúÈòüÂàóÁÆ°ÁêÜËøòÁªôÂÜÖÊ†∏ÔºåÂêå‰∏Ä‰∏™ÈòüÂàóÁöÑwork‰∏çÈÅµÂÆà‰∏≤Ë°åÔºåÂèØ‰ª•Âπ∂ÂèëÊâßË°åÔºåÂ¶ÇÊûúÊúâ‰ªªÂä°ÈïøÊó∂Èó¥Ë∂≥È¢ùÔºåÈÇ£‰πàCMWQ‰ºöËá™Âä®ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÂéªÂ§ÑÁêÜËØ•‰ªªÂä°ÂêéÁª≠ÁöÑÂ∑•‰Ωú„ÄÇ</p>
<h1 id="11-system-virtualization">11. System Virtualization</h1>
<p>CPUËôöÊãüÂåñÔºöÈÄöËøávCPUÊäΩË±°ÊâßË°åÊåá‰ª§ÔºåÁõ¥Êé•ËøêË°åÂú®Áâ©ÁêÜÊú∫‰∏äÔºå‰ΩøÁî®Áâ©ÁêÜISA„ÄÇËôöÊãüÊú∫Ê®°Êãü‰∏Ä‰∏™ÂÆâÂÖ®ÁöÑ‰∏ãÈô∑ÁöÑËøáÁ®ã„ÄÇ</p>
<p>ÂÜÖÂ≠òËôöÊãüÂåñÔºö‰ΩøÁî®ÂÆ¢Êà∑Áâ©ÁêÜÂú∞ÂùÄ‰∏é‰∏ªÊú∫Áâ©ÁêÜÂú∞ÂùÄÔºåÂΩ±Â≠êÈ°µË°®Êú∫Âà∂</p>
<p>IOËôöÊãüÂåñÔºö‰∏ªÂºïÂØºËÆ∞ÂΩïÔºåÂÖ®Â±ÄÂîØ‰∏ÄÊ†áËØÜÂàÜÂå∫Ë°®„ÄÇ</p>
<h1 id="12-multi-core-processor">12. Multi-core processor</h1>
<p>ÊúÄÂ∞èÁöÑÊìç‰ΩúÁ≤íÂ∫¶ÔºàCache LineÔºâÔºö‰∏ÄËà¨ÊòØ64Â≠óËäÇÔºåÈÄöÂ∏∏L1 Cache Ëøõ‰∏ÄÊ≠•ÂàíÂàÜ‰∏∫ÂçïÁã¨ÁöÑÊï∞ÊçÆÁºìÂ≠òÔºàData CacheÔºâ‰∏éÊåá‰ª§ÁºìÂ≠òÔºàInstruction CacheÔºâ„ÄÇÊâÄÊúâÊ†∏ÂøÉÂÖ±‰∫´ÊúÄÊú´Á∫ßÁºìÂ≠òÔºàLast Level CacheÔºåLLCÔºâ„ÄÇ</p>
<p>Áõ¥ÂÜôÁ≠ñÁï•ÔºàWrite ThroughÔºâÔºöÂú®ÂÜôÊó∂ÔºåÁ´ãÂàªÂ∞Ü‰øÆÊîπÁöÑÂÄºÂà∑ÂõûÂÜÖÂ≠òÔºàËØ•ÂÄº‰ºöÂêåÊó∂‰øùÁïôÂú®È´òÈÄüÁºìÂ≠ò‰∏≠Ôºâ„ÄÇ</p>
<p>ÂÜôÂõûÁ≠ñÁï•ÔºàWrite BackÔºâÔºöÂ∞ÜÂÄºÊöÇÊó∂Â≠òÂú®È´òÈÄüÁºìÂ≠ò‰∏≠„ÄÇÂè™ÊúâÂú®Âá∫Áé∞È´òÈÄüÁºìÂ≠òÈÄêÂá∫ÔºàCache EvictionÔºâÔºåÊàñÊòØCPU Ê†∏ÂøÉË∞ÉÁî®ÂÜôÂõûÊåá‰ª§Êó∂Ôºå‰øÆÊîπÊâç‰ºöË¢´Êõ¥Êñ∞Ëá≥Áâ©ÁêÜÂÜÖÂ≠ò„ÄÇ</p>
<p>Èùû‰∏ÄËá¥ÁºìÂ≠òËÆøÈóÆÔºàNon-Uniform Cache AccessÔºåNUCAÔºâÔºö‰∏çÂêåÊ†∏ÂøÉËÆøÈóÆÊó∂Âª∂‰ºö‰æùÊçÆÁºìÂ≠òË°åÊâÄÂú®‰ΩçÁΩÆÊúâÊâÄÂ∑ÆÂà´„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">a</span><span class="o">++</span> 
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;b = &#34;</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">b</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;a = &#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜÖÂ≠ò‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºàMemory Consistency ModelÔºåÁÆÄÁß∞‰∏∫ÂÜÖÂ≠òÊ®°ÂûãÔºâÊòéÁ°ÆÂÆö‰πâ‰∫Ü‰∏çÂêåÊ†∏ÂøÉÂØπ‰∫éÂÖ±‰∫´ÂÜÖÂ≠òÊìç‰ΩúÈúÄË¶ÅÈÅµÂæ™ÁöÑÈ°∫Â∫è„ÄÇ‰ª•‰∏äËø∞‰ª£Á†Å‰∏∫‰æãÔºå‰∏çÂêåÊÉÖÂÜµ‰∏ã(a, b)ÂèØËÉΩÁöÑÂèñÂÄºËåÉÂõ¥(0, 0), (1, 0), (0, 1), (1, 1)‰πü‰ºöÂèëÁîüÊîπÂèò„ÄÇ</p>
<p>‰∏•Ê†º‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºàStrict ConsistencyÔºâÔºöÊâÄÊúâËÆøÂ≠òÊìç‰ΩúÈÉΩÊòØ‰∏•Ê†ºÊåâÁ®ãÂ∫èÈ°∫Â∫è„ÄÇ</p>
<p>È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºàSequential ConsistencyÔºâÔºö‰∏çÂêåÊ†∏ÂøÉÁúãÂà∞ÁöÑËÆøÂ≠òÊìç‰ΩúÈ°∫Â∫èÂÆåÂÖ®‰∏ÄËá¥ÔºåËøô‰∏™È°∫Â∫èÁß∞‰∏∫ÂÖ®Â±ÄÈ°∫Â∫è„ÄÇÂú®ËøôÁßçÊ®°Âûã‰∏ãÔºå‰∏çÂèØËÉΩÂá∫Áé∞(a, b)=(0, 0)ÁöÑÊÉÖÂÜµ„ÄÇ</p>
<p>TSO‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºàTotal Store OrderingÔºâÔºö‰øùËØÅÂØπ<strong>‰∏çÂêåÂú∞ÂùÄ‰∏îÊó†‰æùËµñ</strong>ÁöÑËØªËØª„ÄÅËØªÂÜô„ÄÅÂÜôÂÜôÊìç‰Ωú‰πãÈó¥ÁöÑÂÖ®Â±ÄÂèØËßÅÈ°∫Â∫èÔºåÂè™ÊúâÂÜôËØªÁöÑÂÖ®Â±ÄÂèØËßÅÈ°∫Â∫è‰∏çËÉΩÂæóÂà∞‰øùËØÅ„ÄÇÈÄöËøáÂä†ÂÖ•ÂÜôÁºìÂÜ≤Êù•ÂÆûÁé∞Ëøô‰∏™Êìç‰ΩúÔºåËøôÂÖÅËÆ∏‰∫Ü(0, 0)ÂèØËÉΩÁöÑÂá∫Áé∞„ÄÇ</p>
<p>PSO‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºàPartial Store OrderingÔºâÔºöIs a more relaxed memory consistency model compare to the Total Store Ordering (TSO). PSO is essentially TSO with one additional relaxation to the consistency: PSO only guarantees writes to the same location is in order whereas writes to different memory location may not be in order at all. The processor may rearrange writes so that a sequence of write to memory system may not be in their original order.</p>
<p>Âº±Â∫è‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºàWeak-ordering ConsistencyÔºâÔºö‰∏ç‰øùËØÅ‰ªª‰Ωï‰∏çÂêåÂú∞ÂùÄ‰∏îÊó†‰æùËµñÁöÑËÆøÂ≠òÊìç‰Ωú‰πãÈó¥ÁöÑÈ°∫Â∫èÔºå‰πüÂç≥ËØªËØªÔºåËØªÂÜôÔºåÂÜôËØª‰∏éÂÜôÂÜôÊìç‰Ωú‰πãÈó¥ÈÉΩÂèØ‰ª•‰π±Â∫èÂÖ®Â±ÄÂèØËßÅ„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th></th>
<th>ËØªËØª</th>
<th>ËØªÂÜô</th>
<th>ÂÜôËØª</th>
<th>ÂÜôÂÜô</th>
</tr>
</thead>
<tbody>
<tr>
<td>‰∏•Ê†º‰∏ÄËá¥ÊÄßÊ®°Âûã</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>È°∫Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>TSO‰∏ÄËá¥ÊÄßÊ®°Âûã</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚úÖ</td>
</tr>
<tr>
<td>PSO‰∏ÄËá¥ÊÄßÊ®°Âûã</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚úÖÔºàÂêå‰ΩçÁΩÆÔºâ/‚ùåÔºà‰∏çÂêåÔºâ</td>
</tr>
<tr>
<td>Âº±Â∫è‰∏ÄËá¥ÊÄßÊ®°Âûã</td>
<td>‚ùå</td>
<td>‚ùå</td>
<td>‚ùå</td>
<td>‚ùå</td>
</tr>
</tbody>
</table></div>
<p>Á°¨‰ª∂ÂÜÖÂ≠òÂ±èÈöúÔºàBarrier/FenceÔºåÁÆÄÁß∞ÂÜÖÂ≠òÂ±èÈöúÔºâ:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// Any of these GNU inline assembler statements forbids the GCC compiler 
</span></span></span><span class="line"><span class="cl"><span class="c1">// to reorder read and write commands around it:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">asm</span> <span class="nf">volatile</span> <span class="p">(</span><span class="s">&#34;&#34;</span><span class="o">:::</span><span class="s">&#34;memory&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">__asm__</span> <span class="nf">__volatile__</span> <span class="p">(</span><span class="s">&#34;&#34;</span> <span class="o">:::</span> <span class="s">&#34;memory&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// This C11/C++11 function forbids the compiler  
</span></span></span><span class="line"><span class="cl"><span class="c1">// to reorder read and write commands around it:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">atomic_signal_fence</span><span class="p">(</span><span class="n">memory_order_acq_rel</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="table-wrapper"><table>
<thead>
<tr>
<th></th>
<th>Âº±È°∫Â∫è‰∏ÄËá¥ÊÄß</th>
<th>TSO‰∏ÄËá¥ÊÄßÊ®°Âûã</th>
<th>È°∫Â∫è‰∏ÄËá¥ÊÄß</th>
</tr>
</thead>
<tbody>
<tr>
<td>‰ΩìÁ≥ªÁªìÊûÑ</td>
<td>ARMÔºåPowerPC</td>
<td>x86</td>
<td>Dual386ÔºåMIPS R10000</td>
</tr>
<tr>
<td>‰ΩøÁî®Âú∫ÊôØ</td>
<td>ÂµåÂÖ•ÂºèÔºåÊâãÊú∫/Âπ≥ÊùøÔºåÈ´òÊÄßËÉΩÊúçÂä°Âô®</td>
<td>Ê°åÈù¢ÁîµËÑëÔºåÈ´òÊÄßËÉΩÊúçÂä°Âô®</td>
<td>Â∑≤Ë¢´Ê∑òÊ±∞</td>
</tr>
</tbody>
</table></div>
<p>‰æùËµñÂÖ≥Á≥ªÔºöÊï∞ÊçÆ‰æùËµñÔºàË¶ÅÂÜôÂÖ•ÁöÑÊüêÂÄºÔºå‰æùËµñÂè¶‰∏Ä‰∏™ËøêË°åÁªìÊûúÔºåJavaÁöÑÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®‰ºöÊª°Ë∂≥Ëøô‰∏™‰æùËµñÊÄßÔºâÔºõÂú∞ÂùÄ‰æùËµñÔºàÂ¶ÇÂÜôÊìç‰ΩúÈúÄË¶ÅÂÜôÁöÑÂú∞ÂùÄ‰æùËµñ‰∫éËØªÊìç‰ΩúËØªÂá∫Êù•ÁöÑÂÄºÔºâ„ÄÅÊéßÂà∂‰æùËµñÔºàÂ¶ÇÂÜôÊìç‰ΩúÂè™ÊúâÂú®ËØªÊìç‰ΩúÁªìÊùüÂàÜÊîØÊª°Ë∂≥ÂêéÊâçËÉΩÊâßË°åÔºâ„ÄÇ</p>
<p>ÈáçÊéíÂ∫èÁºìÂÜ≤Âå∫ÔºàRe-Order Buffer, ROBÔºâÔºåËÆ©Êåá‰ª§ÊåâÁÖßÁ®ãÂ∫èÈ°∫Â∫èÈÄÄÂΩπÔºàRetireÔºâÂØπÂ∫îÈ°∫Â∫èÊâßË°å‰∏≠ÁöÑÊâßË°åÁªìÊùüÔºåÂÖ∂ÊÑèÂë≥ÁùÄËØ•Êù°Êåá‰ª§ÂØπÁ≥ªÁªüÁöÑÂΩ±ÂìçÁªàÂ∞ÜÂÖ®Â±ÄÂèØËßÅ„ÄÇ</p>
<p>Â≠òÂèñÂçïÂÖÉÔºàLoad/Store UnitÔºåLSUÔºâ‰∏≠È¢ÑÁïô‰∫ÜËØªÁºìÂÜ≤Âå∫‰∏éÂÜôÁºìÂÜ≤Âå∫„ÄÇ</p>
<p>ÈòøÂßÜËææÂ∞îÂÆöÂæãÔºàAmdahl‚Äôs LawÔºâÁî®‰ª•ÊèèËø∞Âπ∂Ë°åËÆ°ÁÆóÁöÑÂä†ÈÄüÊØîÔºö$S = \frac{1}{(1 ‚àí p) + \frac{p}{s}}$</p>
<p>ÂÖ∂‰∏≠ S ÊèèËø∞Âä†ÈÄüÊØîÔºåp ‰∏∫Á®ãÂ∫è‰∏≠ÂèØ‰ª•Âπ∂Ë°åÁöÑÈÉ®ÂàÜÊâÄÂç†ÊØî‰æãÔºà$0‚â§p‚â§1$ÔºâÔºåËÄå s ‰∏∫ÂèØ‰ª•Âπ∂Ë°åÈÉ®ÂàÜÁöÑÂä†ÈÄüÊØî„ÄÇÂú®ÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊàë‰ª¨Â¶ÇÊûúÊúâN ‰∏™Ê†∏ÔºåÊ≠§Êó∂ÁöÑÂπ∂Ë°åÈÉ®ÂàÜÂä†ÈÄüÊØî‰∏∫$s = N$„ÄÇ</p>
<h1 id="-docker">*. Docker</h1>
<h2 id="1-namespace">*.1. namespace</h2>
<p>ÂÆπÂô®Êú¨Ë∫´‰Ωú‰∏∫ÂÆø‰∏ªÊú∫‰∏äÁöÑ‰∏Ä‰∏™ËøõÁ®ãÔºåÈÄöËøánamespaceÂÆûÁé∞ËµÑÊ∫êÈöîÁ¶ªÔºåcgroupsÂÆûÁé∞ËµÑÊ∫êÈôêÂà∂ÔºåÈÄöËøácopy-on-writeÂÆûÁé∞‰∫ÜÈ´òÊïàÁöÑÊñá‰ª∂Êìç‰Ωú„ÄÇ</p>
<p>namespace ÈöîÁ¶ªÊú∫Âà∂Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>namespace</th>
<th>Á≥ªÁªüË∞ÉÁî®ÂèÇÊï∞</th>
<th>ÈöîÁ¶ªÂÜÖÂÆπ</th>
</tr>
</thead>
<tbody>
<tr>
<td>UTS</td>
<td>CLONE_NEWUTS</td>
<td>‰∏ªÊú∫ÂêçÂíåÂüüÂêç</td>
</tr>
<tr>
<td>IPC</td>
<td>CLONE_NEWIPC</td>
<td>‰ø°Âè∑ÈáèÔºåÊ∂àÊÅØÈòüÂàóÔºåÂÖ±‰∫´ÂÜÖÂ≠ò</td>
</tr>
<tr>
<td>PID</td>
<td>CLONE_NEWPID</td>
<td>ËøõÁ®ãÁºñÂè∑</td>
</tr>
<tr>
<td>NetWork</td>
<td>CLONE_NEWNET</td>
<td>ÁΩëÁªúËÆæÂ§áÔºåÁΩëÁªúÊ†àÔºåÁΩëÁªúÁ´ØÂè£Á≠â</td>
</tr>
<tr>
<td>Mount</td>
<td>CLONE_NEWNS</td>
<td>ÊåÇËΩΩÁÇπÔºàÊñá‰ª∂Á≥ªÁªüÔºâ</td>
</tr>
<tr>
<td>User</td>
<td>CLONE_NEWUSER</td>
<td>Áî®Êà∑ÂíåÁî®Êà∑ÁªÑ</td>
</tr>
</tbody>
</table></div>
<p>Á≥ªÁªüË∞ÉÁî®ÊñπÂºèÔºöclone(), setns(), unshare(), ‰ª•Âèä/proc‰∏ãÁöÑËôöÊãüÊñá‰ª∂„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#inclue&lt;unistd.h&gt;
</span></span></span><span class="line"><span class="cl"><span class="cp">#inclue&lt;sys/types.h&gt;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// fork - create a child process
</span></span></span><span class="line"><span class="cl"><span class="c1">// ‰º†ÁªüÂàõÂª∫ËøõÁ®ãÁöÑÊñπÂºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">pid_t</span> <span class="nf">fork</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;sched.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">// clone - create a child process
</span></span></span><span class="line"><span class="cl"><span class="c1">// ÊòØforkÊõ¥Âä†ÈÄöÁî®ÁöÑÂÆûÁé∞ÊñπÂºèÔºåÂèØ‰ª•‰ΩøÁî®flagÊù•ÂÆûÁé∞ÂäüËÉΩ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">clone</span><span class="p">(</span><span class="kt">int</span> <span class="p">(</span><span class="n">fn</span><span class="o">*</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">),</span> <span class="kt">void</span> <span class="o">*</span><span class="n">stack</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="p">...);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// setns - reassociate thread with a namespace
</span></span></span><span class="line"><span class="cl"><span class="c1">// Âä†ÂÖ•Áé∞ÊúâÁöÑnamespace‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">setns</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nstype</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// setns - reassociate thread with a namespace
</span></span></span><span class="line"><span class="cl"><span class="c1">// Âú®ÂéüËøõÁ®ã‰∏äËøõË°ånamespaceÈöîÁ¶ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">unshare</span><span class="p">(</span><span class="kt">int</span> <span class="n">flags</span><span class="p">);</span> <span class="c1">// DockerÂπ∂Êú™ÈááÁî®
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>UTS(Unix Time-haring System) namespace: Êèê‰æõ‰∫Ü‰∏ªÊú∫ÂíåÂüüÂêçÁöÑÈöîÁ¶ªÔºåËøôÊ†∑ÊØè‰∏™ÂÆπÂô®‰æøÂèØ‰ª•ËßÜ‰ΩúÁã¨Á´ãËäÇÁÇπËÄåÈùûÂÆø‰∏ªÊú∫‰∏äÁöÑ‰∏Ä‰∏™ËøõÁ®ã„ÄÇ</p>
<p>IPC(Inter-Process Communication) namespace: ‰∏ªË¶ÅÂåÖÊã¨Â∏∏ËßÅÁöÑ‰ø°Âè∑ÈáèÔºåÊ∂àÊÅØÈòüÂàóÂíåÂÖ±‰∫´ÂÜÖÂ≠ò„ÄÇÁî≥ËØ∑IPCÂÖ∂ÂÆûÂ∞±ÊòØÁî≥ËØ∑‰∫ÜÂÖ®Â±ÄÂîØ‰∏ÄÁöÑ32‰ΩçID„ÄÇIPC namespaceÂÆûÈôÖ‰∏äÂ∞±ÂåÖÂê´‰∫ÜÁ≥ªÁªüÁöÑIPCÊ†áËØÜÁ¨¶‰ª•ÂèäÂÆûÁé∞‰∫ÜPOSIXÊ∂àÊÅØÈòüÂàóÁöÑÊñá‰ª∂Á≥ªÁªü„ÄÇ‰∏çÂêåÁöÑIPC namespace‰∏ãÁöÑËøõÁ®ã‰πãÈó¥‰∏çÂèØËßÅ„ÄÇ</p>
<p>PID(Process ID) namespace: ÂØπËøõÁ®ãÁöÑPIDËøõË°åÈáçÂÜôÔºå‰∏çÂêånamespace‰∏ãÁöÑËøõÁ®ãÂèØ‰ª•Êã•ÊúâÁõ∏ÂêåÁöÑPIDÔºåÊâÄÊúâPID namespaceÁª¥ÊåÅ‰∏Ä‰∏™Ê†ëÁä∂ÁªìÊûÑ„ÄÇÂÖ∂‰∏≠initËøõÁ®ãÂÖ∑ÊúâÂ±èËîΩÊùÉÈôêÔºå‰∏ÄÊó¶initË¢´ÈîÄÊØÅÔºåÈÇ£‰πàÂêå‰∏Ä‰∏™namespace‰∏ãÁöÑPIDÈÉΩ‰ºöÊî∂Âà∞SIGKILLËÄåË¢´ÊùÄÊ≠ª</p>
<p>mount namespace: ÊòØÂéÜÂè≤‰∏äÁ¨¨‰∏Ä‰∏™namespaceÔºåÊâÄ‰ª•Ê†áÂøó‰ΩçÊØîËæÉÁâπÊÆäÔºåÂ∞±ÊòØCLONE_NEWNS„ÄÇÈöîÁ¶ª‰ª•ÂêéÔºå‰∏çÂêånamespace‰∏ãÁöÑÊñá‰ª∂Â∞Ü‰∏çÂèóÂΩ±Âìç„ÄÇ</p>
<p>Âú®2006Âπ¥ÂºïÂÖ•‰∫ÜÊåÇËΩΩ‰º†Êí≠(mount propagation)Êú∫Âà∂Ôºå‰ΩøÂæóÊåÇËΩΩÂèØ‰ª•ÂÆö‰πâÊåÇËΩΩÂØπË±°‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåÂÜ≥ÂÆö‰∫Ü‰∫ã‰ª∂Â¶Ç‰Ωï‰º†Êí≠Âà∞ÂÖ∂‰ªñÊåÇËΩΩÁöÑÂØπË±°„ÄÇÂåÖÊã¨ÔºöÂÖ±‰∫´(share)Ôºå‰ªéÂ±û(slave)ÔºåÂÖ±‰∫´/‰ªéÂ±û(share and slave)ÔºåÁßÅÊúâ(private)Ôºå‰∏çÂèØÁªëÂÆö(unbinable)ÔºåÂÖ±‰∫îÁßç„ÄÇ</p>
<p>network namespace: Êèê‰æõ‰∫ÜÁΩëÁªúËµÑÊ∫êÁöÑÈöîÁ¶ªÔºåÂåÖÊã¨ÁΩëÁªúËÆæÂ§á„ÄÅIPv4/IPv6ÂçèËÆÆÊ†à„ÄÅIPË∑ØÁî±Ë°®„ÄÅÈò≤ÁÅ´Â¢ôÔºå/proc/netÁõÆÂΩïÔºå/sys/class/netÁõÆÂΩï‰ª•ÂèäsocketÁ≠â„ÄÇ‰∏Ä‰∏™Áâ©ÁêÜÁöÑÁΩëÁªúËÆæÂ§áÂè™ËÉΩÂ§Ñ‰∫é‰∏Ä‰∏™network namespace‰∏≠ÔºåÈÄöËøáÂàõÂª∫veth pairÂàõÂª∫ÈÄöÈÅì‰ª•ËææÂà∞ÈÄö‰ø°ÁõÆÁöÑ„ÄÇ</p>
<p>Âú®Âª∫Á´ãÁΩëÊ°•‰πãÂâçÔºåÊñ∞ÊóßnamespaceÈÄöËøáÂª∫Á´ãpipeÔºåinitÂú®pipe‰∏ÄÊÆµÂæ™ÁéØÁ≠âÂæÖÔºåÁõ¥Âà∞ÁÆ°ÈÅìÂè¶‰∏ÄËæπ‰º†Êù•vethÁöÑ‰ø°ÊÅØÔºåinitÊâçÁªìÊùüÁ≠âÂæÖ„ÄÇ</p>
<p>user namespace: Áõ¥Âà∞LinuxÂÜÖÊ†∏3.8ÂºÄÂßãÈÉΩÊú™ÂÆåÂÖ®ÂÆûÁé∞ÔºåËøòÊúâÈÉ®ÂàÜÊñá‰ª∂Á≥ªÁªüÊú™ÊîØÊåÅ„ÄÇËÆæËÆ°‰∏ªË¶ÅÈöîÁ¶ª‰∫ÜÂÆâÂÖ®Áõ∏ÂÖ≥ÁöÑÊ†áËØÜÁ¨¶(identifier)ÂíåÂ±ûÊÄß(attribute)ÔºåÂåÖÊã¨Áî®Êà∑IDÔºåÁî®Êà∑ÁªÑIDÔºårootÁõÆÂΩïÔºåkeyÔºàÂØÜÈí•Ôºâ‰ª•ÂèäÁâπÊÆäÊùÉÈôê„ÄÇDockerÂú®1.10ÂºÄÂßãÊâçÊîØÊåÅuser namespaceÔºåÂêØÂä®daemonÊó∂ÊåáÂÆöuserns-remapÔºåÂàôÂÆπÂô®ÂÜÖÁöÑrootÂ∞Ü‰∏çÂÜçÁ≠â‰∫éÂÆø‰∏ªÊú∫ÂÜÖÁöÑroot„ÄÇ</p>
<p>namespace ÁöÑÊ†∏ÂøÉÂÆûÈôÖ‰∏äÊòØÈÄöËøáÂ±ÇÊ¨°ÂÖ≥ËÅîËµ∑Êù•ÔºåÊØè‰∏™namespaceÈÉΩÊ∫êËá™‰∫éroot namespaceÁöÑÊò†Â∞Ñ„ÄÇ</p>
<h2 id="2-cgroups">*.2. cgroups</h2>
<p>cgroupsÔºöÈôêÂà∂Ë¢´namespaceÈöîÁ¶ªËµ∑Êù•ÁöÑËµÑÊ∫êÔºåËøòÂèØ‰ª•‰∏∫ËµÑÊ∫êËÆæÁΩÆÊùÉÈáç„ÄÅËÆ°ÁÆó‰ΩøÁî®Èáè„ÄÅÊìçÊéß‰ªªÂä°ÔºàËøõÁ®ãÊàñÁ∫øÁ®ãÔºâÂêØÂÅúÁ≠â„ÄÇ</p>
<p>cgroupsÊòØLinuxÂÜÖÊ†∏Êèê‰æõÁöÑ‰∏ÄÁßçÊú∫Âà∂ÔºåËøôÁßçÊú∫Âà∂ÂèØ‰ª•Ê†πÊçÆÈúÄÊ±ÇÊää‰∏ÄÁ≥ªÂàóÁ≥ªÁªü‰ªªÂä°ÂèäÂÖ∂Â≠ê‰ªªÂä°Êï¥ÂêàÔºàÊàñÂàÜÈöîÔºâÂà∞ÊåâËµÑÊ∫êÂàíÂàÜÁ≠âÁ∫ßÁöÑ‰∏çÂêåÁªÑÂÜÖÔºå‰ªéËÄå‰∏∫Á≥ªÁªüËµÑÊ∫êÁÆ°ÁêÜÊèê‰æõ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÊ°ÜÊû∂„ÄÇcgroupsÁöÑÂÆûÁé∞Êú¨Ë¥®‰∏äÊòØÁªô‰ªªÂä°ÊåÇ‰∏äÈí©Â≠êÔºåÂΩì‰ªªÂä°ËøêË°åÁöÑËøáÁ®ã‰∏≠Ê∂âÂèäÊüêÁßçËµÑÊ∫êÊó∂ÔºåÂ∞±‰ºöËß¶ÂèëÈí©Â≠ê‰∏äÊâÄÈôÑÂ∏¶ÁöÑÂ≠êÁ≥ªÁªüËøõË°åÊ£ÄÊµã</p>
<p>cgroups‰∏∫‰∫Ü‰∏çÂêåÁî®Êà∑Â±ÇÈù¢ÁöÑÁÆ°ÁêÜËµÑÊ∫êÔºåÂπ∂Êèê‰æõÁªü‰∏ÄÂåñÁöÑÊé•Âè£ÔºåÂåÖÊã¨Â¶Ç‰∏ãÂõõ‰∏™ÂäüËÉΩÔºö</p>
<ul>
<li>ËµÑÊ∫êÈôêÂà∂ÔºöcgroupsÂèØ‰ª•ÂØπËµÑÊ∫êÁöÑÊÄªÂíåËøõË°åÈôêÂà∂ÔºåÂΩìË∂ÖËøá‰∏äÈôêÂç≥Ëß¶ÂèëOOM„ÄÇ</li>
<li>‰ºòÂÖàÁ∫ßÂàÜÈÖçÔºöÂàÜÈÖçCPUÂàÜÂæóÁöÑÊó∂Èó¥Áâá‰ª•ÂèäÁ£ÅÁõòI/OÂ∏¶ÂÆΩÔºåÂÜ≥ÂÆöÂÖ∂‰ºòÈôêÁ∫ß„ÄÇ</li>
<li>ËµÑÊ∫êÁªüËÆ°ÔºöÁªüËÆ°ÂÜÖÂ≠ò‰ΩøÁî®Êó∂ÈïøÔºåCPU‰ΩøÁî®ÈáèÁ≠â„ÄÇ</li>
<li>‰ªªÂä°ÊéßÂà∂ÔºöÂÆûÁé∞‰ªªÂä°ÊåÇËµ∑ÔºåÊÅ¢Â§çÁ≠âÊìç‰Ωú„ÄÇ</li>
</ul>
<p>ÈïúÂÉèÂàÜÂ±ÇÔºöÊØè‰∏™ÈïúÂÉèÈÉΩÁî±‰∏ÄÁ≥ªÂàóÈïúÂÉèÂ±ÇÊûÑÊàêÔºåÈááÁî®COWÊú∫Âà∂ÔºåÂπ∂Ê†πÊçÆÊñá‰ª∂ÂÜÖÂÆπÁ¥¢ÂºïÈïúÂÉèÂíåÈïúÂÉèÂ±Ç„ÄÇËÅîÂêàÊåÇËΩΩÊäÄÊúØÂèØ‰ª•Âú®‰∏Ä‰∏™ÊåÇËΩΩÁÇπÂêåÊó∂ÊåÇËΩΩÂ§ö‰∏™Êñá‰ª∂Á≥ªÁªüÔºåÂ∞ÜÊåÇËΩΩÁÇπÁöÑÂéüÁõÆÂΩï‰∏éË¢´ÊåÇËΩΩÂÜÖÂÆπËøõË°åÊï¥ÂêàÔºå‰ΩøÂæóÊúÄÁªàÂèØËßÅÁöÑÊñá‰ª∂Á≥ªÁªüÂ∞Ü‰ºöÂåÖÂê´Êï¥Âêà‰πãÂêéÁöÑÂêÑÂ±ÇÁöÑÊñá‰ª∂ÂíåÁõÆÂΩï„ÄÇ</p>
<p>OverlayFSÊòØ‰∏ÄÁßçÊñ∞ÂûãËÅîÂêàÊñá‰ª∂Á≥ªÁªüÔºàunion filesystemÔºâÔºåLinuxÂÜÖÊ†∏ÁâàÊú¨3.18ÂºÄÂßãÊîØÊåÅÔºåÂÆÉÂÖÅËÆ∏Áî®Êà∑Â∞Ü‰∏Ä‰∏™Êñá‰ª∂Á≥ªÁªü‰∏éÂè¶‰∏Ä‰∏™Êñá‰ª∂Á≥ªÁªüÈáçÂè†ÔºàoverlayÔºâÔºåÂú®‰∏äÂ±ÇÁöÑÊñá‰ª∂Á≥ªÁªü‰∏≠ËÆ∞ÂΩïÊõ¥ÊîπÔºåËÄå‰∏ãÂ±ÇÁöÑÊñá‰ª∂Á≥ªÁªü‰øùÊåÅ‰∏çÂèò„ÄÇ</p>
<p>libnetworkÔºöÂú®DockerÁöÑÊ°•Êé•ÁΩëÁªúÊ®°Âºè‰∏≠Ôºådocker0ÁöÑIPÂú∞ÂùÄ‰Ωú‰∏∫Ëøû‰∫é‰πã‰∏äÁöÑÂÆπÂô®ÁöÑÈªòËÆ§ÁΩëÂÖ≥Âú∞ÂùÄÂ≠òÂú®„ÄÇ</p>
<ul>
<li>BridgeÈ©±Âä®ÔºöÈªòËÆ§ÊñπÂºèÔºåContainer‰ºöÊé•Âà∞DockerÁΩëÊ°•‰∏äÔºå‰∏éÂ§ñÁïåÈÄö‰ø°ÈááÁî®NATÔºåÂ¢ûÂä†‰∫ÜÈÄö‰ø°Â§çÊùÇÊÄß„ÄÇ</li>
<li>hostÈ©±Âä®Ôºö‰∏çÂàõÂª∫ÈªòËÆ§ÁöÑnamespaceÔºå‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑÁΩëÂç°„ÄÅIPÂíåÁ´ØÂè£ÔºåÈÅøÂÖç‰∫ÜÂú∞ÂùÄËΩ¨Êç¢ÈóÆÈ¢ò„ÄÇ</li>
<li>overlayÈ©±Âä®ÔºöÈááÁî®IETFÁöÑVXLANÊñπÂºèÔºåÈÄÇÂêàÂ§ßËßÑÊ®°ÁöÑ‰∫ëËÆ°ÁÆóËôöÊãüÂåñSDN controllerÊ®°ÂºèÔºå‰ΩÜÊòØÈúÄË¶ÅÈ¢ùÂ§ñÈÖçÁΩÆÊúçÂä°ÔºåÂ¶ÇConsulÔºåetcdÂíåZooKeeperÁ≠âÔºåÂú®ÂêØÂä®Êó∂Ê∑ªÂä†ÂèÇÊï∞</li>
<li>remoteÈ©±Âä®ÔºöÊ≤°Êúâ‰ΩøÁî®ÁúüÊ≠£ÁöÑÁΩëÁªúÊúçÂä°ÂèëÁé∞ÔºåË∞ÉÁî®‰∫ÜÁî®Êà∑Ëá™Â∑±ÁöÑÁΩëÁªúÈ©±Âä®Êèí‰ª∂„ÄÇ</li>
<li>nullÈ©±Âä®ÔºöContainerÊúâËá™Â∑±ÁöÑnamespaceÔºå‰ΩÜÊòØ‰∏ç‰ºöÂÅö‰ªª‰ΩïÁΩëÁªúÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆ„ÄÇ</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/operating-system/">Operating System</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span><a class="link" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.ml"  target="_blank" rel="noopener"
    >Licensed under CC BY-NC-SA 4.0</a></span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/post/tinysql-implementation/">
        
        
            <div class="article-image">
                <img src="/post/tinysql-implementation/talent-plan.33dc3f0b37bb83dcd906eff5abe55703_hub37bed894517c8c0c46efedb5ba1232d_43996_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post TinySQL Implementation"
                        
                        data-hash="md5-M9w/Cze7g9zZBu/1q&#43;VXAw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">TinySQL Implementation</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/amend-hugo-theme-even/">
        
        
            <div class="article-image">
                <img src="/post/amend-hugo-theme-even/even.4f6389121e44efa6027f8bad46d9b2d8_hu7239b18983faa84c364ba0614e368fc1_33946_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Amend Hugo Theme Even"
                        
                        data-hash="md5-T2OJEh5E76YCf4utRtmy2A==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Amend Hugo Theme Even</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/about-computer-science/">
        
        
            <div class="article-image">
                <img src="/post/about-computer-science/force.b6e88110a0b67218a7eb8b2eb0832df5_hu2f7a4f0d3aab2fb44bd6811e98148674_312962_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post About Computer Science"
                        
                        data-hash="md5-tuiBEKC2chin64susIMt9Q==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">About Computer Science</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/compilers/">
        
        
            <div class="article-image">
                <img src="/post/compilers/Compilers.721e3e2c562aaf9810a16b67966bddd7_hu8c64e4fc292413cef039e3f7a5ec8a84_74016_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Compilers"
                        
                        data-hash="md5-ch4&#43;LFYqr5gQoWtnlmvd1w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Compilers</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/software-engineering/">
        
        
            <div class="article-image">
                <img src="/post/software-engineering/code.451576849004ae7fa7528a5d97c8edbd_hu8931b1e4159b9bd74cb80acff6dca036_21936_250x150_fill_q75_h2_box_smart1_2.webp" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Software Engineering"
                        
                        data-hash="md5-RRV2hJAErn&#43;nUopdl8jtvQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Software Engineering</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="Chasing1020/Chasing1020.github.io"
    data-repo-id="R_kgDOGR5Ifw"
    data-category="Announcements"
    data-category-id="DIC_kwDOGR5If84CURCm"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2019 - 
        
        2023 Chasing&#39;s blog
    </section>
    
    <section class="powerby">
        
            I just want a peaceful life without troubles <br/>
        Built with <b><a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a></b> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-CDYPFNXQDZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CDYPFNXQDZ');
</script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css?family=JetBrains Mono";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>


    </body>
</html>
